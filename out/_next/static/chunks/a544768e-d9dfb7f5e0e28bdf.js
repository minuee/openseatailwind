"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[349],{5224:function(t,e,r){r.d(e,{x9:function(){return ir}});var n=r(83300),a=r.n(n),s=r(16441),i=r(65992),u=r(36153),o=r(9279),c=r(35553),p=r(48088),d=r(32046),f=r(20238),l=r(2593),h=r(25948),v=r(67827),m=r(38197),x=r(84243),y=r(31886),g=(r(54586),r(81556)),w=r(58173),k=r(56387),b=r(90397),C=r(2162),T=r.n(C),S=r(56371),A=r(70655),O=r(19485),M=r(25934),P=(r(81354),r(48764).Buffer);function R(t,e,r,n,a,s,i){try{var u=t[s](i),o=u.value}catch(c){return void r(c)}u.done?e(o):Promise.resolve(o).then(n,a)}function _(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function i(t){R(s,n,a,i,u,"next",t)}function u(t){R(s,n,a,i,u,"throw",t)}i(void 0)}))}}function E(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function F(t,e,r){return e&&E(t.prototype,e),r&&E(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function L(){return(L=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function B(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,N(t,e)}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function N(t,e){return(N=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function U(t,e,r){return(U=D()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var a=new(Function.bind.apply(t,n));return r&&N(a,r.prototype),a}).apply(null,arguments)}function V(t){var e="function"===typeof Map?new Map:void 0;return(V=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return U(t,arguments,I(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),N(n,t)})(t)}function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function j(t,e){var r="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"===typeof t)return $(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$(t,e):void 0}}(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var q,G=(function(t){var e=function(t){var e,r=Object.prototype,n=r.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function o(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(_){o=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var a=e&&e.prototype instanceof m?e:m,s=Object.create(a.prototype),i=new M(n||[]);return s._invoke=function(t,e,r){var n=d;return function(a,s){if(n===l)throw new Error("Generator is already running");if(n===h){if("throw"===a)throw s;return R()}for(r.method=a,r.arg=s;;){var i=r.delegate;if(i){var u=S(i,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=l;var o=p(t,e,r);if("normal"===o.type){if(n=r.done?h:f,o.arg===v)continue;return{value:o.arg,done:r.done}}"throw"===o.type&&(n=h,r.method="throw",r.arg=o.arg)}}}(t,r,i),s}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(_){return{type:"throw",arg:_}}}t.wrap=c;var d="suspendedStart",f="suspendedYield",l="executing",h="completed",v={};function m(){}function x(){}function y(){}var g={};o(g,s,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(P([])));k&&k!==r&&n.call(k,s)&&(g=k);var b=y.prototype=m.prototype=Object.create(g);function C(t){["next","throw","return"].forEach((function(e){o(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(a,s,i,u){var o=p(t[a],t,s);if("throw"!==o.type){var c=o.arg,d=c.value;return d&&"object"===typeof d&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):e.resolve(d).then((function(t){c.value=t,i(c)}),(function(t){return r("throw",t,i,u)}))}u(o.arg)}var a;this._invoke=function(t,n){function s(){return new e((function(e,a){r(t,n,e,a)}))}return a=a?a.then(s,s):s()}}function S(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method))return v;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var a=p(n,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var s=a.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function P(t){if(t){var r=t[s];if(r)return r.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}return{next:R}}function R(){return{value:e,done:!0}}return x.prototype=y,o(b,"constructor",y),o(y,"constructor",x),x.displayName=o(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,o(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},C(T.prototype),o(T.prototype,i,(function(){return this})),t.AsyncIterator=T,t.async=function(e,r,n,a,s){void 0===s&&(s=Promise);var i=new T(c(e,r,n,a),s);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},C(b),o(b,u,"Generator"),o(b,s,(function(){return this})),o(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=P,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return u.type="throw",u.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var s=this.tryEntries.length-1;s>=0;--s){var i=this.tryEntries[s],u=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var o=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(o&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var s=a;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=t,i.arg=e,s?(this.method="next",this.next=s.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=e}catch(r){"object"===typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(q={exports:{}},q.exports),q.exports),W=function(t){function e(){return t.call(this,"NOT_FOUND")||this}return B(e,t),e}(V(Error)),H=function(t){function e(e){return t.call(this,e?"'"+e+"' is an invalid address":"Invalid address passed")||this}return B(e,t),e}(V(Error)),z=function(t){function e(e,r){return t.call(this,"MISSING ROLE: "+e+" does not have the '"+r+"' role")||this}return B(e,t),e}(V(Error)),K=(Error,function(t){function e(e){return t.call(this,"UPLOAD_FAILED: "+e)||this}return B(e,t),e}(V(Error))),Q=(Error,function(t){function e(e){return t.call(this,"DUPLICATE_FILE_NAME_ERROR: File name "+e+" was passed for more than one file.")||this}return B(e,t),e}(V(Error))),J=(Error,function(t){function e(){return t.call(this,"LIST ERROR: you should be the owner of the token to list it.")||this}return B(e,t),e}(V(Error))),Z=function(t){function e(e){return t.call(this,"BUY ERROR: You cannot buy more than "+e+" tokens")||this}return B(e,t),e}(V(Error)),Y=function(t){function e(e,r){var n;return(n=t.call(this,"FETCH_FAILED: "+e)||this).innerError=void 0,n.innerError=r,n}return B(e,t),e}(V(Error)),X=function(t){function e(e){return t.call(this,"DUPLICATE_LEAFS"+(e?" : "+e:""))||this}return B(e,t),e}(V(Error)),tt=function(t){function e(e){return t.call(this,"Auction already started with existing bid"+(e?", id: "+e:""))||this}return B(e,t),e}(V(Error)),et=function(t){function e(e){return t.call(this,"FUNCTION DEPRECATED. "+(e?"Use "+e+" instead":""))||this}return B(e,t),e}(V(Error)),rt=function(t){function e(e,r){return t.call(this,"Could not find listing."+(e?" marketplace address: "+e:"")+(r?" listing id: "+r:""))||this}return B(e,t),e}(V(Error)),nt=function(t){function e(e,r,n,a){return t.call(this,"Incorrect listing type. Are you sure you're using the right method?."+(e?" marketplace address: "+e:"")+(r?" listing id: "+r:"")+(a?" expected type: "+a:"")+(n?" actual type: "+n:""))||this}return B(e,t),e}(V(Error)),at=function(t){function e(e){return t.call(this,"Failed to transfer asset, transfer is restricted."+(e?" Address : "+e:""))||this}return B(e,t),e}(V(Error)),st=(Error,function(t){function e(e,r){return t.call(this,"Auction has not ended yet"+(e?", id: "+e:"")+(r?", end time: "+r.toString():""))||this}return B(e,t),e}(V(Error)));function it(t,e){return t&&"string"===typeof t?(e.endsWith("/")||(e+="/"),t.replace("ipfs://",e)):""}function ut(t,e){"object"===typeof t&&Object.keys(t).forEach((function(r){"object"===typeof t[r]?t[r]=ut(t[r],e):"string"===typeof t[r]&&t[r].startsWith("ipfs://")&&(t[r]=it(t[r],e))}));return t}function ot(t,e,r){return ct.apply(this,arguments)}function ct(){return(ct=_(G.mark((function t(e,r,n){var a,s,i,u;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={"X-App-Name":"CONSOLE-TS-SDK-"+r,"X-Public-Address":n||""},(s=new FormData).append("file",e),t.next=5,fetch("https://upload.nftlabs.co/upload",{method:"POST",body:s,headers:a});case 5:return i=t.sent,t.prev=6,t.next=9,i.json();case 9:return u=t.sent,t.abrupt("return",u.IpfsUri);case 13:throw t.prev=13,t.t0=t.catch(6),new K("Failed to upload to IPFS: "+t.t0);case 16:case"end":return t.stop()}}),t,null,[[6,13]])})))).apply(this,arguments)}function pt(t,e,r){return dt.apply(this,arguments)}function dt(){return(dt=_(G.mark((function t(e,r,n){var a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=function(){return(s=_(G.mark((function t(e){var s,i,u,o;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=Object.keys(e),t.t0=G.keys(s);case 2:if((t.t1=t.t0()).done){t.next=18;break}if(i=t.t1.value,u=e[s[i]],!(o=u instanceof File||u instanceof P)){t.next=10;break}return t.next=9,ot(e[s[i]],r,n);case 9:e[s[i]]=t.sent;case 10:if(!o||"string"===typeof e[s[i]]){t.next=12;break}throw new Error("Upload to IPFS failed");case 12:if("object"!==typeof u){t.next=16;break}return t.next=15,a(e[s[i]]);case 15:e[s[i]]=t.sent;case 16:t.next=2;break;case 18:return t.abrupt("return",e);case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)},a=function(t){return s.apply(this,arguments)},"string"!==typeof e){t.next=4;break}return t.abrupt("return",e);case 4:return t.next=6,a(e);case 6:return e=t.sent,t.next=9,ot(JSON.stringify(e),r,n);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}globalThis.FormData||(globalThis.FormData=r(6230)),globalThis.File||(globalThis.File=r(70403).$);var ft,lt=(0,s.arrayify)("0x80ac58cd"),ht=[{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function vt(t,e,r,n){return mt.apply(this,arguments)}function mt(){return(mt=_(G.mark((function t(e,r,n,a){var s,u,o,c,p,d;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===a&&(a=!1),s=new i.CH(r,ht,e),t.next=4,s.contractURI();case 4:return u=t.sent,o=it(u,n),t.next=8,fetch(o);case 8:if((c=t.sent).ok){t.next=11;break}throw new Error("Gateway did not return metadata, instead returned:\n "+c.status+" - "+c.statusText);case 11:return t.prev=11,t.next=14,c.json();case 14:return p=t.sent,a&&(p=ut(p,n)),d=L({},p),t.abrupt("return",d);case 20:throw t.prev=20,t.t0=t.catch(11),new Error("Gateway did not return metadata, instead returned:\n "+c.status+" - "+c.statusText);case 23:case"end":return t.stop()}}),t,null,[[11,20]])})))).apply(this,arguments)}function xt(t,e){return yt.apply(this,arguments)}function yt(){return(yt=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCode(r);case 2:return t.t0=t.sent,t.abrupt("return","0x"!==t.t0);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(t){t[t.Mainnet=1]="Mainnet",t[t.Ropsten=3]="Ropsten",t[t.Rinkeby=4]="Rinkeby",t[t.Goerli=5]="Goerli",t[t.Kovan=42]="Kovan",t[t.BSC=56]="BSC",t[t.xDai=100]="xDai",t[t.Polygon=137]="Polygon",t[t.Moonriver=1285]="Moonriver",t[t.Mumbai=80001]="Mumbai",t[t.Harmony=16666e5]="Harmony",t[t.Localhost=1337]="Localhost",t[t.Hardhat=31337]="Hardhat",t[t.Fantom=250]="Fantom",t[t.FantomTestnet=4002]="FantomTestnet",t[t.Avalanche=43114]="Avalanche",t[t.AvalancheFujiTestnet=43113]="AvalancheFujiTestnet"}(ft||(ft={}));ft.Mainnet,ft.Rinkeby,ft.Polygon,ft.Mumbai,ft.Fantom,ft.FantomTestnet,ft.Avalanche,ft.AvalancheFujiTestnet;var gt,wt,kt="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",bt=((gt={})[ft.Mainnet]={name:"Ether",symbol:"ETH",decimals:18,wrapped:{address:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",name:"Wrapped Ether",symbol:"WETH"}},gt[ft.Rinkeby]={name:"Ether",symbol:"ETH",decimals:18,wrapped:{address:"0xc778417E063141139Fce010982780140Aa0cD5Ab",name:"Wrapped Ether",symbol:"WETH"}},gt[ft.Polygon]={name:"Matic",symbol:"MATIC",decimals:18,wrapped:{address:"0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270",name:"Wrapped Matic",symbol:"WMATIC"}},gt[ft.Mumbai]={name:"Matic",symbol:"MATIC",decimals:18,wrapped:{address:"0x9c3C9283D3e44854697Cd22D3Faa240Cfb032889",name:"Wrapped Matic",symbol:"WMATIC"}},gt[ft.Avalanche]={name:"Avalanche",symbol:"AVAX",decimals:18,wrapped:{address:"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7",name:"Wrapped AVAX",symbol:"WAVAX"}},gt[ft.AvalancheFujiTestnet]={name:"Avalanche",symbol:"AVAX",decimals:18,wrapped:{address:"0xd00ae08403B9bbb9124bB305C09058E32C39A48c",name:"Wrapped AVAX",symbol:"WAVAX"}},gt[ft.Fantom]={name:"Fantom",symbol:"FTM",decimals:18,wrapped:{address:"0x21be370D5312f44cB42ce377BC9b8a0cEF1A4C83",name:"Wrapped Fantom",symbol:"WFTM"}},gt[ft.FantomTestnet]={name:"Fantom",symbol:"FTM",decimals:18,wrapped:{address:"0xf1277d1Ed8AD466beddF92ef448A132661956621",name:"Wrapped Fantom",symbol:"WFTM"}},gt[ft.Hardhat]={name:"Ether",symbol:"ETH",decimals:18,wrapped:{address:"0x5FbDB2315678afecb367f032d93F642f64180aa3",name:"Wrapped Ether",symbol:"WETH"}},gt);function Ct(t,e){return Tt.apply(this,arguments)}function Tt(){return(Tt=_(G.mark((function t(e,r){var n,a,s,i,o,c,d,f;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!Ot(r)){t.next=10;break}return n=p.E.isSigner(e)?e.provider:e,t.next=5,n.getNetwork();case 5:return a=t.sent,s=_t(a.chainId),t.abrupt("return",{name:s.name,symbol:s.symbol,decimals:s.decimals});case 10:return i=u.w6.connect(r,e),t.next=13,Promise.all([i.name(),i.symbol(),i.decimals()]);case 13:return o=t.sent,c=o[0],d=o[1],f=o[2],t.abrupt("return",{name:c,symbol:d,decimals:f});case 18:t.next=22;break;case 20:t.prev=20,t.t0=t.catch(0);case 22:return t.abrupt("return",{name:"",symbol:"",decimals:0});case 23:case"end":return t.stop()}}),t,null,[[0,20]])})))).apply(this,arguments)}function St(t,e,r){return At.apply(this,arguments)}function At(){return(At=_(G.mark((function t(e,r,n){var a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ct(e,r);case 2:return a=t.sent,t.abrupt("return",L({},a,{value:n.toString(),displayValue:(0,c.formatUnits)(n,a.decimals)}));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ot(t){return t.toLowerCase()===kt||t.toLowerCase()===o.d}function Mt(t,e,r){return Pt.apply(this,arguments)}function Pt(){return(Pt=_(G.mark((function t(e,r,n){var a,s,i;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=Rt(e),!Ot(r)){t.next=7;break}return t.next=4,a.getBalance(n);case 4:s=t.sent,t.next=18;break;case 7:return t.prev=7,i=u.w6.connect(r,a),t.next=11,i.balanceOf(n);case 11:s=t.sent,t.next=18;break;case 14:throw t.prev=14,t.t0=t.catch(7),console.error(t.t0),new Error("invalid ERC20 token address");case 18:return t.abrupt("return",St(e,r,s));case 19:case"end":return t.stop()}}),t,null,[[7,14]])})))).apply(this,arguments)}function Rt(t){return p.E.isSigner(t)?t.provider:t}function _t(t){return bt[t]}var Et,Ft=((wt={})[ft.Polygon]={vrfCoordinator:"0x3d2341ADb2D31f1c5530cDC622016af293177AE0",linkTokenAddress:"0xb0897686c545045aFc77CF20eC7A532E3120E0F1",keyHash:"0xf86195cf7690c55907b2b611ebb7343a6f649bff128701cc542f0569e2c549da",fees:c.parseEther("0.0001")},wt[ft.Mumbai]={vrfCoordinator:"0x8C7382F9D8f56b33781fE506E897a4F1e2d17255",linkTokenAddress:"0x326C977E6efc84E512bB9C30f76E30c160eD06FB",keyHash:"0x6e75b569a01ef56d18cab6a8e71e6600d6ce853834d4a5748b720d06f878b3a4",fees:c.parseEther("0.0001")},wt[ft.Rinkeby]={vrfCoordinator:"0xb3dCcb4Cf7a26f6cf6B120Cf5A73875B7BBc655B",linkTokenAddress:"0x01be23585060835e02b77ef475b0cc51aa1e0709",keyHash:"0x2ed0feb3e7fd2022120aa84fab1945545a9f2ffc9076fd6156fa96eaff4c1311",fees:c.parseEther("0.1")},wt[ft.Mainnet]={vrfCoordinator:"0xf0d54349aDdcf704F77AE15b96510dEA15cb7952",linkTokenAddress:"0x514910771AF9Ca656af840dff83E8264EcF986CA",keyHash:"0xAA77729D3466CA35AE8D28B3BBAC7CC36A5031EFDC430821C02BC31A238AF445",fees:c.parseEther("2")},wt[ft.Hardhat]={vrfCoordinator:"0x8C7382F9D8f56b33781fE506E897a4F1e2d17255",linkTokenAddress:"0x326C977E6efc84E512bB9C30f76E30c160eD06FB",keyHash:"0x6e75b569a01ef56d18cab6a8e71e6600d6ce853834d4a5748b720d06f878b3a4",fees:c.parseEther("0.0001")},wt);!function(t){t[t.CURRENCY=0]="CURRENCY",t[t.TOKEN=0]="TOKEN",t[t.COLLECTION=1]="COLLECTION",t[t.BUNDLE=1]="BUNDLE",t[t.NFT=2]="NFT",t[t.DYNAMIC_NFT=3]="DYNAMIC_NFT",t[t.ACCESS_NFT=4]="ACCESS_NFT",t[t.PACK=5]="PACK",t[t.MARKET=6]="MARKET",t[t.DROP=7]="DROP",t[t.DATASTORE=8]="DATASTORE",t[t.SPLITS=9]="SPLITS",t[t.VOTE=10]="VOTE",t[t.BUNDLE_DROP=11]="BUNDLE_DROP",t[t.MARKETPLACE=12]="MARKETPLACE"}(Et||(Et={}));var Lt=[{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function Bt(t,e,r,n){return It.apply(this,arguments)}function It(){return(It=_(G.mark((function t(e,r,n,a){var s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=new i.CH(r,Lt,e),t.abrupt("return",Nt(s,n,a));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Nt(t,e,r){return Dt.apply(this,arguments)}function Dt(){return(Dt=_(G.mark((function t(e,r,n){var a,s,i,u,o;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$t(e,r);case 2:if(a=t.sent){t.next=5;break}throw new W;case 5:return s=it(a,n),t.prev=6,t.next=9,fetch(s);case 9:return i=t.sent,t.next=12,i.json();case 12:return u=ut(u=t.sent,n),o=L({},u,{id:r,uri:a}),t.abrupt("return",o);case 18:return t.prev=18,t.t0=t.catch(6),console.error("failed to fetch nft",t.t0),t.abrupt("return",{id:r,uri:a});case 22:case"end":return t.stop()}}),t,null,[[6,18]])})))).apply(this,arguments)}function Ut(t,e,r,n){return Vt.apply(this,arguments)}function Vt(){return(Vt=_(G.mark((function t(e,r,n,a){var s,u,o,c;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=new i.CH(e,Lt,r),t.next=3,$t(s,n);case 3:if(u=t.sent){t.next=6;break}throw new W;case 6:return t.prev=6,t.t0=JSON,t.next=10,a.get(u);case 10:return t.t1=t.sent,o=t.t0.parse.call(t.t0,t.t1),c=L({},o,{id:n}),t.abrupt("return",c);case 16:return t.prev=16,t.t2=t.catch(6),console.error("failed to fetch nft",t.t2),t.abrupt("return",{id:n,uri:u});case 20:case"end":return t.stop()}}),t,null,[[6,16]])})))).apply(this,arguments)}function $t(t,e){return jt.apply(this,arguments)}function jt(){return(jt=_(G.mark((function t(e,r){var n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="",t.prev=1,t.next=4,e.tokenURI(r);case 4:n=t.sent,t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:if(n){t.next=18;break}return t.prev=10,t.next=13,e.uri(r);case 13:n=t.sent,t.next=18;break;case 16:t.prev=16,t.t1=t.catch(10);case 18:return t.abrupt("return",n);case 19:case"end":return t.stop()}}),t,null,[[1,7],[10,16]])})))).apply(this,arguments)}var qt,Gt="admin",Wt="minter",Ht="pauser",zt="transfer",Kt="editor",Qt="lister",Jt={admin:"",transfer:"TRANSFER_ROLE",minter:"MINTER_ROLE",pauser:"PAUSER_ROLE",editor:"EDITOR_ROLE",lister:"LISTER_ROLE"};function Zt(t){return"admin"===t?s.hexZeroPad([0],32):d.id(Jt[t])}function Yt(t){return t&&t===ft.Polygon?"https://gasstation-mainnet.matic.network":null}function Xt(t,e,r){return te.apply(this,arguments)}function te(){return(te=_(G.mark((function t(e,r,n){var a,s,i;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=Yt(e)){t.next=3;break}return t.abrupt("return",null);case 3:return t.prev=3,t.next=6,fetch(a);case 6:return t.next=8,t.sent.json();case 8:if(s=t.sent,!((i=s[r])>0)){t.next=12;break}return t.abrupt("return",Math.min(i,n));case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3),console.error("failed to fetch gas",t.t0);case 17:return t.abrupt("return",null);case 18:case"end":return t.stop()}}),t,null,[[3,14]])})))).apply(this,arguments)}var ee=((qt={})[ft.Mainnet]={registry:"0x902a29f2cfe9f8580ad672AaAD7E917d85ca9a2E",biconomyForwarder:"0x84a0856b038eaAd1cC7E297cF34A7e72685A8693"},qt[ft.Rinkeby]={registry:"0x902a29f2cfe9f8580ad672AaAD7E917d85ca9a2E",biconomyForwarder:"0xFD4973FeB2031D4409fB57afEE5dF2051b171104"},qt[ft.Polygon]={registry:"0x902a29f2cfe9f8580ad672AaAD7E917d85ca9a2E",biconomyForwarder:"0x86C80a8aa58e0A4fa09A69624c31Ab2a6CAD56b8"},qt[ft.Mumbai]={registry:"0x902a29f2cfe9f8580ad672AaAD7E917d85ca9a2E",biconomyForwarder:"0x9399BB24DBB5C4b782C70c2969F58716Ebbd6a3b"},qt[ft.Avalanche]={registry:"0x902a29f2cfe9f8580ad672AaAD7E917d85ca9a2E",biconomyForwarder:"0x64CD353384109423a966dCd3Aa30D884C9b2E057"},qt[ft.AvalancheFujiTestnet]={registry:"0x902a29f2cfe9f8580ad672AaAD7E917d85ca9a2E",biconomyForwarder:"0x6271Ca63D30507f2Dcbf99B52787032506D75BBF"},qt[ft.Fantom]={registry:"0x902a29f2cfe9f8580ad672AaAD7E917d85ca9a2E",biconomyForwarder:f.dE},qt[ft.FantomTestnet]={registry:"0x902a29f2cfe9f8580ad672AaAD7E917d85ca9a2E",biconomyForwarder:f.dE},qt[ft.Hardhat]={registry:"0x902a29f2cfe9f8580ad672AaAD7E917d85ca9a2E",biconomyForwarder:f.dE},qt);function re(t,e){return void 0===e&&(e="registry"),ee[t][e]}var ne,ae=[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"},{name:"gas",type:"uint256"},{name:"nonce",type:"uint256"},{name:"data",type:"bytes"}],se=[{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"uint256",name:"batchId",type:"uint256"}],name:"getNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],ie={},ue={};function oe(t,e,r){return ce.apply(this,arguments)}function ce(){return(ce=_(G.mark((function t(e,r,n){var a,s,i,u,o,c;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.join("|"),s=ue[a],i=Date.now()-s>=2e3,a in ie&&!i){t.next=9;break}return t.next=6,(u=e.functions)[r].apply(u,n);case 6:o=t.sent,Array.isArray(o)&&o.length>0?ie[a]=l.O$.from(o[0]):ie[a]=l.O$.from(o),ue[a]=Date.now();case 9:return c=ie[a],ie[a]=l.O$.from(ie[a]).add(1),t.abrupt("return",c);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function pe(t,e){if(!t)throw new Error(e)}!function(t){t.Transaction="transaction"}(ne||(ne={}));var de=function(){function t(t,e,r,n){this.address=void 0,this.ipfsGatewayUrl=void 0,this.options=void 0,this.sdk=void 0,this._providerOrSigner=null,this._signer=null,this.contract=void 0,this.readOnlyContract=void 0,this.address=e,this.options=r,this.ipfsGatewayUrl=r.ipfsGatewayUrl,this.setProviderOrSigner(t),this.contract=this.connectContract(),this.readOnlyContract=this.options.readOnlyRpcUrl?this.contract.connect(h.yl(this.options.readOnlyRpcUrl)):this.contract,this.sdk=n}var e=t.prototype;return e.exists=function(){var t=_(G.mark((function t(){var e;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getProvider();case 2:return(e=t.sent)||pe(!1),t.abrupt("return",xt(e,this.address));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getMetadata=function(){var t=_(G.mark((function t(e){var r,n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=!0),t.next=3,this.exists();case 3:if(t.sent){t.next=7;break}pe(!1),t.next=8;break;case 7:case 8:return r=this.connectContract(),n=this.getModuleType(),t.t0=vt,t.next=13,this.getProvider();case 13:return t.t1=t.sent,t.t2=r.address,t.t3=this.options.ipfsGatewayUrl,t.t4=e,t.next=19,(0,t.t0)(t.t1,t.t2,t.t3,t.t4);case 19:return t.t5=t.sent,t.t6=r.address,t.t7=n,t.abrupt("return",{metadata:t.t5,address:t.t6,type:t.t7});case 23:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.setMetadata=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.exists();case 2:if(t.sent){t.next=6;break}pe(!1),t.next=7;break;case 6:case 7:return t.next=9,pt(e);case 9:return r=t.sent,t.next=12,this.sendTransaction("setContractURI",[r]);case 12:return t.abrupt("return",this.getMetadata());case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.setProviderOrSigner=function(t){this.providerOrSigner=t,p.E.isSigner(t)&&(this.signer=t),this.contract=this.connectContract(),this.readOnlyContract=this.options.readOnlyRpcUrl?this.contract.connect(h.yl(this.options.readOnlyRpcUrl)):this.contract},e.clearSigner=function(){this.signer=null},e.getProviderOrSigner=function(){return this.signer||this.providerOrSigner},e.getSigner=function(){return p.E.isSigner(this.signer)?this.signer:null},e.hasValidSigner=function(){return p.E.isSigner(this.signer)},e.getSignerAddress=function(){var t=_(G.mark((function t(){var e;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this.getSigner())||pe(!1),t.next=4,e.getAddress();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getProvider=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.readOnlyContract.provider);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getChainID=function(){var t=_(G.mark((function t(){var e,r,n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getProvider();case 2:return(e=t.sent)||pe(!1),t.next=6,e.getNetwork();case 6:return r=t.sent,n=r.chainId,t.abrupt("return",n);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.connectContract=function(){throw new Error("connectContract has to be implemented")},e.getModuleType=function(){throw new Error("getModuleType has to be implemented")},e.getCallOverrides=function(){var t=_(G.mark((function t(){var e,r,n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getChainID();case 2:return e=t.sent,r=this.options.gasSpeed,n=this.options.maxGasPriceInGwei,t.next=7,Xt(e,r,n);case 7:if(a=t.sent){t.next=10;break}return t.abrupt("return",{});case 10:return t.abrupt("return",{gasPrice:c.parseUnits(a.toString(),"gwei")});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.emitTransactionEvent=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.sdk.event.emit(ne.Transaction,{status:e,transactionHash:r});case 1:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.sendTransaction=function(){var t=_(G.mark((function t(e,r,n){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.sendContractTransaction(this.contract,e,r,n));case 1:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.sendContractTransaction=function(){var t=_(G.mark((function t(e,r,n,a){var s,i,u,o,c;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=4;break}return t.next=3,this.getCallOverrides();case 3:a=t.sent;case 4:if(!this.options.transactionRelayerUrl&&!this.options.gasless.biconomy.apiKey){t.next=19;break}return t.next=7,this.getProvider();case 7:return s=t.sent,t.next=10,this.sendGaslessTransaction(e,r,n,a);case 10:return i=t.sent,this.emitTransactionEvent("submitted",i),t.next=14,s.waitForTransaction(i);case 14:return u=t.sent,this.emitTransactionEvent("completed",i),t.abrupt("return",u);case 19:return t.next=21,this.sendTransactionByFunction(e,r,n,a);case 21:return o=t.sent,this.emitTransactionEvent("submitted",o.hash),c=o.wait(),this.emitTransactionEvent("completed",o.hash),t.abrupt("return",c);case 26:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),e.sendTransactionByFunction=function(){var t=_(G.mark((function t(e,r,n,a){var s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e.functions[r]){t.next=3;break}throw new Error("invalid function");case 3:return t.next=5,s.apply(void 0,n.concat([a]));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),e.sendGaslessTransaction=function(){var t=_(G.mark((function t(e,r,n,a){var s,i,u,o,c,p,d,f,h,v;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.getSigner()||pe(!1),t.next=4,this.getProvider();case 4:return t.sent||pe(!1),t.next=8,this.getChainID();case 8:return i=t.sent,t.next=11,this.getSignerAddress();case 11:if(u=t.sent,o=this.address,c=(null==a?void 0:a.value)||0,!l.O$.from(c).gt(0)){t.next=16;break}throw new Error("Cannot send native token value with gasless transaction");case 16:return p=e.interface.encodeFunctionData(r,n),t.next=19,(s=e.estimateGas)[r].apply(s,n);case 19:return d=t.sent,f=d.mul(2),d.lt(25e3)&&(f=l.O$.from(5e5)),h={from:u,to:o,data:p,chainId:i,gasLimit:f,functionName:r,functionArgs:n,callOverrides:a},t.next=25,this.options.gaslessSendFunction(e,h);case 25:return v=t.sent,t.abrupt("return",v);case 27:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),e.signTypedData=function(){var t=_(G.mark((function t(e,r,n,a,s){var i,u,o;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e||null==(i=e.provider)||null==(u=i.provider)||!u.isWalletConnect){t.next=7;break}return o=v.E.getPayload(n,a,s),t.next=4,null==e?void 0:e.provider.send("eth_signTypedData",[r.toLowerCase(),JSON.stringify(o)]);case 4:return t.abrupt("return",t.sent);case 7:return t.next=9,e._signTypedData(n,a,s);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})));return function(e,r,n,a,s){return t.apply(this,arguments)}}(),e.parseEventLogs=function(t,e){if(!e)return null;for(var r,n=this.contract,a=j(e);!(r=a()).done;){var s=r.value;try{return n.interface.decodeEventLog(t,s.data,s.topics)}catch(i){}}return null},e.parseLogs=function(t,e,r){if(void 0===r&&(r=this.contract),!e||0===e.length)return[];var n=r.interface.getEventTopic(t);return e.filter((function(t){return t.topics.indexOf(n)>=0})).map((function(t){return r.interface.parseLog(t)}))},F(t,[{key:"providerOrSigner",get:function(){return this.signer||this._providerOrSigner||this.getProviderOrSigner()},set:function(t){this._providerOrSigner=t}},{key:"signer",get:function(){return this._signer},set:function(t){this._signer=t}}]),t}(),fe=function(t){B(r,t);var e=r.prototype;function r(e,r,n,a){return t.call(this,e,r,n,a)||this}return e.getModuleRoles=function(){throw new Error("getModuleRoles has to be implemented by a subclass")},e.getRoleMembers=function(){var t=_(G.mark((function t(e){var r,n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.roles.includes(e)||pe(!1),r=this.contract,n=Zt(e),t.next=5,r.getRoleMemberCount(n);case 5:return a=t.sent.toNumber(),t.next=8,Promise.all(Array.from(Array(a).keys()).map((function(t){return r.getRoleMember(n,t)})));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getAllRoleMembers=function(){var t=_(G.mark((function t(){var e,r,n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.roles.length||pe(!1),e={},r=j(this.roles);case 3:if((n=r()).done){t.next=10;break}return a=n.value,t.next=7,this.getRoleMembers(a);case 7:e[a]=t.sent;case 8:t.next=3;break;case 10:return t.abrupt("return",e);case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.setAllRoleMembers=function(){var t=_(G.mark((function t(e){var r,n,a,s=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=Object.keys(e)).length||pe(!1),r.every((function(t){return s.roles.includes(t)}))||pe(!1),t.next=5,this.getAllRoleMembers();case 5:return n=t.sent,a=[],r.sort((function(t){return"admin"===t?1:-1})).forEach(function(){var t=_(G.mark((function t(r){var i,u,o,c;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e[r]||[],u=n[r]||[],o=i.filter((function(t){return!u.includes(t)})),c=u.filter((function(t){return!i.includes(t)})),o.length&&o.forEach((function(t){a.push(s.contract.interface.encodeFunctionData("grantRole",[Zt(r),t]))})),c.length&&c.forEach(function(){var t=_(G.mark((function t(e){var n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.getRevokeRoleFunctionName(e);case 2:n=t.sent,a.push(s.contract.interface.encodeFunctionData(n,[Zt(r),e]));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=10,this.sendTransaction("multicall",[a]);case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.revokeAllRolesFromAddress=function(){var t=_(G.mark((function t(e){var r,n,a,s=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAllRoleMembers();case 2:return r=t.sent,n=[],a=[],Object.keys(r).sort((function(t){return"admin"===t?1:-1})).forEach(function(){var t=_(G.mark((function t(i){var u,o;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==(u=r[i])||!u.includes(e)){t.next=6;break}return t.next=3,s.getRevokeRoleFunctionName(e);case 3:o=t.sent,n.push(s.contract.interface.encodeFunctionData(o,[Zt(i),e])),a.push(i);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=8,this.sendTransaction("multicall",[n]);case 8:return t.abrupt("return",a);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.grantRole=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.roles.includes(e)||pe(!1),t.next=3,this.sendTransaction("grantRole",[Zt(e),r]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.revokeRole=function(){var t=_(G.mark((function t(e,r){var n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.roles.includes(e)||pe(!1),t.next=3,this.getRevokeRoleFunctionName(r);case 3:return n=t.sent,t.next=6,this.sendTransaction(n,[Zt(e),r]);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.getRevokeRoleFunctionName=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSignerAddress();case 2:if(t.sent.toLowerCase()!==e.toLowerCase()){t.next=5;break}return t.abrupt("return","renounceRole");case 5:return t.abrupt("return","revokeRole");case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.prepareMetadata=function(){var t=_(G.mark((function t(e){var r,n=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!==typeof e){t.next=2;break}return t.abrupt("return",e);case 2:return r=function(){var t=_(G.mark((function t(e){var a,s,i,u;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=Object.keys(e),t.t0=G.keys(a);case 2:if((t.t1=t.t0()).done){t.next=18;break}if(s=t.t1.value,i=e[a[s]],!(u=i instanceof File||i instanceof P)){t.next=10;break}return t.next=9,n.sdk.getStorage().upload(e[a[s]]);case 9:e[a[s]]=t.sent;case 10:if(!u||"string"===typeof e[a[s]]){t.next=12;break}throw new Error("Upload to IPFS failed");case 12:if("object"!==typeof i){t.next=16;break}return t.next=15,r(e[a[s]]);case 15:e[a[s]]=t.sent;case 16:t.next=2;break;case 18:return t.abrupt("return",e);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.next=5,r(e);case 5:return e=t.sent,t.abrupt("return",JSON.stringify(e));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.prepareBatchMetadata=function(){var t=_(G.mark((function t(e){var r=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.map(function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.prepareMetadata(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onlyRoles=function(){var t=_(G.mark((function t(e,r){var n=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.map(function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getRoleMembers(e);case 2:if(t.sent.map((function(t){return t.toLowerCase()})).includes(r.toLowerCase())){t.next=5;break}throw new z(r,e);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),F(r,[{key:"roles",get:function(){return this.getModuleRoles()}}]),r}(de),le=function(){this.name="",this.description=void 0,this.image=void 0,this.externalLink=void 0};(0,A.__decorate)([(0,b.ep)("name",String)],le.prototype,"name",void 0),(0,A.__decorate)([(0,b.ep)("description",String,b.M_.IGNORE_NULLABLE)],le.prototype,"description",void 0),(0,A.__decorate)([(0,b.ep)("image",String,b.M_.IGNORE_NULLABLE)],le.prototype,"image",void 0),(0,A.__decorate)([(0,b.ep)("external_link",String,b.M_.IGNORE_NULLABLE)],le.prototype,"externalLink",void 0);var he=le=(0,A.__decorate)([(0,b.sT)("CommonModuleMetadata")],le),ve=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).sellerFeeBasisPoints=0,e.primarySaleFeeBasisPoints=0,e.feeRecipient=void 0,e.primarySaleRecipientAddress="",e}return B(e,t),e}(he);(0,A.__decorate)([(0,b.ep)("seller_fee_basis_points",Number,b.M_.IGNORE_NULLABLE)],ve.prototype,"sellerFeeBasisPoints",void 0),(0,A.__decorate)([(0,b.ep)("primary_sale_fee_basis_points",Number,b.M_.IGNORE_NULLABLE)],ve.prototype,"primarySaleFeeBasisPoints",void 0),(0,A.__decorate)([(0,b.ep)("fee_recipient",String,b.M_.IGNORE_NULLABLE)],ve.prototype,"feeRecipient",void 0),(0,A.__decorate)([(0,b.ep)("primary_sale_recipient_address",String)],ve.prototype,"primarySaleRecipientAddress",void 0),ve=(0,A.__decorate)([(0,b.sT)("BundleDropModuleMetadata")],ve);var me=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).sellerFeeBasisPoints=0,e.feeRecipient=void 0,e}return B(e,t),e}(he);(0,A.__decorate)([(0,b.ep)("seller_fee_basis_points",Number,b.M_.IGNORE_NULLABLE)],me.prototype,"sellerFeeBasisPoints",void 0),(0,A.__decorate)([(0,b.ep)("fee_recipient",String,b.M_.IGNORE_NULLABLE)],me.prototype,"feeRecipient",void 0),me=(0,A.__decorate)([(0,b.sT)("CollectionModuleMetadata")],me);var xe=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).symbol="",e}return B(e,t),e}(le);(0,A.__decorate)([(0,b.ep)("symbol",String)],xe.prototype,"symbol",void 0),xe=(0,A.__decorate)([(0,b.sT)("CurrencyModuleMetadata")],xe);var ye=function(t){function e(){return t.apply(this,arguments)||this}return B(e,t),e}(le);ye=(0,A.__decorate)([(0,b.sT)("DatastoreModuleMetadata")],ye);var ge=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).sellerFeeBasisPoints=0,e.primarySaleFeeBasisPoints=0,e.feeRecipient=void 0,e.symbol=void 0,e.maxSupply=1,e.primarySaleRecipientAddress="",e.baseTokenUri="",e}return B(e,t),e}(le);(0,A.__decorate)([(0,b.ep)("seller_fee_basis_points",Number,b.M_.IGNORE_NULLABLE)],ge.prototype,"sellerFeeBasisPoints",void 0),(0,A.__decorate)([(0,b.ep)("primary_sale_fee_basis_points",Number,b.M_.IGNORE_NULLABLE)],ge.prototype,"primarySaleFeeBasisPoints",void 0),(0,A.__decorate)([(0,b.ep)("fee_recipient",String,b.M_.IGNORE_NULLABLE)],ge.prototype,"feeRecipient",void 0),(0,A.__decorate)([(0,b.ep)("symbol",String,b.M_.IGNORE_NULLABLE)],ge.prototype,"symbol",void 0),(0,A.__decorate)([(0,b.ep)("max_supply",Number,b.M_.IGNORE_NULLABLE)],ge.prototype,"maxSupply",void 0),(0,A.__decorate)([(0,b.ep)("primary_sale_recipient_address",String)],ge.prototype,"primarySaleRecipientAddress",void 0),(0,A.__decorate)([(0,b.ep)("base_token_uri",String,b.M_.IGNORE_NULLABLE)],ge.prototype,"baseTokenUri",void 0),ge=(0,A.__decorate)([(0,b.sT)("DropModuleMetadata")],ge);var we=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).marketFeeBasisPoints=0,e}return B(e,t),e}(he);(0,A.__decorate)([(0,b.ep)("seller_fee_basis_points",Number,b.M_.IGNORE_NULLABLE)],we.prototype,"marketFeeBasisPoints",void 0),we=(0,A.__decorate)([(0,b.sT)("MarketModuleMetadata")],we);var ke=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).marketFeeBasisPoints=0,e}return B(e,t),e}(he);(0,A.__decorate)([(0,b.ep)("seller_fee_basis_points",Number,b.M_.IGNORE_NULLABLE)],ke.prototype,"marketFeeBasisPoints",void 0);var be=ke=(0,A.__decorate)([(0,b.sT)("MarketplaceModuleMetadata")],ke),Ce=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).sellerFeeBasisPoints=0,e.feeRecipient=void 0,e.symbol=void 0,e.defaultSaleRecipientAddress="",e.primarySaleFeeBasisPoints=0,e}return B(e,t),e}(he);(0,A.__decorate)([(0,b.ep)("seller_fee_basis_points",Number,b.M_.IGNORE_NULLABLE)],Ce.prototype,"sellerFeeBasisPoints",void 0),(0,A.__decorate)([(0,b.ep)("fee_recipient",String,b.M_.IGNORE_NULLABLE)],Ce.prototype,"feeRecipient",void 0),(0,A.__decorate)([(0,b.ep)("symbol",String,b.M_.IGNORE_NULLABLE)],Ce.prototype,"symbol",void 0),(0,A.__decorate)([(0,b.ep)("default_sale_recipient_address",String,b.M_.IGNORE_NULLABLE)],Ce.prototype,"defaultSaleRecipientAddress",void 0),(0,A.__decorate)([(0,b.ep)("sale_fee_basis_points",Number,b.M_.IGNORE_NULLABLE)],Ce.prototype,"primarySaleFeeBasisPoints",void 0),Ce=(0,A.__decorate)([(0,b.sT)("NftModuleMetadata")],Ce);var Te=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).sellerFeeBasisPoints=0,e.feeRecipient=void 0,e}return B(e,t),e}(he);(0,A.__decorate)([(0,b.ep)("seller_fee_basis_points",Number,b.M_.IGNORE_NULLABLE)],Te.prototype,"sellerFeeBasisPoints",void 0),(0,A.__decorate)([(0,b.ep)("fee_recipient",String,b.M_.IGNORE_NULLABLE)],Te.prototype,"feeRecipient",void 0),Te=(0,A.__decorate)([(0,b.sT)("PackModuleMetadata")],Te);var Se=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).recipientSplits=[],e}return B(e,t),e}(he);Se=(0,A.__decorate)([(0,b.sT)("SplitsModuleMetadata")],Se);var Ae=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).symbol="",e}return B(e,t),e}(he);(0,A.__decorate)([(0,b.ep)("symbol",String)],Ae.prototype,"symbol",void 0),Ae=(0,A.__decorate)([(0,b.sT)("TokenModuleMetadata")],Ae);var Oe,Me=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).proposalStartWaitTimeInSeconds=0,e.proposalVotingTimeInSeconds=0,e.votingDelay=0,e.votingPeriod=0,e.votingTokenAddress="",e.votingQuorumFraction=0,e.minimumNumberOfTokensNeededToPropose="0",e}return B(e,t),e}(he);(0,A.__decorate)([(0,b.ep)("proposal_start_time_in_seconds",Number)],Me.prototype,"proposalStartWaitTimeInSeconds",void 0),(0,A.__decorate)([(0,b.ep)("proposal_voting_time_in_seconds",Number)],Me.prototype,"proposalVotingTimeInSeconds",void 0),(0,A.__decorate)([(0,b.ep)("voting_delay",Number)],Me.prototype,"votingDelay",void 0),(0,A.__decorate)([(0,b.ep)("voting_period",Number)],Me.prototype,"votingPeriod",void 0),(0,A.__decorate)([(0,b.ep)("voting_token_address",String)],Me.prototype,"votingTokenAddress",void 0),(0,A.__decorate)([(0,b.ep)("voting_quorum_fraction",Number)],Me.prototype,"votingQuorumFraction",void 0),(0,A.__decorate)([(0,b.ep)("proposal_token_threshold",String)],Me.prototype,"minimumNumberOfTokensNeededToPropose",void 0),Me=(0,A.__decorate)([(0,b.sT)("VoteModuleMetadata")],Me);var Pe=((Oe={})[ft.Mainnet]={secondsBetweenBlocks:15,synced:!1},Oe[ft.Rinkeby]={secondsBetweenBlocks:15,synced:!1},Oe[ft.Polygon]={secondsBetweenBlocks:2.5,synced:!1},Oe[ft.Mumbai]={secondsBetweenBlocks:2.5,synced:!1},Oe[ft.Fantom]={secondsBetweenBlocks:1,synced:!1},Oe[ft.FantomTestnet]={secondsBetweenBlocks:1,synced:!1},Oe[ft.Avalanche]={secondsBetweenBlocks:1,synced:!1},Oe[ft.AvalancheFujiTestnet]={secondsBetweenBlocks:1,synced:!1},Oe[ft.Hardhat]={secondsBetweenBlocks:1,synced:!1},Oe);var Re=function(t){function e(){return t.apply(this,arguments)||this}B(e,t);var r=e.prototype;return r.getModuleRoles=function(){return e.roles},r.connectContract=function(){return u.jQ.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return e.moduleType},r.get=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ct(this.providerOrSigner,this.address);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getValue=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,St(this.providerOrSigner,this.address,l.O$.from(e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.totalSupply=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.totalSupply();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.balance=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.balanceOf.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.balanceOf=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.readOnlyContract.balanceOf(e);case 3:return t.t1=t.sent,t.next=6,t.t0.getValue.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.allowance=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.next=7,t.t0.allowanceOf.call(t.t0,t.t1,t.t2);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.allowanceOf=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.allowance(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.getVoteBalance=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.getVoteBalanceOf.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getVoteBalanceOf=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.getVotes(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getDelegation=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.getDelegationOf.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getDelegationOf=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.delegates(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.delegateTo=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("delegate",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.transfer=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isTransferRestricted();case 2:if(!t.sent){t.next=4;break}throw new at(this.address);case 4:return t.next=6,this.sendTransaction("transfer",[e,r]);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.setAllowance=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("approve",[e,r]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.mint=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.next=7,t.t0.mintTo.call(t.t0,t.t1,t.t2);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.mintTo=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("mint",[e,r]);case 2:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.mintBatchTo=function(){var t=_(G.mark((function t(e){var r,n,a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=[],n=j(e);!(a=n()).done;)s=a.value,r.push(this.contract.interface.encodeFunctionData("mint",[s.address,s.amount]));return t.next=4,this.sendTransaction("multicall",[r]);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAllHolderBalances=function(){var t=_(G.mark((function t(){var e,r,n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contract.queryFilter(this.contract.filters.Transfer());case 2:return e=t.sent,r=e.map((function(t){return t.args})),n={},r.forEach((function(t){var e=t.from,r=t.to,a=t.value;e!==o.d&&(e in n||(n[e]=l.O$.from(0)),n[e]=n[e].sub(a)),r!==o.d&&(r in n||(n[r]=l.O$.from(0)),n[r]=n[r].add(a))})),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.burn=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("burn",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.burnFrom=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("burnFrom",[e,r]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.transferFrom=function(){var t=_(G.mark((function t(e,r,n){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("transferFrom",[e,r,n]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.setModuleMetadata=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.getStorage().uploadMetadata(e);case 2:return r=t.sent,t.next=5,this.sendTransaction("setContractURI",[r]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.transferBatch=function(){var t=_(G.mark((function t(e){var r,n=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.map((function(t){return n.contract.interface.encodeFunctionData("transfer",[t.address,t.amount])})),t.next=3,this.sendTransaction("multicall",[r]);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.transferFromBatch=function(){var t=_(G.mark((function t(e){var r,n=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.map((function(t){return n.contract.interface.encodeFunctionData("transferFrom",[t.fromAddress,t.address,t.amount])})),t.next=3,this.sendTransaction("multicall",[r]);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.isTransferRestricted=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.readOnlyContract.transfersRestricted());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.setRestrictedTransfer=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=!1),t.t0=this,t.t1=["admin"],t.next=5,this.getSignerAddress();case 5:return t.t2=t.sent,t.next=8,t.t0.onlyRoles.call(t.t0,t.t1,t.t2);case 8:return t.next=10,this.sendTransaction("setRestrictedTransfer",[e]);case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(fe);Re.moduleType=Et.CURRENCY,Re.roles=[Gt,Wt,Ht,zt];var _e=function(t){function e(){return t.apply(this,arguments)||this}return B(e,t),e}(Re),Ee=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this)._shouldCheckVersion=!0,e._isV1=!1,e.jsonConvert=new b.Q9,e.moduleType=-1,e}B(e,t);var r=e.prototype;return r.getModuleRoles=function(){return _e.roles},r.connectContract=function(){return u.Pw.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return this.moduleType},r.getModuleAddress=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.getAllModulesOfType(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getNFTAddress=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getModuleAddress(Et.NFT));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getBundleAddress=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getModuleAddress(Et.BUNDLE));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getPackAddress=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getModuleAddress(Et.PACK));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getCurrencyAddress=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getModuleAddress(Et.CURRENCY));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getMarketAddress=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getModuleAddress(Et.MARKET));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getDropAddress=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getModuleAddress(Et.DROP));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getDatastoreAddress=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getModuleAddress(Et.DATASTORE));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getRoyaltyTreasury=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.getRoyaltyTreasury(e||o.d);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAllContractMetadata=function(){var t=_(G.mark((function t(e,r){var n,a=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=!0),t.next=3,Promise.all(e.map((function(t){return vt(a.providerOrSigner,t,a.ipfsGatewayUrl,r)})));case 3:return n=t.sent,t.abrupt("return",e.filter((function(t){return t})).map((function(t,e){return{address:t,metadata:n[e]}})));case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),r.getPackModules=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getPackAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.getAllContractMetadata.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent.map((function(t){return L({},t,{type:Et.PACK})})));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getNFTModules=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getNFTAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.getAllContractMetadata.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent.map((function(t){return L({},t,{type:Et.NFT})})));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getCollectionModules=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getBundleModules();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getBundleModules=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getBundleAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.getAllContractMetadata.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent.map((function(t){return L({},t,{type:Et.BUNDLE})})));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getCurrencyModules=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getCurrencyAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.getAllContractMetadata.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent.map((function(t){return L({},t,{type:Et.CURRENCY})})));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getDatastoreModules=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getDatastoreAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.getAllContractMetadata.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent.map((function(t){return L({},t,{type:Et.DATASTORE})})));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getMarketModules=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getMarketAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.getAllContractMetadata.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent.map((function(t){return L({},t,{type:Et.MARKET})})));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getDropModules=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getDropAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.getAllContractMetadata.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent.map((function(t){return L({},t,{type:Et.DROP})})));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getAllModuleMetadata=function(){var t=_(G.mark((function t(e,r){var n,a=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=!0),n=e||[Et.NFT,Et.BUNDLE,Et.PACK,Et.TOKEN,Et.MARKET,Et.DATASTORE,Et.DROP,Et.BUNDLE_DROP,Et.VOTE],t.next=4,Promise.all(n.map(function(){var t=_(G.mark((function t(e){var n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.getModuleAddress(e);case 2:return n=t.sent,t.next=5,a.getAllContractMetadata(n,r);case 5:return t.abrupt("return",t.sent.map((function(t){return L({},t,{type:e})})));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 4:return t.abrupt("return",t.sent.reduce((function(t,e){return t.concat(e)}),[]));case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),r.getForwarder=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.getForwarder();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.setForwarder=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contract.setForwarder(e);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setModuleMetadata=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.getStorage().uploadMetadata(e);case 2:return r=t.sent,t.next=5,this.sendTransaction("setContractURI",[r]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setRoyaltyTreasury=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("setRoyaltyTreasury",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setModuleRoyaltyTreasury=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("setModuleRoyaltyTreasury",[e,r]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.isValidRoyaltyRecipient=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.toLowerCase()!==this.address.toLowerCase()){t.next=2;break}return t.abrupt("return",!0);case 2:return r=this.sdk.getSplitsModule(e),t.prev=3,t.next=6,r.balanceOf(this.address);case 6:return t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t.catch(3),t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t,this,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),r.withdrawFunds=function(){var t=_(G.mark((function t(e,r){var n,a,s,i,o,c,p;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.readOnlyContract.provider,a=null,(s=Ot(r))&&(r=f.dE),t.next=6,Mt(n,r,this.address);case 6:if(i=t.sent,!l.O$.from(i.value).gt(0)){t.next=16;break}return t.next=11,this.isV1();case 11:if(!!t.sent&&!s){t.next=16;break}return t.next=15,this.sendTransaction("withdrawFunds",[e,r]);case 15:a=t.sent;case 16:return t.next=18,this.getRoyaltyTreasury();case 18:if((o=t.sent)===this.address){t.next=34;break}return t.next=22,Mt(n,r,o);case 22:if(c=t.sent,!l.O$.from(c.value).gt(0)){t.next=34;break}if(p=u.Ai.connect(o,this.getSigner()),!s){t.next=31;break}return t.next=28,this.sendContractTransaction(p,"distribute()",[]);case 28:a=t.sent,t.next=34;break;case 31:return t.next=33,this.sendContractTransaction(p,"distribute(address)",[r]);case 33:a=t.sent;case 34:if(a){t.next=36;break}throw new Error("no funds to withdraw");case 36:return t.abrupt("return",a);case 37:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r._prepareMetadata=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!==typeof e.image){t.next=2;break}return t.abrupt("return",Promise.resolve(e));case 2:if(void 0!==e.image){t.next=4;break}return t.abrupt("return",Promise.resolve(e));case 4:return t.t0=this.sdk.getStorage(),t.t1=e.image,t.t2=this.address,t.next=9,this.getSignerAddress();case 9:return t.t3=t.sent,t.next=12,t.t0.upload.call(t.t0,t.t1,t.t2,t.t3);case 12:return e.image=t.sent,t.abrupt("return",Promise.resolve(e));case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r._deployModule=function(){var t=_(G.mark((function t(e,r,n){var a,s,u,o,p,d;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.t1=["admin"],t.next=4,this.getSignerAddress();case 4:return t.t2=t.sent,t.next=7,t.t0.onlyRoles.call(t.t0,t.t1,t.t2);case 7:return t.next=9,this.sdk.getGasPrice();case 9:return s=t.sent,u=s?{gasPrice:c.parseUnits(s.toString(),"gwei")}:{},t.next=13,(a=new i.lV(n.abi,n.bytecode).connect(this.signer)).deploy.apply(a,r.concat([u]));case 13:return o=t.sent,t.next=16,o.deployed();case 16:return p=o.address,t.next=19,this.contract.addModule(p,e,u);case 19:return d=t.sent,t.next=22,d.wait();case 22:return t.abrupt("return",p);case 23:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.verifyMetadata=function(){var t=_(G.mark((function t(e){var r,n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.feeRecipient&&e.feeRecipient!==this.address,t.next=3,this.isValidRoyaltyRecipient(e.feeRecipient?e.feeRecipient:this.address);case 3:if(n=t.sent,!r||n){t.next=6;break}throw new Error("Invalid fee recipient, can only be the Project address or a Splits module address");case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.deployBundleModule=function(){var t=_(G.mark((function t(e){var r,n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.jsonConvert,t.next=3,this._prepareMetadata(e);case 3:return t.t1=t.sent,t.t2=me,r=t.t0.serializeObject.call(t.t0,t.t1,t.t2),t.next=8,this.verifyMetadata(e);case 8:return t.t3=this.sdk.getStorage(),t.t4=r,t.t5=this.address,t.next=13,this.getSignerAddress();case 13:return t.t6=t.sent,t.next=16,t.t3.uploadMetadata.call(t.t3,t.t4,t.t5,t.t6);case 16:return n=t.sent,t.t7=this,t.t8=Et.COLLECTION,t.t9=this.address,t.next=22,this.getForwarder();case 22:return t.t10=t.sent,t.t11=n,t.t12=l.O$.from(e.sellerFeeBasisPoints?e.sellerFeeBasisPoints:0),t.t13=[t.t9,t.t10,t.t11,t.t12],t.t14=u.Un,t.next=29,t.t7._deployModule.call(t.t7,t.t8,t.t13,t.t14);case 29:if(a=t.sent,!e.feeRecipient||e.feeRecipient===this.address){t.next=33;break}return t.next=33,this.setModuleRoyaltyTreasury(a,e.feeRecipient);case 33:return t.abrupt("return",this.sdk.getBundleModule(a));case 34:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.deploySplitsModule=function(){var t=_(G.mark((function t(e){var r,n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.jsonConvert,t.next=3,this._prepareMetadata(e);case 3:return t.t1=t.sent,t.t2=Se,r=t.t0.serializeObject.call(t.t0,t.t1,t.t2),t.t3=this.sdk.getStorage(),t.t4=r,t.t5=this.address,t.next=11,this.getSignerAddress();case 11:return t.t6=t.sent,t.next=14,t.t3.uploadMetadata.call(t.t3,t.t4,t.t5,t.t6);case 14:return n=t.sent,t.t7=this,t.t8=Et.SPLITS,t.t9=this.address,t.next=20,this.getForwarder();case 20:return t.t10=t.sent,t.t11=n,t.t12=e.recipientSplits.map((function(t){return t.address})),t.t13=e.recipientSplits.map((function(t){return t.shares})),t.t14=[t.t9,t.t10,t.t11,t.t12,t.t13],t.t15=u.Ai,t.next=28,t.t7._deployModule.call(t.t7,t.t8,t.t14,t.t15);case 28:return a=t.sent,t.abrupt("return",this.sdk.getSplitsModule(a));case 30:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.deployNftModule=function(){var t=_(G.mark((function t(e){var r,n,a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.jsonConvert,t.next=3,this._prepareMetadata(e);case 3:return t.t1=t.sent,t.t2=Ce,r=t.t0.serializeObject.call(t.t0,t.t1,t.t2),t.next=8,this.verifyMetadata(e);case 8:return t.t3=this.sdk.getStorage(),t.t4=r,t.t5=this.address,t.next=13,this.getSignerAddress();case 13:return t.t6=t.sent,t.next=16,t.t3.uploadMetadata.call(t.t3,t.t4,t.t5,t.t6);case 16:return n=t.sent,t.t7=_t,t.next=20,this.getChainID();case 20:return t.t8=t.sent,a=(0,t.t7)(t.t8).wrapped.address,t.t9=this,t.t10=Et.NFT,t.t11=e.name,t.t12=e.symbol?e.symbol:"",t.t13=n,t.t14=this.address,t.next=30,this.getForwarder();case 30:if(t.t15=t.sent,t.t16=a,!e.defaultSaleRecipientAddress){t.next=36;break}t.t17=e.defaultSaleRecipientAddress,t.next=39;break;case 36:return t.next=38,this.getSignerAddress();case 38:t.t17=t.sent;case 39:return t.t18=t.t17,t.t19=e.sellerFeeBasisPoints,t.t20=e.primarySaleFeeBasisPoints?e.primarySaleFeeBasisPoints:0,t.t21=[t.t11,t.t12,t.t13,t.t14,t.t15,t.t16,t.t18,t.t19,t.t20],t.t22=u.Mv,t.next=46,t.t9._deployModule.call(t.t9,t.t10,t.t21,t.t22);case 46:if(s=t.sent,!e.feeRecipient||e.feeRecipient===this.address){t.next=50;break}return t.next=50,this.setModuleRoyaltyTreasury(s,e.feeRecipient);case 50:return t.abrupt("return",this.sdk.getNFTModule(s));case 51:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.deployCurrencyModule=function(){var t=_(G.mark((function t(e){var r,n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.jsonConvert,t.next=3,this._prepareMetadata(e);case 3:return t.t1=t.sent,t.t2=xe,r=t.t0.serializeObject.call(t.t0,t.t1,t.t2),t.t3=this.sdk.getStorage(),t.t4=r,t.t5=this.address,t.next=11,this.getSignerAddress();case 11:return t.t6=t.sent,t.next=14,t.t3.uploadMetadata.call(t.t3,t.t4,t.t5,t.t6);case 14:return n=t.sent,t.t7=this,t.t8=Et.CURRENCY,t.t9=this.address,t.t10=e.name,t.t11=e.symbol?e.symbol:"",t.next=22,this.getForwarder();case 22:return t.t12=t.sent,t.t13=n,t.t14=[t.t9,t.t10,t.t11,t.t12,t.t13],t.t15=u.jQ,t.next=28,t.t7._deployModule.call(t.t7,t.t8,t.t14,t.t15);case 28:return a=t.sent,t.abrupt("return",this.sdk.getCurrencyModule(a));case 30:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.deployTokenModule=function(){var t=_(G.mark((function t(e){var r,n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.jsonConvert,t.next=3,this._prepareMetadata(e);case 3:return t.t1=t.sent,t.t2=xe,r=t.t0.serializeObject.call(t.t0,t.t1,t.t2),t.t3=this.sdk.getStorage(),t.t4=r,t.t5=this.address,t.next=11,this.getSignerAddress();case 11:return t.t6=t.sent,t.next=14,t.t3.uploadMetadata.call(t.t3,t.t4,t.t5,t.t6);case 14:return n=t.sent,t.t7=this,t.t8=Et.CURRENCY,t.t9=this.address,t.t10=e.name,t.t11=e.symbol?e.symbol:"",t.next=22,this.getForwarder();case 22:return t.t12=t.sent,t.t13=n,t.t14=[t.t9,t.t10,t.t11,t.t12,t.t13],t.t15=u.jQ,t.next=28,t.t7._deployModule.call(t.t7,t.t8,t.t14,t.t15);case 28:return a=t.sent,t.abrupt("return",this.sdk.getTokenModule(a));case 30:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.deployMarketModule=function(){var t=_(G.mark((function t(e){var r,n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.jsonConvert,t.next=3,this._prepareMetadata(e);case 3:return t.t1=t.sent,t.t2=we,r=t.t0.serializeObject.call(t.t0,t.t1,t.t2),t.t3=this.sdk.getStorage(),t.t4=r,t.t5=this.address,t.next=11,this.getSignerAddress();case 11:return t.t6=t.sent,t.next=14,t.t3.uploadMetadata.call(t.t3,t.t4,t.t5,t.t6);case 14:return n=t.sent,t.t7=this,t.t8=Et.MARKET,t.t9=this.address,t.next=20,this.getForwarder();case 20:return t.t10=t.sent,t.t11=n,t.t12=e.marketFeeBasisPoints?e.marketFeeBasisPoints:0,t.t13=[t.t9,t.t10,t.t11,t.t12],t.t14=u.Te,t.next=27,t.t7._deployModule.call(t.t7,t.t8,t.t13,t.t14);case 27:return a=t.sent,t.abrupt("return",this.sdk.getMarketModule(a));case 29:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.deployPackModule=function(){var t=_(G.mark((function t(e){var r,n,a,s,i,o,c,p,d;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.jsonConvert,t.next=3,this._prepareMetadata(e);case 3:return t.t1=t.sent,t.t2=Te,r=t.t0.serializeObject.call(t.t0,t.t1,t.t2),t.next=8,this.verifyMetadata(e);case 8:return t.t3=this.sdk.getStorage(),t.t4=r,t.t5=this.address,t.next=13,this.getSignerAddress();case 13:return t.t6=t.sent,t.next=16,t.t3.uploadMetadata.call(t.t3,t.t4,t.t5,t.t6);case 16:return n=t.sent,t.next=19,this.getChainID();case 19:return a=t.sent,s=Ft[a],i=s.vrfCoordinator,o=s.linkTokenAddress,c=s.keyHash,p=s.fees,t.t7=this,t.t8=Et.PACK,t.t9=this.address,t.t10=n,t.t11=i,t.t12=o,t.t13=c,t.t14=p,t.next=31,this.getForwarder();case 31:return t.t15=t.sent,t.t16=e.sellerFeeBasisPoints?e.sellerFeeBasisPoints:0,t.t17=[t.t9,t.t10,t.t11,t.t12,t.t13,t.t14,t.t15,t.t16],t.t18=u.KM,t.next=37,t.t7._deployModule.call(t.t7,t.t8,t.t17,t.t18);case 37:if(d=t.sent,!e.feeRecipient||e.feeRecipient===this.address){t.next=41;break}return t.next=41,this.setModuleRoyaltyTreasury(d,e.feeRecipient);case 41:return t.abrupt("return",this.sdk.getPackModule(d));case 42:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.deployDropModule=function(){var t=_(G.mark((function t(e){var r,n,a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return""!==e.primarySaleRecipientAddress&&(0,S.isAddress)(e.primarySaleRecipientAddress)||pe(!1),t.t0=this.jsonConvert,t.next=4,this._prepareMetadata(e);case 4:return t.t1=t.sent,t.t2=ge,r=t.t0.serializeObject.call(t.t0,t.t1,t.t2),t.next=9,this.verifyMetadata(e);case 9:return t.t3=this.sdk.getStorage(),t.t4=r,t.t5=this.address,t.next=14,this.getSignerAddress();case 14:return t.t6=t.sent,t.next=17,t.t3.uploadMetadata.call(t.t3,t.t4,t.t5,t.t6);case 17:return n=t.sent,t.t7=_t,t.next=21,this.getChainID();case 21:return t.t8=t.sent,a=(0,t.t7)(t.t8).wrapped.address,t.t9=this,t.t10=Et.DROP,t.t11=e.name,t.t12=e.symbol?e.symbol:"",t.t13=n,t.t14=this.address,t.next=31,this.getForwarder();case 31:return t.t15=t.sent,t.t16=a,t.t17=e.primarySaleRecipientAddress,t.t18=e.sellerFeeBasisPoints?e.sellerFeeBasisPoints:0,t.t19=e.primarySaleFeeBasisPoints?e.primarySaleFeeBasisPoints:0,t.t20=[t.t11,t.t12,t.t13,t.t14,t.t15,t.t16,t.t17,t.t18,t.t19],t.t21=u.KG,t.next=40,t.t9._deployModule.call(t.t9,t.t10,t.t20,t.t21);case 40:if(s=t.sent,!e.feeRecipient||e.feeRecipient===this.address){t.next=44;break}return t.next=44,this.setModuleRoyaltyTreasury(s,e.feeRecipient);case 44:return t.abrupt("return",this.sdk.getDropModule(s));case 45:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.deployBundleDropModule=function(){var t=_(G.mark((function t(e){var r,n,a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return""!==e.primarySaleRecipientAddress&&(0,S.isAddress)(e.primarySaleRecipientAddress)||pe(!1),t.next=3,this.verifyMetadata(e);case 3:return t.t0=this.jsonConvert,t.next=6,this._prepareMetadata(e);case 6:return t.t1=t.sent,t.t2=ge,r=t.t0.serializeObject.call(t.t0,t.t1,t.t2),t.t3=this.sdk.getStorage(),t.t4=r,t.t5=this.address,t.next=14,this.getSignerAddress();case 14:return t.t6=t.sent,t.next=17,t.t3.uploadMetadata.call(t.t3,t.t4,t.t5,t.t6);case 17:return n=t.sent,t.t7=_t,t.next=21,this.getChainID();case 21:return t.t8=t.sent,a=(0,t.t7)(t.t8).wrapped.address,t.t9=this,t.t10=Et.BUNDLE_DROP,t.t11=n,t.t12=this.address,t.next=29,this.getForwarder();case 29:return t.t13=t.sent,t.t14=a,t.t15=e.primarySaleRecipientAddress,t.t16=e.sellerFeeBasisPoints?e.sellerFeeBasisPoints:0,t.t17=e.primarySaleFeeBasisPoints?e.primarySaleFeeBasisPoints:0,t.t18=[t.t11,t.t12,t.t13,t.t14,t.t15,t.t16,t.t17],t.t19=u.Xy,t.next=38,t.t9._deployModule.call(t.t9,t.t10,t.t18,t.t19);case 38:if(s=t.sent,!e.feeRecipient||e.feeRecipient===this.address){t.next=42;break}return t.next=42,this.setModuleRoyaltyTreasury(s,e.feeRecipient);case 42:return t.abrupt("return",this.sdk.getBundleDropModule(s));case 43:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.deployDatastoreModule=function(){var t=_(G.mark((function t(e){var r,n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.jsonConvert,t.next=3,this._prepareMetadata(e);case 3:return t.t1=t.sent,t.t2=ye,r=t.t0.serializeObject.call(t.t0,t.t1,t.t2),t.t3=this.sdk.getStorage(),t.t4=r,t.t5=this.address,t.next=11,this.getSignerAddress();case 11:return t.t6=t.sent,t.next=14,t.t3.uploadMetadata.call(t.t3,t.t4,t.t5,t.t6);case 14:return n=t.sent,t.t7=this,t.t8=Et.DATASTORE,t.t9=this.address,t.next=20,this.getForwarder();case 20:return t.t10=t.sent,t.t11=n,t.t12=[t.t9,t.t10,t.t11],t.t13=u.S7,t.next=26,t.t7._deployModule.call(t.t7,t.t8,t.t12,t.t13);case 26:return a=t.sent,t.abrupt("return",this.sdk.getDatastoreModule(a));case 28:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.deployVoteModule=function(){var t=_(G.mark((function t(e){var r,n,a,s,i,o,c;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return""!==e.votingTokenAddress&&(0,S.isAddress)(e.votingTokenAddress)||pe(!1),e.votingQuorumFraction>=0&&e.votingQuorumFraction<=100||pe(!1),t.next=4,this.getChainID();case 4:return r=t.sent,n=Pe[r],a=e.proposalStartWaitTimeInSeconds/n.secondsBetweenBlocks,s=e.proposalVotingTimeInSeconds/n.secondsBetweenBlocks,e.votingDelay=a,e.votingPeriod=s,t.prev=10,t.next=13,u.jQ.connect(e.votingTokenAddress,this.readOnlyContract.provider).callStatic.getPastTotalSupply(0);case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(10),pe(!1);case 18:return t.t1=this.jsonConvert,t.next=21,this._prepareMetadata(e);case 21:return t.t2=t.sent,t.t3=Me,i=t.t1.serializeObject.call(t.t1,t.t2,t.t3),t.t4=this.sdk.getStorage(),t.t5=i,t.t6=this.address,t.next=29,this.getSignerAddress();case 29:return t.t7=t.sent,t.next=32,t.t4.uploadMetadata.call(t.t4,t.t5,t.t6,t.t7);case 32:return o=t.sent,t.t8=this,t.t9=Et.VOTE,t.t10=e.name,t.t11=e.votingTokenAddress,t.t12=l.O$.from(Math.ceil(e.votingDelay)),t.t13=l.O$.from(Math.ceil(e.votingPeriod)),t.t14=l.O$.from(e.minimumNumberOfTokensNeededToPropose),t.t15=e.votingQuorumFraction,t.next=43,this.getForwarder();case 43:return t.t16=t.sent,t.t17=o,t.t18=[t.t10,t.t11,t.t12,t.t13,t.t14,t.t15,t.t16,t.t17],t.t19=u.tz,t.next=49,t.t8._deployModule.call(t.t8,t.t9,t.t18,t.t19);case 49:return c=t.sent,t.abrupt("return",this.sdk.getVoteModule(c));case 51:case"end":return t.stop()}}),t,this,[[10,15]])})));return function(e){return t.apply(this,arguments)}}(),r.shouldUpgradeToV2=function(){var t=_(G.mark((function t(){var e;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}t.t0=this.hasValidSigner();case 5:if(!t.t0){t.next=23;break}return t.t1=this.readOnlyContract,t.t2=s.hexZeroPad([0],32),t.next=10,this.getSignerAddress();case 10:return t.t3=t.sent,t.next=13,t.t1.hasRole.call(t.t1,t.t2,t.t3);case 13:if(e=t.sent,t.t4=e,!t.t4){t.next=21;break}return t.next=18,this.getRoyaltyTreasury();case 18:t.t5=t.sent,t.t6=this.address,t.t4=t.t5===t.t6;case 21:if(!t.t4){t.next=23;break}return t.abrupt("return",!0);case 23:return t.abrupt("return",!1);case 24:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.shouldUpgradeModuleList=function(){var t=_(G.mark((function t(){var e,r=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(t.sent){t.next=4;break}return t.abrupt("return",[]);case 4:return t.next=6,this.getRoyaltyTreasury();case 6:if(t.t0=t.sent,t.t1=this.address,t.t0!==t.t1){t.next=10;break}return t.abrupt("return",[]);case 10:return t.next=12,this.getAllModuleMetadata([Et.NFT,Et.BUNDLE,Et.PACK,Et.DROP,Et.BUNDLE_DROP],!1);case 12:return e=t.sent,t.abrupt("return",e.filter((function(t){var e,n;return(null==(e=t.metadata)||null==(n=e.fee_recipient)?void 0:n.toLowerCase())===r.address.toLowerCase()})));case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.upgradeModuleList=function(){var t=_(G.mark((function t(e){var r,n,a,s,i,u,o,c,p,d=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=this.getSigner())||pe(!1),t.next=4,this.shouldUpgradeModuleList();case 4:return n=t.sent,a=n.filter((function(t){return e.includes(t.address)})),t.next=8,this.getRoyaltyTreasury();case 8:return s=t.sent,t.next=11,Promise.all(a.map((function(t){return d.sdk.getStorage().uploadMetadata(L({},t.metadata,{fee_recipient:s}))})));case 11:return i=t.sent,t.next=14,r.getTransactionCount("pending");case 14:return u=t.sent,o=i.map((function(t){return d.contract.interface.encodeFunctionData("setContractURI",[t])})),c=o.map((function(t,e){return{to:a[e].address,nonce:u+e,data:t}})),t.next=19,Promise.all(c.map((function(t){return r.sendTransaction(t)})));case 19:return p=t.sent,t.next=22,Promise.all(p.map((function(t){return t.wait()})));case 22:return t.abrupt("return",t.sent);case 23:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.upgradeToV2=function(){var t=_(G.mark((function t(e){var r,n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e={}),t.next=3,this.isV1UpgradedOrV2();case 3:if(!t.sent){t.next=5;break}return t.abrupt("return");case 5:if(r="",!e.splitsModuleAddress){t.next=10;break}r=e.splitsModuleAddress,t.next=22;break;case 10:if(e.splitsRecipients){t.next=16;break}return t.next=13,this.getSignerAddress();case 13:t.t0=t.sent,t.t1={address:t.t0,shares:100},e.splitsRecipients=[t.t1];case 16:return t.next=18,this.getMetadata();case 18:return n=t.sent.metadata,t.next=21,this.deploySplitsModule({name:(null==n?void 0:n.name)+" Treasury",recipientSplits:e.splitsRecipients});case 21:r=t.sent.address;case 22:return t.next=24,this.setRoyaltyTreasury(r);case 24:return t.abrupt("return",t.sent);case 25:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.balance=function(){var t=_(G.mark((function t(){var e,r,n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.provider.getBalance(this.address);case 2:return e=t.sent,r=l.O$.from(0),t.next=6,this.getRoyaltyTreasury();case 6:if((n=t.sent).toLowerCase()===this.address.toLowerCase()){t.next=11;break}return t.next=10,this.readOnlyContract.provider.getBalance(n);case 10:r=t.sent;case 11:return t.abrupt("return",e.add(r));case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.balanceOfToken=function(){var t=_(G.mark((function t(e){var r,n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=l.O$.from(0),!Ot(e)){t.next=7;break}return t.next=4,this.balance();case 4:r=t.sent,t.next=39;break;case 7:return n=u.BO.connect(e,this.readOnlyContract.provider),t.next=10,this.isV1();case 10:if(t.sent){t.next=23;break}return t.prev=11,t.t0=r,t.next=15,n.balanceOf(this.address);case 15:t.t1=t.sent,r=t.t0.add.call(t.t0,t.t1),t.next=23;break;case 19:throw t.prev=19,t.t2=t.catch(11),console.error(t.t2),new Error("invalid token address");case 23:return t.next=25,this.getRoyaltyTreasury();case 25:if((a=t.sent).toLowerCase()===this.address.toLowerCase()){t.next=39;break}return t.prev=27,t.t3=r,t.next=31,n.balanceOf(a);case 31:t.t4=t.sent,r=t.t3.add.call(t.t3,t.t4),t.next=39;break;case 35:throw t.prev=35,t.t5=t.catch(27),console.error(t.t5),new Error("invalid token address");case 39:return t.next=41,St(this.providerOrSigner,e,r);case 41:return t.abrupt("return",t.sent);case 42:case"end":return t.stop()}}),t,this,[[11,19],[27,35]])})));return function(e){return t.apply(this,arguments)}}(),r.isV1=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._shouldCheckVersion){t.next=11;break}return t.prev=1,t.next=4,this.readOnlyContract.callStatic.version();case 4:this._isV1=!1,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),this._isV1=!0;case 10:this._shouldCheckVersion=!1;case 11:return t.abrupt("return",this._isV1);case 12:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(){return t.apply(this,arguments)}}(),r.isV1UpgradedOrV2=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(t.t0=!t.sent,t.t0){t.next=7;break}return t.next=6,this.shouldUpgradeToV2();case 6:t.t0=!t.sent;case 7:return t.abrupt("return",t.t0);case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.deployMarketplaceModule=function(){var t=_(G.mark((function t(e){var r,n,a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.jsonConvert,t.next=3,this._prepareMetadata(e);case 3:return t.t1=t.sent,t.t2=be,r=t.t0.serializeObject.call(t.t0,t.t1,t.t2),t.t3=this.sdk.getStorage(),t.t4=r,t.t5=this.address,t.next=11,this.getSignerAddress();case 11:return t.t6=t.sent,t.next=14,t.t3.uploadMetadata.call(t.t3,t.t4,t.t5,t.t6);case 14:return n=t.sent,t.t7=_t,t.next=18,this.getChainID();case 18:return t.t8=t.sent,a=(0,t.t7)(t.t8).wrapped.address,t.t9=this,t.t10=Et.MARKETPLACE,t.t11=this.address,t.next=25,this.getForwarder();case 25:return t.t12=t.sent,t.t13=a,t.t14=n,t.t15=e.marketFeeBasisPoints,t.t16=[t.t11,t.t12,t.t13,t.t14,t.t15],t.t17=u.bG,t.next=33,t.t9._deployModule.call(t.t9,t.t10,t.t16,t.t17);case 33:return s=t.sent,t.abrupt("return",this.sdk.getMarketplaceModule(s));case 35:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(fe);Ee.roles=[Gt];var Fe,Le,Be,Ie,Ne,De=function(t){function e(){return t.apply(this,arguments)||this}B(e,t);var r=e.prototype;return r.getModuleRoles=function(){return e.roles},r.connectContract=function(){return u.Un.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return e.moduleType},r.get=function(){var t=_(G.mark((function t(e,r){var n,a,s,i,u;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=Promise,t.t1=Nt(this.readOnlyContract,e,this.ipfsGatewayUrl),t.t2=this.readOnlyContract.totalSupply(e).catch((function(){return l.O$.from("0")})),!r){t.next=9;break}return t.next=6,this.balanceOf(r,e);case 6:t.t3=t.sent.toNumber(),t.next=10;break;case 9:t.t3=0;case 10:return t.t4=t.t3,t.t5=this.readOnlyContract.tokenState(e),t.t6=[t.t1,t.t2,t.t4,t.t5],t.next=15,t.t0.all.call(t.t0,t.t6);case 15:return n=t.sent,a=n[0],s=n[1],i=n[2],u=n[3],t.abrupt("return",{creator:u.creator,supply:s,metadata:a,ownedByAddress:l.O$.from(i),underlyingType:u.underlyingType});case 21:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.getAll=function(){var t=_(G.mark((function t(e){var r,n=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.nextTokenId();case 2:return r=t.sent.toNumber(),t.next=5,Promise.all(Array.from(Array(r).keys()).map((function(t){return n.get(t.toString(),e)})));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.balanceOf=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.balanceOf(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.balance=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.readOnlyContract,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.next=7,t.t0.balanceOf.call(t.t0,t.t1,t.t2);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.isApproved=function(){var t=_(G.mark((function t(e,r,n,a){var s,i,o;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=4;break}return t.next=3,this.readOnlyContract.isApprovedForAll(e,r);case 3:return t.abrupt("return",t.sent);case 4:if(a){t.next=6;break}throw new Error("tokenId is required");case 6:return s=u.aC.connect(n,this.providerOrSigner),t.t0=s,t.next=10,this.getSignerAddress();case 10:return t.t1=t.sent,t.t2=this.address,t.next=14,t.t0.isApprovedForAll.call(t.t0,t.t1,t.t2);case 14:return i=t.sent,t.next=17,s.getApproved(a);case 17:return t.t3=t.sent.toLowerCase(),t.t4=this.address.toLowerCase(),o=t.t3===t.t4,t.abrupt("return",i||o);case 21:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),r.setApproval=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=!0),t.next=3,this.sendTransaction("setApprovalForAll",[e,r]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.transfer=function(){var t=_(G.mark((function t(e,r,n){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.t3={tokenId:r,amount:n},t.t4=[0],t.next=9,t.t0.transferFrom.call(t.t0,t.t1,t.t2,t.t3,t.t4);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.create=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.createBatch([e]);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.createBatch=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.map((function(t){return{metadata:t,supply:0}})),t.abrupt("return",this.createAndMintBatch(r));case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.createAndMint=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.createAndMintBatch([e]);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.createAndMintBatch=function(){var t=_(G.mark((function t(e){var r,n,a,s,i,u,o,c,p=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.map((function(t){return t.metadata})),t.next=3,this.sdk.getStorage().uploadMetadataBatch(r);case 3:return n=t.sent,a=n.metadataUris,s=e.map((function(t){return t.supply})),t.next=8,this.getSignerAddress();case 8:return i=t.sent,t.next=11,this.sendTransaction("createNativeTokens",[i,a,s,[0]]);case 11:return u=t.sent,o=this.parseEventLogs("NativeTokens",null==u?void 0:u.logs),c=null==o?void 0:o.tokenIds,t.next=16,Promise.all(c.map((function(t){return p.get(t.toString())})));case 16:return t.abrupt("return",t.sent);case 17:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.createWithToken=function(){var t=_(G.mark((function t(e,r,n){var a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.w6.connect(e,this.providerOrSigner),t.t0=a,t.next=4,this.getSignerAddress();case 4:return t.t1=t.sent,t.t2=this.address,t.next=8,t.t0.allowance.call(t.t0,t.t1,t.t2);case 8:if(!(t.sent<r)){t.next=12;break}return t.next=12,a.increaseAllowance(this.address,r);case 12:return t.next=14,this.sdk.getStorage().uploadMetadata(n.metadata);case 14:return s=t.sent,t.next=17,this.sendTransaction("wrapERC20",[e,r,n.supply,s]);case 17:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.createWithErc20=function(){var t=_(G.mark((function t(e,r,n){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.createWithToken(e,r,n));case 1:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.createWithNFT=function(){var t=_(G.mark((function t(e,r,n){var a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.aC.connect(e,this.providerOrSigner),t.t0=a,t.next=4,this.getSignerAddress();case 4:return t.t1=t.sent,t.t2=this.address,t.next=8,t.t0.isApprovedForAll.call(t.t0,t.t1,t.t2);case 8:if(t.sent){t.next=17;break}return t.next=11,a.getApproved(r);case 11:if(t.t3=t.sent.toLowerCase(),t.t4=this.address.toLowerCase(),t.t3===t.t4){t.next=17;break}return t.next=17,this.sendContractTransaction(a,"setApprovalForAll",[this.address]);case 17:return t.next=19,this.sdk.getStorage().uploadMetadata(n);case 19:return s=t.sent,t.next=22,this.sendTransaction("wrapERC721",[e,r,s]);case 22:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.unwrapNFT=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("redeemERC721",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.unwrapToken=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("redeemERC20",[e,r]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.createWithERC721=function(){var t=_(G.mark((function t(e,r,n){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.createWithNFT(e,r,n));case 1:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.mint=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.next=7,t.t0.mintTo.call(t.t0,t.t1,t.t2);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.mintTo=function(){var t=_(G.mark((function t(e,r,n){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=[0]),t.next=3,this.sendTransaction("mint",[e,r.tokenId,r.amount,n]);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.mintBatch=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.next=7,t.t0.mintBatchTo.call(t.t0,t.t1,t.t2);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.mintBatchTo=function(){var t=_(G.mark((function t(e,r,n){var a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=[0]),a=r.map((function(t){return t.tokenId})),s=r.map((function(t){return t.amount})),t.next=5,this.sendTransaction("mintBatch",[e,a,s,n]);case 5:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.burn=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.next=7,t.t0.burnFrom.call(t.t0,t.t1,t.t2);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.burnBatch=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.next=7,t.t0.burnBatchFrom.call(t.t0,t.t1,t.t2);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.burnFrom=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("burn",[e,r.tokenId,r.amount]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.burnBatchFrom=function(){var t=_(G.mark((function t(e,r){var n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.map((function(t){return t.tokenId})),a=r.map((function(t){return t.amount})),t.next=4,this.sendTransaction("burnBatch",[e,n,a]);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.transferFrom=function(){var t=_(G.mark((function t(e,r,n,a){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===a&&(a=[0]),t.next=3,this.sendTransaction("safeTransferFrom",[e,r,n.tokenId,n.amount,a]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),r.transferBatchFrom=function(){var t=_(G.mark((function t(e,r,n,a){var s,i;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===a&&(a=[0]),s=n.map((function(t){return t.tokenId})),i=n.map((function(t){return t.amount})),t.next=5,this.sendTransaction("safeBatchTransferFrom",[e,r,s,i,a]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),r.setRoyaltyBps=function(){var t=_(G.mark((function t(e){var r,n,a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:if(r=t.sent,n=r.metadata,a=[],n){t.next=7;break}throw new Error("No metadata found, this module might be invalid!");case 7:return n.seller_fee_basis_points=e,t.t0=this.sdk.getStorage(),t.t1=L({},n),t.t2=this.address,t.next=13,this.getSignerAddress();case 13:return t.t3=t.sent,t.next=16,t.t0.uploadMetadata.call(t.t0,t.t1,t.t2,t.t3);case 16:return s=t.sent,a.push(this.contract.interface.encodeFunctionData("setRoyaltyBps",[e])),a.push(this.contract.interface.encodeFunctionData("setContractURI",[s])),t.next=21,this.sendTransaction("multicall",[a]);case 21:return t.abrupt("return",t.sent);case 22:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setModuleMetadata=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.getStorage().uploadMetadata(e);case 2:return r=t.sent,t.next=5,this.sendTransaction("setContractURI",[r]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getOwned=function(){var t=_(G.mark((function t(e){var r,n,a,s,i=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=4;break}t.t0=e,t.next=7;break;case 4:return t.next=6,this.getSignerAddress();case 6:t.t0=t.sent;case 7:return r=t.t0,t.next=10,this.readOnlyContract.nextTokenId();case 10:return n=t.sent,t.next=13,this.readOnlyContract.balanceOfBatch(Array(n.toNumber()).fill(r),Array.from(Array(n.toNumber()).keys()));case 13:return a=t.sent,s=a.map((function(t,e){return{tokenId:e,balance:t}})).filter((function(t){return t.balance.gt(0)})),t.next=17,Promise.all(s.map(function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.get(e.tokenId.toString());case 2:return r=t.sent,t.abrupt("return",L({},r,{ownedByAddress:e.balance}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getRoyaltyBps=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.royaltyBps();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getRoyaltyRecipientAddress=function(){var t=_(G.mark((function t(){var e,r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:if(r=t.sent,void 0===(null==(e=r.metadata)?void 0:e.fee_recipient)){t.next=5;break}return t.abrupt("return",r.metadata.fee_recipient);case 5:return t.abrupt("return","");case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.isTransferRestricted=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.readOnlyContract.transfersRestricted());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.setRestrictedTransfer=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=!1),t.t0=this,t.t1=["admin"],t.next=5,this.getSignerAddress();case 5:return t.t2=t.sent,t.next=8,t.t0.onlyRoles.call(t.t0,t.t1,t.t2);case 8:return t.next=10,this.sendTransaction("setRestrictedTransfer",[e]);case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(fe);function Ue(t,e){if("object"===typeof t&&"object"===typeof e){var r=Object.keys(t).sort(),n=Object.keys(e).sort();if(r===n){for(var a=0;a<r.length;a++)if(!Ue(t[r[a]],e[n[a]]))return!1;return!0}}return t===e}De.moduleType=Et.BUNDLE,De.roles=[Gt,Wt,Ht,zt],function(t){t[t.Direct=0]="Direct",t[t.Auction=1]="Auction"}(Fe||(Fe={})),function(t){t[t.StartTime=0]="StartTime",t[t.LimitPerWallet=1]="LimitPerWallet",t[t.MerkleRoot=2]="MerkleRoot",t[t.WaitTimeBetweenClaims=3]="WaitTimeBetweenClaims"}(Le||(Le={})),function(t){t[t.Pending=0]="Pending",t[t.Active=1]="Active",t[t.Canceled=2]="Canceled",t[t.Defeated=3]="Defeated",t[t.Succeeded=4]="Succeeded",t[t.Queued=5]="Queued",t[t.Expired=6]="Expired",t[t.Executed=7]="Executed"}(Be||(Be={})),function(t){t[t.Against=0]="Against",t[t.For=1]="For",t[t.Abstain=2]="Abstain"}(Ie||(Ie={})),function(t){t.NotEnoughSupply="There is not enough supply to claim.",t.AddressNotAllowed="This address is not on the allowlist.",t.WaitBeforeNextClaimTransaction="Not enough time since last claim transaction. Please wait.",t.AlreadyClaimed="You have already claimed the token.",t.NotEnoughTokens="There are not enough tokens in the wallet to pay for the claim.",t.NoActiveClaimPhase="There is no active claim phase at the moment. Please check back in later."}(Ne||(Ne={}));var Ve=function(){function t(t){this._conditionStartTime=Math.floor(Date.now()/1e3),this._currencyAddress="",this._price=0,this._maxQuantity=l.O$.from(0),this._quantityLimitPerTransaction=f.Bz,this._merkleRootHash=(0,s.hexZeroPad)([0],32),this._merkleCondition=void 0,this._snapshot=void 0,this.createSnapshot=void 0,this._waitInSeconds=0,this.createSnapshot=t}var e=t.prototype;return e.setPrice=function(t,e){if(void 0===e&&(e=o.d),!(0,O.isAddress)(e))throw new H(e);return t>=0||pe(!1),this._price=t,this._currencyAddress=e,this},e.setConditionStartTime=function(t){return this._conditionStartTime="number"===typeof t?Math.floor(t):Math.floor(t.getTime()/1e3),this},e.setMaxQuantity=function(t){return this._maxQuantity=t,this},e.setMaxQuantityPerTransaction=function(t){var e=l.O$.from(t);return e.gte(1)||pe(!1),this._quantityLimitPerTransaction=e,this},e.setMerkleRoot=function(t){return this._merkleRootHash=t,this},e.setSnapshot=function(t){return this._snapshot=t,this},e.getSnapshot=function(){return this._merkleCondition},e.buildPublicClaimCondition=function(){var t=_(G.mark((function t(){var e;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._snapshot){t.next=4;break}return t.next=3,this.createSnapshot(this._snapshot);case 3:this._merkleCondition=t.sent;case 4:return t.abrupt("return",{startTimestamp:l.O$.from(this._conditionStartTime.toString()),pricePerToken:this._price,currency:this._currencyAddress||o.d,maxMintSupply:this._maxQuantity,waitTimeSecondsLimitPerTransaction:this._waitInSeconds,quantityLimitPerTransaction:this._quantityLimitPerTransaction,currentMintSupply:0,merkleRoot:null!=(e=this._merkleCondition)&&e.merkleRoot?this._merkleCondition.merkleRoot:this._merkleRootHash});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.setWaitTimeBetweenClaims=function(t){return this._waitInSeconds=t,this},t}(),$e=function(){function t(t){this.phases=[],this.createSnapshot=void 0,this.createSnapshot=t}var e=t.prototype;return e.buildConditions=function(){var t=_(G.mark((function t(){var e;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],t.next=3,Promise.all(this.phases.map((function(t){return t.buildPublicClaimCondition()}))).then((function(t){e=t.sort((function(t,e){return t.startTimestamp.eq(e.startTimestamp)?0:t.startTimestamp.gt(e.startTimestamp)?1:-1}))}));case 3:return t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.buildConditionsForDropV1=function(){var t=_(G.mark((function t(){var e,r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(this.phases.map((function(t){return t.buildPublicClaimCondition()})));case 2:return e=(e=t.sent).map((function(t){var e=Math.floor(Date.now()/1e3);return L({},t,{startTimestamp:t.startTimestamp.lt(e)?l.O$.from(0):t.startTimestamp.sub(e)})})),r=e.sort((function(t,e){return t.startTimestamp.eq(e.startTimestamp)?0:t.startTimestamp.gt(e.startTimestamp)?1:-1})),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.fromPublicClaimConditions=function(t){for(var e,r=[],n=j(t);!(e=n()).done;){var a=e.value,s=new Ve(this.createSnapshot);a.currency&&s.setPrice(a.pricePerToken,a.currency),a.maxMintSupply&&s.setMaxQuantity(a.maxMintSupply),s.setConditionStartTime(new Date(1e3*a.startTimestamp.toNumber())),r.push(s)}return this.phases=r,this},e.newClaimPhase=function(t){var e=t.startTime,r=t.maxQuantity,n=void 0===r?f.Bz:r,a=t.maxQuantityPerTransaction,s=void 0===a?f.Bz:a,i=new Ve(this.createSnapshot);return i.setConditionStartTime(e),i.setMaxQuantity(l.O$.from(n)),i.setMaxQuantityPerTransaction(l.O$.from(s)),this.phases.push(i),i},e.deleteClaimPhase=function(){var t=_(G.mark((function t(e){var r,n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e<0||e>=this.phases.length)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.buildConditions();case 4:r=t.sent,n=r.splice(e-1,1),this.fromPublicClaimConditions(n);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.removeClaimPhase=function(t){throw new et("deleteClaimPhase")},e.allSnapshots=function(){return this.phases.filter((function(t){return void 0!==t.getSnapshot()})).map((function(t){return t.getSnapshot()}))},t}(),je=function(){this.address="",this.proof=[]};(0,A.__decorate)([(0,b.ep)("address",String)],je.prototype,"address",void 0),(0,A.__decorate)([(0,b.ep)("proof",[String])],je.prototype,"proof",void 0),je=(0,A.__decorate)([(0,b.sT)("ClaimProof")],je);var qe=function(){this.merkleRoot="",this.claims=[]};(0,A.__decorate)([(0,b.ep)("merkleRoot",String)],qe.prototype,"merkleRoot",void 0),(0,A.__decorate)([(0,b.ep)("claims",[je])],qe.prototype,"claims",void 0),qe=(0,A.__decorate)([(0,b.sT)("Snapshot")],qe);var Ge=function(t){function e(){return t.apply(this,arguments)||this}B(e,t);var r=e.prototype;return r.getModuleRoles=function(){return e.roles},r.connectContract=function(){return u.Xy.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return e.moduleType},r.transformResultToClaimCondition=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,St(this.providerOrSigner,e.currency,e.pricePerToken);case 2:return r=t.sent,t.abrupt("return",{startTimestamp:new Date(1e3*l.O$.from(e.startTimestamp).toNumber()),maxMintSupply:e.maxClaimableSupply.toString(),currentMintSupply:e.supplyClaimed.toString(),availableSupply:l.O$.from(e.maxClaimableSupply).sub(e.supplyClaimed).toString(),quantityLimitPerTransaction:e.quantityLimitPerTransaction.toString(),waitTimeSecondsLimitPerTransaction:e.waitTimeInSecondsBetweenClaims.toString(),price:l.O$.from(e.pricePerToken),pricePerToken:l.O$.from(e.pricePerToken),currency:e.currency,currencyContract:e.currency,currencyMetadata:r,merkleRoot:e.merkleRoot});case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getTokenMetadata=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Nt(this.readOnlyContract,e,this.ipfsGatewayUrl);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.get=function(){var t=_(G.mark((function t(e){var r,n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.readOnlyContract.totalSupply(e).catch((function(){return l.O$.from(0)})),this.getTokenMetadata(e)]);case 2:return r=t.sent,n=r[0],a=r[1],t.abrupt("return",{supply:n,metadata:a});case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAll=function(){var t=_(G.mark((function t(){var e,r=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.nextTokenIdToMint();case 2:return e=t.sent.toNumber(),t.next=5,Promise.all(Array.from(Array(e).keys()).map((function(t){return r.get(t.toString())})));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getOwned=function(){var t=_(G.mark((function t(e){var r,n,a,s,i=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=4;break}t.t0=e,t.next=7;break;case 4:return t.next=6,this.getSignerAddress();case 6:t.t0=t.sent;case 7:return r=t.t0,t.next=10,this.readOnlyContract.nextTokenIdToMint();case 10:return n=t.sent,t.next=13,this.readOnlyContract.balanceOfBatch(Array(n.toNumber()).fill(r),Array.from(Array(n.toNumber()).keys()));case 13:return a=t.sent,s=a.map((function(t,e){return{tokenId:e,balance:t}})).filter((function(t){return t.balance.gt(0)})),t.next=17,Promise.all(s.map(function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.get(e.tokenId.toString());case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getActiveClaimCondition=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.getIndexOfActiveCondition(e);case 2:return r=t.sent,t.t0=this,t.next=6,this.readOnlyContract.getClaimConditionAtIndex(e,r);case 6:return t.t1=t.sent,t.abrupt("return",t.t0.transformResultToClaimCondition.call(t.t0,t.t1));case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAllClaimConditions=function(){var t=_(G.mark((function t(e){var r,n,a,s,i=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.claimConditions(e);case 2:r=t.sent,n=r.totalConditionCount.toNumber(),a=[],s=0;case 6:if(!(s<n)){t.next=15;break}return t.t0=a,t.next=10,this.readOnlyContract.getClaimConditionAtIndex(e,s);case 10:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 12:s++,t.next=6;break;case 15:return t.abrupt("return",Promise.all(a.map((function(t){return i.transformResultToClaimCondition(t)}))));case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getDefaultSaleRecipient=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.defaultSaleRecipient();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getSaleRecipient=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.saleRecipient(e);case 2:if((r=t.sent)!==o.d){t.next=5;break}return t.abrupt("return",this.readOnlyContract.defaultSaleRecipient());case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.balanceOf=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.balanceOf(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.balance=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.next=7,t.t0.balanceOf.call(t.t0,t.t1,t.t2);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.isApproved=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.isApprovedForAll(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.lazyMintBatch=function(){var t=_(G.mark((function t(e){var r,n=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.createBatch(e);case 2:return r=t.sent,t.next=5,Promise.all(r.map((function(t){return n.get(t.toString())})));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.createBatch=function(){var t=_(G.mark((function t(e){var r,n,a,s,i,u,o,c,p;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.nextTokenIdToMint();case 2:return r=t.sent,t.next=5,this.sdk.getStorage().uploadMetadataBatch(e,this.address,r.toNumber());case 5:return n=t.sent,a=n.baseUri,t.next=9,this.sendTransaction("lazyMint",[e.length,a]);case 9:for(s=t.sent,i=this.parseEventLogs("LazyMintedTokens",null==s?void 0:s.logs),u=i[0],o=i[1],c=[],p=u;p.lte(o);p=p.add(1))c.push(p.toString());return t.abrupt("return",c);case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setSaleRecipient=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.sendTransaction("setSaleRecipient",[e,r]));case 1:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.setDefaultSaleRecipient=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.sendTransaction("setDefaultSaleRecipient",[e]));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setApproval=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=!0),t.next=3,this.sendTransaction("setApprovalForAll",[e,r]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.transfer=function(){var t=_(G.mark((function t(e,r,n,a){var s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===a&&(a=[0]),t.next=3,this.getSignerAddress();case 3:return s=t.sent,t.next=6,this.sendTransaction("safeTransferFrom",[s,e,r,n,a]);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),r.setClaimCondition=function(){var t=_(G.mark((function t(e,r){var n,a,s,i,u,c,p,d,f,l,h;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.buildConditions();case 2:return n=t.sent.map((function(t){return{startTimestamp:t.startTimestamp,maxClaimableSupply:t.maxMintSupply,supplyClaimed:0,quantityLimitPerTransaction:t.quantityLimitPerTransaction,waitTimeInSecondsBetweenClaims:t.waitTimeSecondsLimitPerTransaction,pricePerToken:t.pricePerToken,currency:t.currency===o.d?kt:t.currency,merkleRoot:t.merkleRoot}})),a={},r.allSnapshots().forEach((function(t){a[t.merkleRoot]=t.snapshotUri})),t.next=7,this.getMetadata(!1);case 7:s=t.sent,(i=s.metadata)||pe(!1),u=i.merkle,c="merkle"in i?i.merkle:{};for(p=0,d=Object.keys(c);p<d.length;p++)f=d[p],a[f]=c[f];if(i.merkle=a,l=[],Ue(u,i.merkle)){t.next=20;break}return t.next=18,this.sdk.getStorage().upload(JSON.stringify(i));case 18:h=t.sent,l.push(this.contract.interface.encodeFunctionData("setContractURI",[h]));case 20:return l.push(this.contract.interface.encodeFunctionData("setClaimConditions",[e,n])),t.next=23,this.sendTransaction("multicall",[l]);case 23:return t.abrupt("return",t.sent);case 24:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.updateClaimConditions=function(){var t=_(G.mark((function t(e,r){var n,a,s,i,u,c,p,d,f,l,h;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.buildConditions();case 2:return n=t.sent.map((function(t){return{startTimestamp:t.startTimestamp,maxClaimableSupply:t.maxMintSupply,supplyClaimed:0,quantityLimitPerTransaction:t.quantityLimitPerTransaction,waitTimeInSecondsBetweenClaims:t.waitTimeSecondsLimitPerTransaction,pricePerToken:t.pricePerToken,currency:t.currency===o.d?kt:t.currency,merkleRoot:t.merkleRoot}})),a={},r.allSnapshots().forEach((function(t){a[t.merkleRoot]=t.snapshotUri})),t.next=7,this.getMetadata(!1);case 7:s=t.sent,(i=s.metadata)||pe(!1),u=i.merkle,c="merkle"in i?i.merkle:{};for(p=0,d=Object.keys(c);p<d.length;p++)f=d[p],a[f]=c[f];if(i.merkle=a,l=[],Ue(u,i.merkle)){t.next=20;break}return t.next=18,this.sdk.getStorage().upload(JSON.stringify(i));case 18:h=t.sent,l.push(this.contract.interface.encodeFunctionData("setContractURI",[h]));case 20:return l.push(this.contract.interface.encodeFunctionData("updateClaimConditions",[e,n])),t.next=23,this.sendTransaction("multicall",[l]);case 23:return t.abrupt("return",t.sent);case 24:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.getClaimConditionFactory=function(){var t=this.sdk.createSnapshot.bind(this.sdk);return new $e(t)},r.setPublicClaimConditions=function(){var t=_(G.mark((function t(e,r){var n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.map((function(t){return{startTimestamp:t.startTimestamp||0,maxClaimableSupply:t.maxClaimableSupply,supplyClaimed:0,quantityLimitPerTransaction:t.quantityLimitPerTransaction||t.maxClaimableSupply,waitTimeInSecondsBetweenClaims:t.waitTimeInSecondsBetweenClaims||0,pricePerToken:t.pricePerToken||0,currency:t.currency||o.d,merkleRoot:t.merkleRoot||(0,s.hexZeroPad)([0],32)}})),t.next=3,this.sendTransaction("setClaimConditions",[e,n]);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.prepareClaim=function(){var t=_(G.mark((function t(e,r,n){var a,i,c,p,d,f,h,v,m,x,y,g,w,k;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=[(0,s.hexZeroPad)([0],32)]),t.next=3,this.getActiveClaimCondition(e);case 3:return a=t.sent,t.next=6,this.getCallOverrides();case 6:if(t.t0=t.sent,t.t0){t.next=9;break}t.t0={};case 9:return i=t.t0,t.next=12,this.getSignerAddress();case 12:return c=t.sent,t.next=15,this.getMetadata();case 15:if(p=t.sent,d=p.metadata,a.merkleRoot.toString().startsWith(o.d)){t.next=27;break}return t.next=20,this.sdk.getStorage().get(null==d?void 0:d.merkle[a.merkleRoot.toString()]);case 20:if(f=t.sent,h=new b.Q9,v=h.deserializeObject(JSON.parse(f),qe),void 0!==(m=v.claims.find((function(t){return t.address.toLowerCase()===(null==c?void 0:c.toLowerCase())})))){t.next=26;break}throw new Error("No claim found for this address");case 26:n=m.proof;case 27:if(!a.pricePerToken.gt(0)){t.next=44;break}if(!Ot(a.currency)){t.next=32;break}i.value=l.O$.from(a.pricePerToken).mul(r),t.next=44;break;case 32:return x=u.w6.connect(a.currency,this.providerOrSigner),t.next=35,this.getSignerAddress();case 35:return y=t.sent,g=this.address,t.next=39,x.allowance(y,g);case 39:if(w=t.sent,k=l.O$.from(a.pricePerToken).mul(l.O$.from(r)),!w.lt(k)){t.next=44;break}return t.next=44,this.sendContractTransaction(x,"approve",[g,w.add(k)]);case 44:return t.abrupt("return",{overrides:i,proofs:n});case 45:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.claim=function(){var t=_(G.mark((function t(e,r,n){var a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=[(0,s.hexZeroPad)([0],32)]),t.next=3,this.prepareClaim(e,r,n);case 3:return a=t.sent,t.next=6,this.sendTransaction("claim",[e,r,a.proofs],a.overrides);case 6:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.claimTo=function(){var t=_(G.mark((function t(e,r,n,a){var i,u;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===a&&(a=[(0,s.hexZeroPad)([0],32)]),t.next=3,this.prepareClaim(e,r,a);case 3:return i=t.sent,(u=[]).push(this.contract.interface.encodeFunctionData("claim",[e,r,a])),t.t0=u,t.t1=this.contract.interface,t.next=10,this.getSignerAddress();case 10:return t.t2=t.sent,t.t3=n,t.t4=e,t.t5=r,t.t6=[0],t.t7=[t.t2,t.t3,t.t4,t.t5,t.t6],t.t8=t.t1.encodeFunctionData.call(t.t1,"safeTransferFrom",t.t7),t.t0.push.call(t.t0,t.t8),t.next=20,this.sendTransaction("multicall",[u],i.overrides);case 20:return t.abrupt("return",t.sent);case 21:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),r.burn=function(){var t=_(G.mark((function t(e,r){var n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSignerAddress();case 2:return n=t.sent,t.next=5,this.sendTransaction("burn",[n,e,r]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.transferFrom=function(){var t=_(G.mark((function t(e,r,n,a,s){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===s&&(s=[0]),t.next=3,this.sendTransaction("safeTransferFrom",[e,r,n,a,s]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a,s){return t.apply(this,arguments)}}(),r.setModuleMetadata=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.getStorage().uploadMetadata(e);case 2:return r=t.sent,t.next=5,this.sendTransaction("setContractURI",[r]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setRoyaltyBps=function(){var t=_(G.mark((function t(e){var r,n,a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:if(r=t.sent,n=r.metadata,a=[],n){t.next=7;break}throw new Error("No metadata found, this module might be invalid!");case 7:return n.seller_fee_basis_points=e,t.t0=this.sdk.getStorage(),t.t1=L({},n),t.t2=this.address,t.next=13,this.getSignerAddress();case 13:return t.t3=t.sent,t.next=16,t.t0.uploadMetadata.call(t.t0,t.t1,t.t2,t.t3);case 16:return s=t.sent,a.push(this.contract.interface.encodeFunctionData("setRoyaltyBps",[e])),a.push(this.contract.interface.encodeFunctionData("setContractURI",[s])),t.next=21,this.sendTransaction("multicall",[a]);case 21:return t.abrupt("return",t.sent);case 22:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getRoyaltyBps=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.royaltyBps();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getRoyaltyRecipientAddress=function(){var t=_(G.mark((function t(){var e,r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:if(r=t.sent,void 0===(null==(e=r.metadata)?void 0:e.fee_recipient)){t.next=5;break}return t.abrupt("return",r.metadata.fee_recipient);case 5:return t.abrupt("return","");case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getClaimConditionsFactory=function(){var t=this.sdk.createSnapshot.bind(this.sdk);return new $e(t)},r.totalSupply=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.totalSupply(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAllClaimerAddresses=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contract.queryFilter(this.contract.filters.ClaimedTokens(null,l.O$.from(e)));case 2:return r=t.sent,t.abrupt("return",Array.from(new Set(r.map((function(t){return t.args.claimer})))));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getClaimIneligibilityReasons=function(){var t=_(G.mark((function t(e,r,n){var a,i,o,c,p,d,f,h,v;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=[],void 0!==n){t.next=3;break}throw new Error("addressToCheck is required");case 3:return t.prev=3,t.next=6,Promise.all([this.readOnlyContract.getIndexOfActiveCondition(e),this.getActiveClaimCondition(e)]);case 6:c=t.sent,i=c[0],o=c[1],t.next=18;break;case 11:if(t.prev=11,t.t0=t.catch(3),!t.t0.message.includes("no public mint condition.")){t.next=16;break}return a.push(Ne.NoActiveClaimPhase),t.abrupt("return",a);case 16:throw console.error("Failed to get active claim condition",t.t0),new Error("Failed to get active claim condition");case 18:if(l.O$.from(o.availableSupply).lt(r)&&a.push(Ne.NotEnoughSupply),!(s.stripZeros(o.merkleRoot).length>0)){t.next=26;break}return p=o.merkleRoot.toString(),t.next=24,this.getClaimerProofs(p,n);case 24:0===t.sent.length&&m.keccak256(n).toLowerCase()!==p&&a.push(Ne.AddressNotAllowed);case 26:return t.next=28,this.readOnlyContract.getTimestampForNextValidClaim(e,i,n);case 28:if(d=t.sent,!l.O$.from(Date.now()).div(1e3).lt(d)){t.next=39;break}if(!l.O$.from(o.waitTimeSecondsLimitPerTransaction).eq(d)){t.next=38;break}return t.next=34,this.readOnlyContract.balanceOf(n,e);case 34:t.sent.gte(1)&&a.push(Ne.AlreadyClaimed),t.next=39;break;case 38:a.push(Ne.WaitBeforeNextClaimTransaction);case 39:if(!o.pricePerToken.gt(0)){t.next=58;break}if(f=o.pricePerToken.mul(r),!Ot(o.currency)){t.next=51;break}return t.next=44,this.getProvider();case 44:return h=t.sent,t.next=47,h.getBalance(n);case 47:t.sent.lt(f)&&a.push(Ne.NotEnoughTokens),t.next=58;break;case 51:return t.next=53,this.getProvider();case 53:return v=t.sent,t.next=56,u.w6.connect(o.currency,v).balanceOf(n);case 56:t.sent.lt(f)&&a.push(Ne.NotEnoughTokens);case 58:return t.abrupt("return",a);case 59:case"end":return t.stop()}}),t,this,[[3,11]])})));return function(e,r,n){return t.apply(this,arguments)}}(),r.canClaim=function(){var t=_(G.mark((function t(e,r,n){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=4;break}return t.next=3,this.getSignerAddress();case 3:n=t.sent;case 4:return t.next=6,this.getClaimIneligibilityReasons(e,r,n);case 6:return t.t0=t.sent.length,t.abrupt("return",0===t.t0);case 8:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.getClaimerProofs=function(){var t=_(G.mark((function t(e,r){var n,a,s,i,u,o;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=4;break}return t.next=3,this.getSignerAddress();case 3:r=t.sent;case 4:return t.next=6,this.getMetadata();case 6:return n=t.sent,a=n.metadata,t.next=10,this.sdk.getStorage().get(null==a?void 0:a.merkle[e]);case 10:if(s=t.sent,i=new b.Q9,u=i.deserializeObject(JSON.parse(s),qe),void 0!==(o=u.claims.find((function(t){var e;return t.address.toLowerCase()===(null==(e=r)?void 0:e.toLowerCase())})))){t.next=16;break}return t.abrupt("return",[]);case 16:return t.abrupt("return",o.proof);case 17:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.isTransferRestricted=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.readOnlyContract.transfersRestricted());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.setRestrictedTransfer=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=!1),t.t0=this,t.t1=["admin"],t.next=5,this.getSignerAddress();case 5:return t.t2=t.sent,t.next=8,t.t0.onlyRoles.call(t.t0,t.t1,t.t2);case 8:return t.next=10,this.sendTransaction("setRestrictedTransfer",[e]);case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(fe);Ge.moduleType=Et.BUNDLE_DROP,Ge.roles=[Gt,Wt,zt];var We=function(t){function e(){return t.apply(this,arguments)||this}B(e,t);var r=e.prototype;return r.getModuleRoles=function(){return e.roles},r.connectContract=function(){return u.S7.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return e.moduleType},r.getUint=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=d.id(e.toString()),t.next=3,this.readOnlyContract.getUint(r);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setUint=function(){var t=_(G.mark((function t(e,r){var n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=d.id(e.toString()),t.next=3,this.sendTransaction("setUint",[n,r]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e}(fe);We.moduleType=Et.DATASTORE,We.roles=[Gt,Kt];var He=100,ze=function(t){function e(e,r,n,a){var s;return(s=t.call(this,e,r,n,a)||this)._shouldCheckVersion=!0,s._isV1=!1,s.v1Module=void 0,s.v1Module=new Ke(e,r,n,a),s}B(e,t);var r=e.prototype;return r.setProviderOrSigner=function(e){var r;t.prototype.setProviderOrSigner.call(this,e),null==(r=this.v1Module)||r.setProviderOrSigner(e)},r.getModuleRoles=function(){return e.roles},r.connectContract=function(){return u.KG.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return e.moduleType},r.getTokenMetadata=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Nt(this.readOnlyContract,e,this.ipfsGatewayUrl);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.get=function(){var t=_(G.mark((function t(e){var r,n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.ownerOf(e).catch((function(){return o.d})),this.getTokenMetadata(e)]);case 2:return r=t.sent,n=r[0],a=r[1],t.abrupt("return",{owner:n,metadata:a});case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAll=function(){var t=_(G.mark((function t(e){var r,n,a,s=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(!t.sent){t.next=4;break}return t.abrupt("return",this.v1Module.getAll(e));case 4:return r=l.O$.from((null==e?void 0:e.start)||0).toNumber(),n=l.O$.from((null==e?void 0:e.count)||He).toNumber(),t.t0=Math,t.next=9,this.readOnlyContract.nextTokenIdToMint();case 9:return t.t1=t.sent.toNumber(),t.t2=r+n,a=t.t0.min.call(t.t0,t.t1,t.t2),t.next=14,Promise.all(Array.from(Array(a-r).keys()).map((function(t){return s.get((r+t).toString())})));case 14:return t.abrupt("return",t.sent);case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAllUnclaimed=function(){var t=_(G.mark((function t(e){var r,n,a,s,i=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(!t.sent){t.next=4;break}return t.abrupt("return",this.v1Module.getAllUnclaimed());case 4:return r=l.O$.from((null==e?void 0:e.start)||0).toNumber(),n=l.O$.from((null==e?void 0:e.count)||He).toNumber(),t.t0=l.O$,t.t1=Math,t.next=10,this.readOnlyContract.nextTokenIdToMint();case 10:return t.t2=t.sent.toNumber(),t.t3=r+n,t.t4=t.t1.min.call(t.t1,t.t2,t.t3),a=t.t0.from.call(t.t0,t.t4),t.next=16,this.readOnlyContract.nextTokenIdToClaim();case 16:return s=t.sent,t.next=19,Promise.all(Array.from(Array(a.sub(s).toNumber()).keys()).map((function(t){return i.getTokenMetadata(s.add(t).toString())})));case 19:return t.abrupt("return",t.sent.map((function(t){return{owner:o.d,metadata:t}})));case 20:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAllClaimed=function(){var t=_(G.mark((function t(e){var r,n,a,s=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(!t.sent){t.next=4;break}return t.abrupt("return",this.v1Module.getAllClaimed());case 4:return r=l.O$.from((null==e?void 0:e.start)||0).toNumber(),n=l.O$.from((null==e?void 0:e.count)||He).toNumber(),t.t0=Math,t.next=9,this.readOnlyContract.nextTokenIdToClaim();case 9:return t.t1=t.sent.toNumber(),t.t2=r+n,a=t.t0.min.call(t.t0,t.t1,t.t2),t.next=14,Promise.all(Array.from(Array(a).keys()).map((function(t){return s.get(t.toString())})));case 14:return t.abrupt("return",t.sent);case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.ownerOf=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.ownerOf(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getDefaultSaleRecipient=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.defaultSaleRecipient();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.setDefaultSaleRecipient=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("setDefaultSaleRecipient",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getOwned=function(){var t=_(G.mark((function t(e){var r,n,a,s,i=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=4;break}t.t0=e,t.next=7;break;case 4:return t.next=6,this.getSignerAddress();case 6:t.t0=t.sent;case 7:return r=t.t0,t.next=10,this.readOnlyContract.balanceOf(r);case 10:return n=t.sent,a=Array.from(Array(n.toNumber()).keys()),t.next=14,Promise.all(a.map((function(t){return i.readOnlyContract.tokenOfOwnerByIndex(r,t)})));case 14:return s=t.sent,t.next=17,Promise.all(s.map((function(t){return i.get(t.toString())})));case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.transformResultToMintCondition=function(t){return{startTimestamp:t.startTimestamp,maxMintSupply:t.maxClaimableSupply,currentMintSupply:t.supplyClaimed,quantityLimitPerTransaction:t.quantityLimitPerTransaction,waitTimeSecondsLimitPerTransaction:t.waitTimeInSecondsBetweenClaims,pricePerToken:t.pricePerToken,currency:t.currency,merkleRoot:t.merkleRoot}},r.transformResultToClaimCondition=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,St(this.providerOrSigner,e.currency,e.pricePerToken);case 2:return r=t.sent,t.abrupt("return",{startTimestamp:new Date(1e3*l.O$.from(e.startTimestamp).toNumber()),maxMintSupply:e.maxClaimableSupply.toString(),currentMintSupply:e.supplyClaimed.toString(),availableSupply:l.O$.from(e.maxClaimableSupply).sub(e.supplyClaimed).toString(),quantityLimitPerTransaction:e.quantityLimitPerTransaction.toString(),waitTimeSecondsLimitPerTransaction:e.waitTimeInSecondsBetweenClaims.toString(),price:l.O$.from(e.pricePerToken),pricePerToken:l.O$.from(e.pricePerToken),currency:e.currency,currencyContract:e.currency,currencyMetadata:r,merkleRoot:e.merkleRoot});case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getActiveMintCondition=function(){var t=_(G.mark((function t(){var e;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(!t.sent){t.next=4;break}return t.abrupt("return",this.v1Module.getActiveMintCondition());case 4:return t.next=6,this.readOnlyContract.getIndexOfActiveCondition();case 6:return e=t.sent,t.t0=this,t.next=10,this.readOnlyContract.getClaimConditionAtIndex(e);case 10:return t.t1=t.sent,t.abrupt("return",t.t0.transformResultToMintCondition.call(t.t0,t.t1));case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getActiveClaimCondition=function(){var t=_(G.mark((function t(){var e,r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(!t.sent){t.next=4;break}return t.abrupt("return",this.v1Module.getActiveClaimCondition());case 4:return t.next=6,this.readOnlyContract.getIndexOfActiveCondition();case 6:return e=t.sent,t.next=9,this.readOnlyContract.getClaimConditionAtIndex(e);case 9:return r=t.sent,t.next=12,this.transformResultToClaimCondition(r);case 12:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getAllMintConditions=function(){var t=_(G.mark((function t(){var e,r,n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(!t.sent){t.next=4;break}return t.abrupt("return",this.v1Module.getAllMintConditions());case 4:return t.next=6,this.readOnlyContract.claimConditions();case 6:e=t.sent,r=e.totalConditionCount.toNumber(),n=[],a=0;case 10:if(!(a<r)){t.next=21;break}return t.t0=n,t.t1=this,t.next=15,this.readOnlyContract.getClaimConditionAtIndex(a);case 15:t.t2=t.sent,t.t3=t.t1.transformResultToMintCondition.call(t.t1,t.t2),t.t0.push.call(t.t0,t.t3);case 18:a++,t.next=10;break;case 21:return t.abrupt("return",n);case 22:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getAllClaimConditions=function(){var t=_(G.mark((function t(){var e,r,n,a,s=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(!t.sent){t.next=4;break}return t.abrupt("return",this.v1Module.getAllClaimConditions());case 4:return t.next=6,this.readOnlyContract.claimConditions();case 6:e=t.sent,r=e.totalConditionCount.toNumber(),n=[],a=0;case 10:if(!(a<r)){t.next=19;break}return t.t0=n,t.next=14,this.readOnlyContract.getClaimConditionAtIndex(a);case 14:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 16:a++,t.next=10;break;case 19:return t.abrupt("return",Promise.all(n.map((function(t){return s.transformResultToClaimCondition(t)}))));case 20:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.totalSupply=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(!t.sent){t.next=4;break}return t.abrupt("return",this.v1Module.totalSupply());case 4:return t.next=6,this.readOnlyContract.nextTokenIdToMint();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.maxTotalSupply=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(!t.sent){t.next=4;break}return t.abrupt("return",this.v1Module.maxTotalSupply());case 4:return t.next=6,this.readOnlyContract.nextTokenIdToMint();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.totalUnclaimedSupply=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(!t.sent){t.next=4;break}return t.abrupt("return",this.v1Module.totalUnclaimedSupply());case 4:return t.next=6,this.readOnlyContract.nextTokenIdToMint();case 6:return t.t0=t.sent,t.next=9,this.totalClaimedSupply();case 9:return t.t1=t.sent,t.abrupt("return",t.t0.sub.call(t.t0,t.t1));case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.totalClaimedSupply=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(!t.sent){t.next=4;break}return t.abrupt("return",this.v1Module.totalClaimedSupply());case 4:return t.next=6,this.readOnlyContract.nextTokenIdToClaim();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.balanceOf=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.balanceOf(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.balance=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.balanceOf.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.isApproved=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.isApprovedForAll(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.setApproval=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=!0),t.next=3,this.sendTransaction("setApprovalForAll",[e,r]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.transfer=function(){var t=_(G.mark((function t(e,r){var n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSignerAddress();case 2:return n=t.sent,t.next=5,this.sendTransaction("safeTransferFrom(address,address,uint256)",[n,e,r]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.lazyMint=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(!t.sent){t.next=6;break}return t.next=5,this.v1Module.lazyMint(e);case 5:return t.abrupt("return");case 6:return t.next=8,this.lazyMintBatch([e]);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.lazyMintBatch=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(!t.sent){t.next=6;break}return t.next=5,this.v1Module.lazyMintBatch(e);case 5:return t.abrupt("return");case 6:return t.next=8,this.createBatch(e);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setMintConditions=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(!t.sent){t.next=4;break}return t.abrupt("return",this.v1Module.setMintConditions(e));case 4:return t.abrupt("return",this.setClaimConditions(e));case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setClaimConditions=function(){var t=_(G.mark((function t(e){var r,n,a,s,i,u,c;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(!t.sent){t.next=4;break}return t.abrupt("return",this.v1Module.setClaimConditions(e));case 4:return t.next=6,e.buildConditions();case 6:return r=t.sent.map((function(t){return{startTimestamp:t.startTimestamp,maxClaimableSupply:t.maxMintSupply,supplyClaimed:0,quantityLimitPerTransaction:t.quantityLimitPerTransaction,waitTimeInSecondsBetweenClaims:t.waitTimeSecondsLimitPerTransaction,pricePerToken:t.pricePerToken,currency:t.currency===o.d?kt:t.currency,merkleRoot:t.merkleRoot}})),n={},e.allSnapshots().forEach((function(t){n[t.merkleRoot]=t.snapshotUri})),t.next=11,this.getMetadata(!1);case 11:if(a=t.sent,(s=a.metadata)||pe(!1),i=s.merkle,0===e.allSnapshots().length&&"merkle"in s?s.merkle={}:s.merkle=n,u=[],Ue(i,s.merkle)){t.next=22;break}return t.next=20,this.sdk.getStorage().upload(JSON.stringify(s));case 20:c=t.sent,u.push(this.contract.interface.encodeFunctionData("setContractURI",[c]));case 22:return u.push(this.contract.interface.encodeFunctionData("setClaimConditions",[r])),t.next=25,this.sendTransaction("multicall",[u]);case 25:return t.abrupt("return",t.sent);case 26:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.updateClaimConditions=function(){var t=_(G.mark((function t(e){var r,n,a,s,i,u,c;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(!t.sent){t.next=4;break}return t.abrupt("return",this.v1Module.setClaimConditions(e));case 4:return t.next=6,e.buildConditions();case 6:return r=t.sent.map((function(t){return{startTimestamp:t.startTimestamp,maxClaimableSupply:t.maxMintSupply,supplyClaimed:0,quantityLimitPerTransaction:t.quantityLimitPerTransaction,waitTimeInSecondsBetweenClaims:t.waitTimeSecondsLimitPerTransaction,pricePerToken:t.pricePerToken,currency:t.currency===o.d?kt:t.currency,merkleRoot:t.merkleRoot}})),n={},e.allSnapshots().forEach((function(t){n[t.merkleRoot]=t.snapshotUri})),a=[],t.next=12,this.getMetadata(!1);case 12:if(s=t.sent,(i=s.metadata)||pe(!1),u=i.merkle,0===e.allSnapshots().length&&"merkle"in i?i.merkle={}:i.merkle=n,Ue(u,i.merkle)){t.next=22;break}return t.next=20,this.sdk.getStorage().upload(JSON.stringify(i));case 20:c=t.sent,a.push(this.contract.interface.encodeFunctionData("setContractURI",[c]));case 22:return a.push(this.contract.interface.encodeFunctionData("updateClaimConditions",[r])),t.next=25,this.sendTransaction("multicall",[a]);case 25:return t.abrupt("return",t.sent);case 26:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getClaimConditionsFactory=function(){var t=this.sdk.createSnapshot.bind(this.sdk);return new $e(t)},r.getMintConditionsFactory=function(){return this.getClaimConditionsFactory()},r.setPublicMintConditions=function(){var t=_(G.mark((function t(e){var r,n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(!t.sent){t.next=4;break}return t.abrupt("return",this.v1Module.setPublicMintConditions(e));case 4:return r=l.O$.from(Date.now()).div(1e3),n=e.map((function(t){return{startTimestamp:r.add(t.startTimestampInSeconds||0),maxClaimableSupply:t.maxMintSupply,supplyClaimed:0,quantityLimitPerTransaction:t.quantityLimitPerTransaction||t.maxMintSupply,waitTimeInSecondsBetweenClaims:t.waitTimeSecondsLimitPerTransaction||0,pricePerToken:t.pricePerToken||0,currency:t.currency||o.d,merkleRoot:t.merkleRoot||(0,s.hexZeroPad)([0],32)}})),t.next=8,this.sendTransaction("setClaimConditions",[n]);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getClaimIneligibilityReasons=function(){var t=_(G.mark((function t(e,r){var n,a,i,o,c,p,d,f,h;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],void 0!==r){t.next=3;break}throw new Error("addressToCheck is required");case 3:return t.prev=3,t.next=6,Promise.all([this.readOnlyContract.getIndexOfActiveCondition(),this.getActiveClaimCondition()]);case 6:o=t.sent,a=o[0],i=o[1],t.next=18;break;case 11:if(t.prev=11,t.t0=t.catch(3),!t.t0.message.includes("no public mint condition.")){t.next=16;break}return n.push(Ne.NoActiveClaimPhase),t.abrupt("return",n);case 16:throw console.error("Failed to get active claim condition",t.t0),new Error("Failed to get active claim condition");case 18:if(l.O$.from(i.availableSupply).lt(e)&&n.push(Ne.NotEnoughSupply),!(s.stripZeros(i.merkleRoot).length>0)){t.next=26;break}return c=i.merkleRoot.toString(),t.next=24,this.getClaimerProofs(c,r);case 24:0===t.sent.length&&m.keccak256(r).toLowerCase()!==c&&n.push(Ne.AddressNotAllowed);case 26:return t.next=28,this.readOnlyContract.getTimestampForNextValidClaim(a,r);case 28:if(p=t.sent,!l.O$.from(Date.now()).div(1e3).lt(p)){t.next=39;break}if(!l.O$.from(i.waitTimeSecondsLimitPerTransaction).eq(p)){t.next=38;break}return t.next=34,this.readOnlyContract.balanceOf(r);case 34:t.sent.gte(1)&&n.push(Ne.AlreadyClaimed),t.next=39;break;case 38:n.push(Ne.WaitBeforeNextClaimTransaction);case 39:if(!i.pricePerToken.gt(0)){t.next=58;break}if(d=i.pricePerToken.mul(e),!Ot(i.currency)){t.next=51;break}return t.next=44,this.getProvider();case 44:return f=t.sent,t.next=47,f.getBalance(r);case 47:t.sent.lt(d)&&n.push(Ne.NotEnoughTokens),t.next=58;break;case 51:return t.next=53,this.getProvider();case 53:return h=t.sent,t.next=56,u.w6.connect(i.currency,h).balanceOf(r);case 56:t.sent.lt(d)&&n.push(Ne.NotEnoughTokens);case 58:return t.abrupt("return",n);case 59:case"end":return t.stop()}}),t,this,[[3,11]])})));return function(e,r){return t.apply(this,arguments)}}(),r.canClaim=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==r){t.next=4;break}return t.next=3,this.getSignerAddress();case 3:r=t.sent;case 4:return t.next=6,this.isV1();case 6:if(!t.sent){t.next=8;break}return t.abrupt("return",this.v1Module.canClaim(e,[]));case 8:return t.next=10,this.getClaimIneligibilityReasons(e,r);case 10:return t.t0=t.sent.length,t.abrupt("return",0===t.t0);case 12:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.prepareClaim=function(){var t=_(G.mark((function t(e,r){var n,a,i,c,p,d,f,h,v,m,x,y,g,w;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=[(0,s.hexZeroPad)([0],32)]),t.next=3,this.getActiveClaimCondition();case 3:return n=t.sent,t.next=6,this.getMetadata();case 6:return a=t.sent,i=a.metadata,t.next=10,this.getSignerAddress();case 10:if(c=t.sent,n.merkleRoot.toString().startsWith(o.d)){t.next=21;break}return t.next=14,this.sdk.getStorage().get(null==i?void 0:i.merkle[n.merkleRoot.toString()]);case 14:if(p=t.sent,d=new b.Q9,f=d.deserializeObject(JSON.parse(p),qe),void 0!==(h=f.claims.find((function(t){return t.address.toLowerCase()===c.toLowerCase()})))){t.next=20;break}throw new Error("No claim found for this address");case 20:r=h.proof;case 21:return t.next=23,this.getCallOverrides();case 23:if(t.t0=t.sent,t.t0){t.next=26;break}t.t0={};case 26:if(v=t.t0,!n.pricePerToken.gt(0)){t.next=44;break}if(!Ot(n.currency)){t.next=32;break}v.value=l.O$.from(n.pricePerToken).mul(e),t.next=44;break;case 32:return m=u.w6.connect(n.currency,this.providerOrSigner),t.next=35,this.getSignerAddress();case 35:return x=t.sent,y=this.address,t.next=39,m.allowance(x,y);case 39:if(g=t.sent,w=l.O$.from(n.pricePerToken).mul(l.O$.from(e)),!g.lt(w)){t.next=44;break}return t.next=44,this.sendContractTransaction(m,"approve",[y,g.add(w)]);case 44:return t.abrupt("return",{overrides:v,proofs:r});case 45:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.claimTo=function(){var t=_(G.mark((function t(e,r,n){var a,i;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=[(0,s.hexZeroPad)([0],32)]),t.next=3,this.prepareClaim(e,n);case 3:return a=t.sent,(i=[]).push(this.contract.interface.encodeFunctionData("claim",[e,a.proofs])),t.t0=i,t.t1=this.contract.interface,t.next=10,this.getSignerAddress();case 10:return t.t2=t.sent,t.t3=r,t.next=14,this.readOnlyContract.nextTokenIdToMint();case 14:return t.t4=t.sent.sub(1),t.t5=[t.t2,t.t3,t.t4],t.t6=t.t1.encodeFunctionData.call(t.t1,"transferFrom",t.t5),t.t0.push.call(t.t0,t.t6),t.next=20,this.sendTransaction("multicall",[i],a.overrides);case 20:return t.abrupt("return",t.sent);case 21:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.claim=function(){var t=_(G.mark((function t(e,r){var n,a,i,u,o,c,p,d=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=[(0,s.hexZeroPad)([0],32)]),t.next=3,this.isV1();case 3:if(!t.sent){t.next=5;break}return t.abrupt("return",this.v1Module.claim(e,r));case 5:return t.next=7,this.prepareClaim(e,r);case 7:return n=t.sent,t.next=10,this.sendTransaction("claim",[e,n.proofs],n.overrides);case 10:for(a=t.sent,i=this.parseEventLogs("ClaimedTokens",null==a?void 0:a.logs),u=i.startTokenId,o=u.add(e),c=[],p=u;p.lt(o);p=p.add(1))c.push(l.O$.from(p.toString()));return t.next=18,Promise.all(c.map(function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.get(e.toString());case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 18:return t.abrupt("return",t.sent);case 19:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.burn=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("burn",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.transferFrom=function(){var t=_(G.mark((function t(e,r,n){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("transferFrom",[e,r,n]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.setModuleMetadata=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.getStorage().uploadMetadata(e);case 2:return r=t.sent,t.next=5,this.sendTransaction("setContractURI",[r]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setRoyaltyBps=function(){var t=_(G.mark((function t(e){var r,n,a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:if(r=t.sent,n=r.metadata,a=[],n){t.next=7;break}throw new Error("No metadata found, this module might be invalid!");case 7:return n.seller_fee_basis_points=e,t.t0=this.sdk.getStorage(),t.t1=L({},n),t.t2=this.address,t.next=13,this.getSignerAddress();case 13:return t.t3=t.sent,t.next=16,t.t0.uploadMetadata.call(t.t0,t.t1,t.t2,t.t3);case 16:return s=t.sent,a.push(this.contract.interface.encodeFunctionData("setRoyaltyBps",[e])),a.push(this.contract.interface.encodeFunctionData("setContractURI",[s])),t.next=21,this.sendTransaction("multicall",[a]);case 21:return t.abrupt("return",t.sent);case 22:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getRoyaltyBps=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.royaltyBps();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getRoyaltyRecipientAddress=function(){var t=_(G.mark((function t(){var e,r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:if(r=t.sent,void 0===(null==(e=r.metadata)?void 0:e.fee_recipient)){t.next=5;break}return t.abrupt("return",r.metadata.fee_recipient);case 5:return t.abrupt("return","");case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.createBatch=function(){var t=_(G.mark((function t(e){var r,n,a,s,i,u,o,c,p;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(!t.sent){t.next=4;break}return t.abrupt("return",this.v1Module.createBatch(e));case 4:return t.next=6,this.readOnlyContract.nextTokenIdToMint();case 6:return r=t.sent,t.next=9,this.sdk.getStorage().uploadMetadataBatch(e,this.address,r.toNumber());case 9:return n=t.sent,a=n.baseUri,t.next=13,this.sendTransaction("lazyMint",[e.length,a]);case 13:for(s=t.sent,i=this.parseEventLogs("LazyMintedTokens",null==s?void 0:s.logs),u=i[0],o=i[1],c=[],p=u;p.lte(o);p=p.add(1))c.push(p.toString());return t.abrupt("return",c);case 19:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.canCreateBatch=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(!t.sent){t.next=4;break}return t.abrupt("return",this.v1Module.canCreateBatch());case 4:return t.abrupt("return",!0);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.isV1=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._shouldCheckVersion){t.next=11;break}return t.prev=1,t.next=4,this.readOnlyContract.nextTokenIdToMint();case 4:this._isV1=!1,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),this._isV1=!0;case 10:this._shouldCheckVersion=!1;case 11:return t.abrupt("return",this._isV1);case 12:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(){return t.apply(this,arguments)}}(),r.getClaimerProofs=function(){var t=_(G.mark((function t(e,r){var n,a,s,i,u,o;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=4;break}return t.next=3,this.getSignerAddress();case 3:r=t.sent;case 4:return t.next=6,this.getMetadata();case 6:return n=t.sent,a=n.metadata,t.next=10,this.sdk.getStorage().get(null==a?void 0:a.merkle[e]);case 10:if(s=t.sent,i=new b.Q9,u=i.deserializeObject(JSON.parse(s),qe),void 0!==(o=u.claims.find((function(t){var e;return t.address.toLowerCase()===(null==(e=r)?void 0:e.toLowerCase())})))){t.next=16;break}return t.abrupt("return",[]);case 16:return t.abrupt("return",o.proof);case 17:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.isTransferRestricted=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.readOnlyContract.transfersRestricted());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.setRestrictedTransfer=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=!1),t.t0=this,t.t1=["admin"],t.next=5,this.getSignerAddress();case 5:return t.t2=t.sent,t.next=8,t.t0.onlyRoles.call(t.t0,t.t1,t.t2);case 8:return t.next=10,this.sendTransaction("setRestrictedTransfer",[e]);case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(fe);ze.moduleType=Et.DROP,ze.roles=[Gt,Wt,zt];var Ke=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).storage=e.sdk.getStorage(),e}B(e,t);var r=e.prototype;return r.getModuleRoles=function(){return ze.roles},r.connectContract=function(){return u.Ct.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return ze.moduleType},r.getTokenMetadata=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Nt(this.readOnlyContract,e,this.ipfsGatewayUrl);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.get=function(){var t=_(G.mark((function t(e){var r,n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.ownerOf(e).catch((function(){return o.d})),this.getTokenMetadata(e)]);case 2:return r=t.sent,n=r[0],a=r[1],t.abrupt("return",{owner:n,metadata:a});case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAll=function(){var t=_(G.mark((function t(e){var r,n,a,s=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.O$.from((null==e?void 0:e.start)||0).toNumber(),n=l.O$.from((null==e?void 0:e.count)||He).toNumber(),t.t0=Math,t.next=5,this.readOnlyContract.nextTokenId();case 5:return t.t1=t.sent.toNumber(),t.t2=r+n,a=t.t0.min.call(t.t0,t.t1,t.t2),t.next=10,Promise.all(Array.from(Array(a-r).keys()).map((function(t){return s.get((r+t).toString())})));case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAllUnclaimed=function(){var t=_(G.mark((function t(e){var r,n,a,s,i=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.O$.from((null==e?void 0:e.start)||0).toNumber(),n=l.O$.from((null==e?void 0:e.count)||He).toNumber(),t.t0=l.O$,t.t1=Math,t.next=6,this.readOnlyContract.nextTokenId();case 6:return t.t2=t.sent.toNumber(),t.t3=r+n,t.t4=t.t1.min.call(t.t1,t.t2,t.t3),a=t.t0.from.call(t.t0,t.t4),t.next=12,this.readOnlyContract.nextMintTokenId();case 12:return s=t.sent,t.next=15,Promise.all(Array.from(Array(a.sub(s).toNumber()).keys()).map((function(t){return i.getTokenMetadata(s.add(t).toString())})));case 15:return t.abrupt("return",t.sent.map((function(t){return{owner:o.d,metadata:t}})));case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAllClaimed=function(){var t=_(G.mark((function t(e){var r,n,a,s=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.O$.from((null==e?void 0:e.start)||0).toNumber(),n=l.O$.from((null==e?void 0:e.count)||He).toNumber(),t.t0=Math,t.next=5,this.readOnlyContract.nextMintTokenId();case 5:return t.t1=t.sent.toNumber(),t.t2=r+n,a=t.t0.min.call(t.t0,t.t1,t.t2),t.next=10,Promise.all(Array.from(Array(a).keys()).map((function(t){return s.get(t.toString())})));case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.ownerOf=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.ownerOf(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getOwned=function(){var t=_(G.mark((function t(e){var r,n,a,s,i=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=4;break}t.t0=e,t.next=7;break;case 4:return t.next=6,this.getSignerAddress();case 6:t.t0=t.sent;case 7:return r=t.t0,t.next=10,this.readOnlyContract.balanceOf(r);case 10:return n=t.sent,a=Array.from(Array(n.toNumber()).keys()),t.next=14,Promise.all(a.map((function(t){return i.readOnlyContract.tokenOfOwnerByIndex(r,t)})));case 14:return s=t.sent,t.next=17,Promise.all(s.map((function(t){return i.get(t.toString())})));case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.transformResultToClaimCondition=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,St(this.providerOrSigner,e.currency,e.pricePerToken);case 2:return r=t.sent,t.abrupt("return",{startTimestamp:new Date(1e3*l.O$.from(e.startTimestamp).toNumber()),maxMintSupply:e.maxMintSupply.toString(),currentMintSupply:e.currentMintSupply.toString(),availableSupply:l.O$.from(e.maxMintSupply).sub(e.currentMintSupply).toString(),quantityLimitPerTransaction:e.quantityLimitPerTransaction.toString(),waitTimeSecondsLimitPerTransaction:e.waitTimeSecondsLimitPerTransaction.toString(),price:l.O$.from(e.pricePerToken),pricePerToken:l.O$.from(e.pricePerToken),currency:e.currency,currencyContract:e.currency,currencyMetadata:r,merkleRoot:e.merkleRoot});case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getActiveMintCondition=function(){var t=_(G.mark((function t(){var e;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.getLastStartedMintConditionIndex();case 2:return e=t.sent,t.next=5,this.readOnlyContract.mintConditions(e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getActiveClaimCondition=function(){var t=_(G.mark((function t(){var e,r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.getLastStartedMintConditionIndex();case 2:return e=t.sent,t.next=5,this.readOnlyContract.mintConditions(e);case 5:return r=t.sent,t.next=8,this.transformResultToClaimCondition(r);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getAllMintConditions=function(){var t=_(G.mark((function t(){var e,r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],r=0;case 2:return t.prev=2,t.t0=e,t.next=6,this.readOnlyContract.mintConditions(r);case 6:t.t1=t.sent,t.t0.push.call(t.t0,t.t1),t.next=13;break;case 10:return t.prev=10,t.t2=t.catch(2),t.abrupt("break",16);case 13:r++,t.next=2;break;case 16:return t.abrupt("return",e);case 17:case"end":return t.stop()}}),t,this,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),r.getAllClaimConditions=function(){var t=_(G.mark((function t(){var e,r,n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],r=0;case 2:return t.prev=2,t.next=5,this.readOnlyContract.mintConditions(r);case 5:return n=t.sent,t.t0=e,t.next=9,this.transformResultToClaimCondition(n);case 9:t.t1=t.sent,t.t0.push.call(t.t0,t.t1),t.next=16;break;case 13:return t.prev=13,t.t2=t.catch(2),t.abrupt("break",19);case 16:r++,t.next=2;break;case 19:return t.abrupt("return",e);case 20:case"end":return t.stop()}}),t,this,[[2,13]])})));return function(){return t.apply(this,arguments)}}(),r.totalSupply=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.nextTokenId();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.maxTotalSupply=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.maxTotalSupply();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.totalUnclaimedSupply=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.nextTokenId();case 2:return t.t0=t.sent,t.next=5,this.totalClaimedSupply();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.sub.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.totalClaimedSupply=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.nextMintTokenId();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.balanceOf=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.balanceOf(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.balance=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.balanceOf.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.isApproved=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.isApprovedForAll(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.setApproval=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=!0),t.next=3,this.sendTransaction("setApprovalForAll",[e,r]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.transfer=function(){var t=_(G.mark((function t(e,r){var n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSignerAddress();case 2:return n=t.sent,t.next=5,this.sendTransaction("safeTransferFrom(address,address,uint256)",[n,e,r]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.lazyMint=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.lazyMintBatch([e]);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.pinToIpfs=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storage.uploadBatch(e,this.address);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.lazyMintBatch=function(){var t=_(G.mark((function t(e){var r,n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.getStorage().uploadMetadataBatch(e);case 2:return r=t.sent,n=r.baseUri,a=Array.from(Array(e.length).keys()).map((function(t){return""+n+t+"/"})),t.next=7,this.sendTransaction("lazyMintBatch",[a]);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.lazyMintAmount=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("lazyMintAmount",[e]);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setMintConditions=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.setClaimConditions(e));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setClaimConditions=function(){var t=_(G.mark((function t(e){var r,n,a,s,i,u;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.buildConditionsForDropV1();case 2:return r=t.sent,n={},e.allSnapshots().forEach((function(t){n[t.merkleRoot]=t.snapshotUri})),t.next=7,this.getMetadata(!1);case 7:return a=t.sent,(s=a.metadata)||pe(!1),0===e.allSnapshots().length&&"merkle"in s?s.merkle={}:s.merkle=n,t.next=13,this.storage.upload(JSON.stringify(s));case 13:return i=t.sent,u=[this.contract.interface.encodeFunctionData("setContractURI",[i]),this.contract.interface.encodeFunctionData("setPublicMintConditions",[r])],t.next=17,this.sendTransaction("multicall",[u]);case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getClaimConditionsFactory=function(){var t=this.sdk.createSnapshot.bind(this.sdk);return new $e(t)},r.getMintConditionsFactory=function(){return this.getClaimConditionsFactory()},r.setPublicMintConditions=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.map((function(t){return{startTimestamp:t.startTimestampInSeconds||0,maxMintSupply:t.maxMintSupply,currentMintSupply:0,quantityLimitPerTransaction:t.quantityLimitPerTransaction||t.maxMintSupply,waitTimeSecondsLimitPerTransaction:t.waitTimeSecondsLimitPerTransaction||0,pricePerToken:t.pricePerToken||0,currency:t.currency||o.d,merkleRoot:t.merkleRoot||(0,s.hexZeroPad)([0],32)}})),t.next=3,this.sendTransaction("setPublicMintConditions",[r]);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.canClaim=function(){var t=_(G.mark((function t(e,r){var n,a,i,c,p,d,f;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=[(0,s.hexZeroPad)([0],32)]),t.prev=1,t.next=4,this.getActiveClaimCondition();case 4:return n=t.sent,t.next=7,this.getCallOverrides();case 7:if(t.t0=t.sent,t.t0){t.next=10;break}t.t0={};case 10:return a=t.t0,t.next=13,this.getSignerAddress();case 13:if(i=t.sent,!n.merkleRoot){t.next=18;break}return t.next=17,this.getClaimerProofs(null==n?void 0:n.merkleRoot,i);case 17:r=t.sent;case 18:if(!n.pricePerToken.gt(0)){t.next=30;break}if(n.currency!==o.d){t.next=23;break}a.value=l.O$.from(n.pricePerToken).mul(e),t.next=30;break;case 23:return c=u.w6.connect(n.currency,this.providerOrSigner),p=this.address,t.next=27,c.allowance(i,p);case 27:d=t.sent,f=l.O$.from(n.pricePerToken).mul(l.O$.from(e)),d.lt(f);case 30:return t.next=32,this.readOnlyContract.callStatic.claim(e,r,a);case 32:return t.abrupt("return",!0);case 35:return t.prev=35,t.t1=t.catch(1),t.abrupt("return",!1);case 38:case"end":return t.stop()}}),t,this,[[1,35]])})));return function(e,r){return t.apply(this,arguments)}}(),r.getClaimerProofs=function(){var t=_(G.mark((function t(e,r){var n,a,s,i,u,o;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=4;break}return t.next=3,this.getSignerAddress();case 3:r=t.sent;case 4:return t.next=6,this.getMetadata();case 6:return n=t.sent,a=n.metadata,t.next=10,this.storage.get(null==a?void 0:a.merkle[e]);case 10:if(s=t.sent,i=new b.Q9,u=i.deserializeObject(JSON.parse(s),qe),void 0!==(o=u.claims.find((function(t){var e;return t.address.toLowerCase()===(null==(e=r)?void 0:e.toLowerCase())})))){t.next=16;break}return t.abrupt("return",[]);case 16:return t.abrupt("return",o.proof);case 17:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.claim=function(){var t=_(G.mark((function t(e,r){var n,a,i,c,p,d,f,h,v,m,x,y,g,w,k,C,T,S,A,O,M=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=[(0,s.hexZeroPad)([0],32)]),t.next=3,this.getActiveClaimCondition();case 3:return n=t.sent,t.next=6,this.getMetadata();case 6:return a=t.sent,i=a.metadata,t.next=10,this.getSignerAddress();case 10:if(c=t.sent,n.merkleRoot.toString().startsWith(o.d)){t.next=21;break}return t.next=14,this.storage.get(null==i?void 0:i.merkle[n.merkleRoot.toString()]);case 14:if(p=t.sent,d=new b.Q9,f=d.deserializeObject(JSON.parse(p),qe),void 0!==(h=f.claims.find((function(t){return t.address.toLowerCase()===c.toLowerCase()})))){t.next=20;break}throw new Error("No claim found for this address");case 20:r=h.proof;case 21:return t.next=23,this.getCallOverrides();case 23:if(t.t0=t.sent,t.t0){t.next=26;break}t.t0={};case 26:if(v=t.t0,!n.pricePerToken.gt(0)){t.next=44;break}if(n.currency!==o.d){t.next=32;break}v.value=l.O$.from(n.pricePerToken).mul(e),t.next=44;break;case 32:return m=u.w6.connect(n.currency,this.providerOrSigner),t.next=35,this.getSignerAddress();case 35:return x=t.sent,y=this.address,t.next=39,m.allowance(x,y);case 39:if(g=t.sent,w=l.O$.from(n.pricePerToken).mul(l.O$.from(e)),!g.lt(w)){t.next=44;break}return t.next=44,this.sendContractTransaction(m,"approve",[y,g.add(w)]);case 44:return t.next=46,this.sendTransaction("claim",[e,r],v);case 46:for(k=t.sent,C=this.parseEventLogs("Claimed",null==k?void 0:k.logs),T=C.startTokenId,S=T.add(e),A=[],O=T;O.lt(S);O=O.add(1))A.push(l.O$.from(O.toString()));return t.next=54,Promise.all(A.map(function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.get(e.toString());case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 54:return t.abrupt("return",t.sent);case 55:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.burn=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("burn",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.transferFrom=function(){var t=_(G.mark((function t(e,r,n){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("transferFrom",[e,r,n]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.setModuleMetadata=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storage.uploadMetadata(e);case 2:return r=t.sent,t.next=5,this.sendTransaction("setContractURI",[r]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setRoyaltyBps=function(){var t=_(G.mark((function t(e){var r,n,a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:if(r=t.sent,n=r.metadata,a=[],n){t.next=7;break}throw new Error("No metadata found, this module might be invalid!");case 7:return n.seller_fee_basis_points=e,t.t0=this.storage,t.t1=L({},n),t.t2=this.address,t.next=13,this.getSignerAddress();case 13:return t.t3=t.sent,t.next=16,t.t0.uploadMetadata.call(t.t0,t.t1,t.t2,t.t3);case 16:return s=t.sent,a.push(this.contract.interface.encodeFunctionData("setRoyaltyBps",[e])),a.push(this.contract.interface.encodeFunctionData("setContractURI",[s])),t.next=21,this.sendTransaction("multicall",[a]);case 21:return t.abrupt("return",t.sent);case 22:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setBaseTokenUri=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("setBaseTokenURI",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setMaxTotalSupply=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("setMaxTotalSupply",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getRoyaltyBps=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.royaltyBps();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getRoyaltyRecipientAddress=function(){var t=_(G.mark((function t(){var e,r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:if(r=t.sent,void 0===(null==(e=r.metadata)?void 0:e.fee_recipient)){t.next=5;break}return t.abrupt("return",r.metadata.fee_recipient);case 5:return t.abrupt("return","");case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.createBatch=function(){var t=_(G.mark((function t(e){var r,n,a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.canCreateBatch();case 2:if(t.sent){t.next=4;break}throw new Error("Batch already created!");case 4:return t.next=6,this.readOnlyContract.nextMintTokenId();case 6:return r=t.sent,t.next=9,this.storage.uploadMetadataBatch(e,this.address,r.toNumber());case 9:return n=t.sent,a=n.baseUri,s=[this.contract.interface.encodeFunctionData("setBaseTokenURI",[a]),this.contract.interface.encodeFunctionData("lazyMintAmount",[e.length])],t.next=14,this.sendTransaction("multicall",[s]);case 14:return t.abrupt("return",[]);case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.canCreateBatch=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.nextTokenId();case 2:return t.abrupt("return",t.sent.eq(0));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.isTransferRestricted=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.readOnlyContract.transfersRestricted());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.setRestrictedTransfer=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=!1),t.t0=this,t.t1=["admin"],t.next=5,this.getSignerAddress();case 5:return t.t2=t.sent,t.next=8,t.t0.onlyRoles.call(t.t0,t.t1,t.t2);case 8:return t.next=10,this.sendTransaction("setRestrictedTransfer",[e]);case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(fe);Ke.moduleType=Et.DROP,Ke.roles=[Gt,Wt,zt];var Qe=function(t){function e(){return t.apply(this,arguments)||this}B(e,t);var r=e.prototype;return r.getModuleRoles=function(){return e.roles},r.connectContract=function(){return u.Te.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return e.moduleType},r.transformResultToListing=function(){var t=_(G.mark((function t(e){var r,n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=null,t.prev=1,t.next=4,St(this.providerOrSigner,e.currency,e.pricePerToken);case 4:r=t.sent,t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:return n=void 0,t.prev=10,t.next=13,Bt(this.providerOrSigner,e.assetContract,e.tokenId.toString(),this.ipfsGatewayUrl);case 13:n=t.sent,t.next=18;break;case 16:t.prev=16,t.t1=t.catch(10);case 18:return t.abrupt("return",{id:e.listingId.toString(),seller:e.seller,tokenId:e.tokenId.toString(),tokenContract:e.assetContract,tokenMetadata:n,quantity:e.quantity,price:e.pricePerToken,currencyContract:e.currency,tokensPerBuyer:e.tokensPerBuyer,currencyMetadata:r,saleStart:e.saleStart.gt(0)?new Date(1e3*e.saleStart.toNumber()):null,saleEnd:e.saleEnd.gt(0)&&e.saleEnd.lte(Number.MAX_SAFE_INTEGER-1)?new Date(1e3*e.saleEnd.toNumber()):null});case 19:case"end":return t.stop()}}),t,this,[[1,7],[10,16]])})));return function(e){return t.apply(this,arguments)}}(),r.getListing=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAllListings=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAll(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.get=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.listings(e);case 2:return r=t.sent,t.next=5,this.transformResultToListing(r);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAll=function(){var t=_(G.mark((function t(e){var r,n=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=[],e){t.next=9;break}return t.t0=r,t.next=5,this.readOnlyContract.getAllListings();case 5:t.t1=t.sent,r=t.t0.concat.call(t.t0,t.t1),t.next=38;break;case 9:if(!e.tokenContract||!e.tokenId){t.next=17;break}return t.t2=r,t.next=13,this.readOnlyContract.getListingsByAsset(e.tokenContract,e.tokenId);case 13:t.t3=t.sent,r=t.t2.concat.call(t.t2,t.t3),t.next=38;break;case 17:if(!e.seller){t.next=25;break}return t.t4=r,t.next=21,this.readOnlyContract.getListingsBySeller(e.seller);case 21:t.t5=t.sent,r=t.t4.concat.call(t.t4,t.t5),t.next=38;break;case 25:if(!e.tokenContract){t.next=33;break}return t.t6=r,t.next=29,this.readOnlyContract.getListingsByAssetContract(e.tokenContract);case 29:t.t7=t.sent,r=t.t6.concat.call(t.t6,t.t7),t.next=38;break;case 33:return t.t8=r,t.next=36,this.readOnlyContract.getAllListings();case 36:t.t9=t.sent,r=t.t8.concat.call(t.t8,t.t9);case 38:return r=r.filter((function(t){if(t.quantity.eq(0))return!1;if(e){var r=(null==e?void 0:e.seller)||"",n=(null==e?void 0:e.tokenContract)||"",a=(null==e?void 0:e.tokenId)||"";if(r&&r.toLowerCase()!==t.seller.toLowerCase())return!1;if(n&&n.toLowerCase()!==t.assetContract.toLowerCase())return!1;if(a&&a.toLowerCase()!==t.tokenId.toString().toLowerCase())return!1}return!0})).map((function(t){return n.transformResultToListing(t)})),t.next=41,Promise.all(r);case 41:return t.abrupt("return",t.sent);case 42:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getMarketFeeBps=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.marketFeeBps();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.list=function(){var t=_(G.mark((function t(e,r,n,a,s,i,o,c){var p,d,f,l,h,v,m,x;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===i&&(i=0),void 0===o&&(o=0),void 0===c&&(c=0),t.prev=3,t.next=6,this.getSignerAddress();case 6:return p=t.sent,d=u.Hw.connect(e,this.providerOrSigner),s>0||pe(!1),t.next=11,d.supportsInterface(lt);case 11:if(!t.sent){t.next=28;break}return f=u.aC.connect(e,this.providerOrSigner),t.next=16,f.isApprovedForAll(p,this.address);case 16:if(t.sent){t.next=26;break}return t.next=20,f.getApproved(r);case 20:if(t.t0=t.sent.toLowerCase(),t.t1=this.address.toLowerCase(),t.t0===t.t1){t.next=26;break}return t.next=26,this.sendContractTransaction(f,"setApprovalForAll",[this.address,!0]);case 26:t.next=35;break;case 28:return l=u.bP.connect(e,this.providerOrSigner),t.next=31,l.isApprovedForAll(p,this.address);case 31:if(t.sent){t.next=35;break}return t.next=35,this.sendContractTransaction(l,"setApprovalForAll",[this.address,!0]);case 35:return t.next=37,this.sendTransaction("list",[e,r,n,a,s,i,o,c]);case 37:return h=t.sent,v=this.parseEventLogs("NewListing",null==h?void 0:h.logs),m=null==v?void 0:v.listing,t.next=42,this.transformResultToListing(m);case 42:return t.abrupt("return",t.sent);case 45:return t.prev=45,t.t2=t.catch(3),t.next=49,this.getSignerAddress();case 49:return x=t.sent,t.next=52,this.sdk.getNFTModule(e).ownerOf(r);case 52:if(t.t3=t.sent,t.t4=x,t.t3===t.t4){t.next=58;break}throw new J;case 58:return t.next=60,this.readOnlyContract.restrictedListerRoleOnly();case 60:if(t.t6=t.sent,!t.t6){t.next=67;break}return t.t7=x,t.next=65,this.getRoleMembers("lister");case 65:t.t8=t.sent,t.t6=!(t.t7 in t.t8);case 67:if(t.t5=t.t6,!t.t5){t.next=74;break}return t.t9=x,t.next=72,this.getRoleMembers("admin");case 72:t.t10=t.sent,t.t5=!(t.t9 in t.t10);case 74:if(!t.t5){t.next=76;break}throw new z(x,"lister");case 76:throw t.t2;case 77:case"end":return t.stop()}}),t,this,[[3,45]])})));return function(e,r,n,a,s,i,u,o){return t.apply(this,arguments)}}(),r.unlistAll=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get(e);case 2:return r=t.sent.quantity,t.next=5,this.unlist(e,r);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.unlist=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("unlist",[e,r]);case 2:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.setRestrictedListerRoleOnly=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("setRestrictedListerRoleOnly",[e]);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.buy=function(){var t=_(G.mark((function t(e,r){var n,a,s,i,c,p,d,f,h;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.get(e);case 3:return n=t.sent,t.next=6,this.getSignerAddress();case 6:if(a=t.sent,s=this.address,i=n.price.mul(l.O$.from(r)),!n.currencyContract||n.currencyContract===o.d){t.next=17;break}return c=u.w6.connect(n.currencyContract,this.providerOrSigner),t.next=13,c.allowance(a,s);case 13:if(!(p=t.sent).lt(i)){t.next=17;break}return t.next=17,this.sendContractTransaction(c,"approve",[s,p.add(i)]);case 17:return t.next=19,this.sendTransaction("buy",[e,r]);case 19:return d=t.sent,f=this.parseEventLogs("NewSale",null==d?void 0:d.logs),t.next=23,this.transformResultToListing(null==f?void 0:f.listing);case 23:return t.abrupt("return",t.sent);case 26:return t.prev=26,t.t0=t.catch(0),t.next=30,this.get(e);case 30:if(h=t.sent.tokensPerBuyer.toNumber(),!(r>h)){t.next=33;break}throw new Z(h.toString());case 33:throw t.t0;case 34:case"end":return t.stop()}}),t,this,[[0,26]])})));return function(e,r){return t.apply(this,arguments)}}(),r.setModuleMetadata=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.getStorage().uploadMetadata(e);case 2:return r=t.sent,t.next=5,this.sendTransaction("setContractURI",[r]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setMarketFeeBps=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("setMarketFeeBps",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(fe);Qe.moduleType=Et.MARKET,Qe.roles=[Gt,Qt,Ht];var Je=function(t){function e(){return t.apply(this,arguments)||this}B(e,t);var r=e.prototype;return r.getModuleRoles=function(){return e.roles},r.connectContract=function(){return u.bG.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return e.moduleType},r.createDirectListing=function(){var t=_(G.mark((function t(e){var r,n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.validateNewListingParam(e),t.t0=this,t.t1=e.assetContractAddress,t.t2=e.tokenId,t.next=6,this.getSignerAddress();case 6:return t.t3=t.sent,t.next=9,t.t0.handleTokenApproval.call(t.t0,t.t1,t.t2,t.t3);case 9:return t.next=11,this.sendTransaction("createListing",[{assetContract:e.assetContractAddress,tokenId:e.tokenId,buyoutPricePerToken:e.buyoutPricePerToken,currencyToAccept:e.currencyContractAddress,listingType:Fe.Direct,quantityToList:e.quantity,reservePricePerToken:e.buyoutPricePerToken,secondsUntilEndTime:e.listingDurationInSeconds,startTime:e.startTimeInSeconds}]);case 11:return r=t.sent,n=this.parseEventLogs("NewListing",null==r?void 0:r.logs),t.abrupt("return",n.listingId);case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.createAuctionListing=function(){var t=_(G.mark((function t(e){var r,n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.validateNewListingParam(e),t.t0=this,t.t1=e.assetContractAddress,t.t2=e.tokenId,t.next=6,this.getSignerAddress();case 6:return t.t3=t.sent,t.next=9,t.t0.handleTokenApproval.call(t.t0,t.t1,t.t2,t.t3);case 9:return t.next=11,this.sendTransaction("createListing",[{assetContract:e.assetContractAddress,tokenId:e.tokenId,buyoutPricePerToken:e.buyoutPricePerToken,currencyToAccept:e.currencyContractAddress,listingType:Fe.Auction,quantityToList:e.quantity,reservePricePerToken:e.reservePricePerToken,secondsUntilEndTime:e.listingDurationInSeconds,startTime:e.startTimeInSeconds}]);case 11:return r=t.sent,n=this.parseEventLogs("NewListing",null==r?void 0:r.logs),t.abrupt("return",n.listingId);case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.makeDirectListingOffer=function(){var t=_(G.mark((function t(e){var r,n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Ot(e.currencyContractAddress)){t.next=2;break}throw new Error("You must use the wrapped native token address when making an offer with a native token");case 2:return t.prev=2,t.next=5,this.getDirectListing(e.listingId);case 5:t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(2),console.error("Failed to get listing, err =",t.t0),new Error("Error getting the listing with id "+e.listingId);case 11:return r=l.O$.from(e.quantityDesired),n=l.O$.from(e.pricePerToken).mul(r),t.next=15,this.getCallOverrides();case 15:if(t.t1=t.sent,t.t1){t.next=18;break}t.t1={};case 18:return a=t.t1,t.next=21,this.setAllowance(n,e.currencyContractAddress,a);case 21:return t.next=23,this.sendTransaction("offer",[e.listingId,e.quantityDesired,e.currencyContractAddress,e.pricePerToken],a);case 23:case"end":return t.stop()}}),t,this,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),r.setAllowance=function(){var t=_(G.mark((function t(e,r,n){var a,s,i,o;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Ot(r)){t.next=4;break}n.value=e,t.next=15;break;case 4:return a=u.w6.connect(r,this.providerOrSigner),t.next=7,this.getSignerAddress();case 7:return s=t.sent,i=this.address,t.next=11,a.allowance(s,i);case 11:if(!(o=t.sent).lt(e)){t.next=15;break}return t.next=15,this.sendContractTransaction(a,"increaseAllowance",[i,e.sub(o)]);case 15:return t.abrupt("return",n);case 16:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.makeAuctionListingBid=function(){var t=_(G.mark((function t(e){var r,n,a,s,i,u,o,c;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.validateAuctionListing(l.O$.from(e.listingId));case 2:return r=t.sent,t.next=5,this.getBidBufferBps();case 5:return n=t.sent,t.next=8,this.getWinningBid(e.listingId);case 8:if(!(a=t.sent)){t.next=16;break}return t.next=12,this.isWinningBid(a.pricePerToken,e.pricePerToken,n);case 12:t.sent||pe(!1),t.next=19;break;case 16:s=l.O$.from(e.pricePerToken),i=l.O$.from(r.reservePrice),s.gte(i)||pe(!1);case 19:return u=l.O$.from(r.quantity),o=l.O$.from(e.pricePerToken).mul(u),t.next=23,this.getCallOverrides();case 23:if(t.t0=t.sent,t.t0){t.next=26;break}t.t0={};case 26:return c=t.t0,t.next=29,this.setAllowance(o,r.currencyContractAddress,c);case 29:return t.next=31,this.sendTransaction("offer",[e.listingId,r.quantity,r.currencyContractAddress,e.pricePerToken],c);case 31:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.isWinningBid=function(){var t=_(G.mark((function t(e,r,n){var a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.O$.from(n),e=l.O$.from(e),r=l.O$.from(r),a=r.sub(e).mul(1e4).div(e),t.abrupt("return",a.gte(n));case 5:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.getAuctionWinner=function(){var t=_(G.mark((function t(e){var r,n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.queryFilter(this.contract.filters.AuctionClosed());case 2:if(r=t.sent,n=r.find((function(t){return t.args.listingId.eq(l.O$.from(e))}))){t.next=6;break}throw new Error("Could not find auction with listingId "+e+" in closed auctions");case 6:return t.abrupt("return",n.args.winningBidder);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getDirectListing=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.listings(e);case 2:if((r=t.sent).listingId.toString()===e.toString()){t.next=5;break}throw new rt(this.address,e.toString());case 5:if(r.listingType===Fe.Direct){t.next=7;break}throw new nt(this.address,e.toString(),"Auction","Direct");case 7:return t.next=9,this.mapDirectListing(r);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAuctionListing=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.listings(e);case 2:if((r=t.sent).listingId.toString()===e.toString()){t.next=5;break}throw new rt(this.address,e.toString());case 5:if(r.listingType===Fe.Auction){t.next=7;break}throw new nt(this.address,e.toString(),"Direct","Auction");case 7:return t.next=9,this.mapAuctionListing(r);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.mapDirectListing=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e.assetContract,t.t1=e.buyoutPricePerToken,t.t2=e.currency,t.next=5,St(this.providerOrSigner,e.currency,e.buyoutPricePerToken);case 5:return t.t3=t.sent,t.t4=e.listingId.toString(),t.t5=e.tokenId,t.t6=e.quantity,t.t7=e.startTime,t.next=12,Ut(e.assetContract,this.providerOrSigner,e.tokenId.toString(),this.sdk.getStorage());case 12:return t.t8=t.sent,t.t9=e.endTime,t.t10=e.tokenOwner,t.t11=Fe.Direct,t.abrupt("return",{assetContractAddress:t.t0,buyoutPrice:t.t1,currencyContractAddress:t.t2,buyoutCurrencyValuePerToken:t.t3,id:t.t4,tokenId:t.t5,quantity:t.t6,startTimeInSeconds:t.t7,asset:t.t8,secondsUntilEnd:t.t9,sellerAddress:t.t10,type:t.t11});case 17:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.mapAuctionListing=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e.assetContract,t.t1=e.buyoutPricePerToken,t.t2=e.currency,t.next=5,St(this.providerOrSigner,e.currency,e.buyoutPricePerToken);case 5:return t.t3=t.sent,t.t4=e.listingId.toString(),t.t5=e.tokenId,t.t6=e.quantity,t.t7=e.startTime,t.next=12,Ut(e.assetContract,this.providerOrSigner,e.tokenId.toString(),this.sdk.getStorage());case 12:return t.t8=t.sent,t.next=15,St(this.providerOrSigner,e.currency,e.reservePricePerToken);case 15:return t.t9=t.sent,t.t10=e.reservePricePerToken,t.t11=e.endTime,t.t12=e.tokenOwner,t.t13=Fe.Auction,t.abrupt("return",{assetContractAddress:t.t0,buyoutPrice:t.t1,currencyContractAddress:t.t2,buyoutCurrencyValuePerToken:t.t3,id:t.t4,tokenId:t.t5,quantity:t.t6,startTimeInEpochSeconds:t.t7,asset:t.t8,reservePriceCurrencyValuePerToken:t.t9,reservePrice:t.t10,endTimeInEpochSeconds:t.t11,sellerAddress:t.t12,type:t.t13});case 21:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.handleTokenApproval=function(){var t=_(G.mark((function t(e,r,n){var a,s,i;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.Hw.connect(e,this.providerOrSigner),t.next=3,a.supportsInterface(lt);case 3:if(!t.sent){t.next=20;break}return s=u.aC.connect(e,this.providerOrSigner),t.next=8,s.isApprovedForAll(n,this.address);case 8:if(t.sent){t.next=18;break}return t.next=12,s.getApproved(r);case 12:if(t.t0=t.sent.toLowerCase(),t.t1=this.address.toLowerCase(),t.t0===t.t1){t.next=18;break}return t.next=18,this.sendContractTransaction(s,"setApprovalForAll",[this.address,!0]);case 18:t.next=27;break;case 20:return i=u.bP.connect(e,this.providerOrSigner),t.next=23,i.isApprovedForAll(n,this.address);case 23:if(t.sent){t.next=27;break}return t.next=27,this.sendContractTransaction(i,"setApprovalForAll",[this.address,!0]);case 27:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.isTokenApprovedForMarketplace=function(){var t=_(G.mark((function t(e,r,n){var a,s,i;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=u.Hw.connect(e,this.providerOrSigner),t.next=4,a.supportsInterface(lt);case 4:if(!t.sent){t.next=19;break}return s=u.aC.connect(e,this.providerOrSigner),t.next=9,s.isApprovedForAll(n,this.address);case 9:if(!t.sent){t.next=12;break}return t.abrupt("return",!0);case 12:return t.next=14,s.getApproved(r);case 14:return t.t0=t.sent.toLowerCase(),t.t1=this.address.toLowerCase(),t.abrupt("return",t.t0===t.t1);case 19:return i=u.bP.connect(e,this.providerOrSigner),t.next=22,i.isApprovedForAll(n,this.address);case 22:return t.abrupt("return",t.sent);case 23:t.next=29;break;case 25:return t.prev=25,t.t2=t.catch(0),console.error("Failed to check if token is approved",t.t2),t.abrupt("return",!1);case 29:case"end":return t.stop()}}),t,this,[[0,25]])})));return function(e,r,n){return t.apply(this,arguments)}}(),r.isStillValidDirectListing=function(){var t=_(G.mark((function t(e,r){var n,a,s,i;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isTokenApprovedForMarketplace(e.assetContractAddress,e.tokenId,e.sellerAddress);case 2:if(t.sent){t.next=5;break}return t.abrupt("return",!1);case 5:return n=u.Hw.connect(e.assetContractAddress,this.providerOrSigner),t.next=8,n.supportsInterface(lt);case 8:if(!t.sent){t.next=18;break}return a=u.aC.connect(e.assetContractAddress,this.providerOrSigner),t.next=13,a.ownerOf(e.tokenId);case 13:return t.t0=t.sent.toLowerCase(),t.t1=e.sellerAddress.toLowerCase(),t.abrupt("return",t.t0===t.t1);case 18:return s=u.bP.connect(e.assetContractAddress,this.providerOrSigner),t.next=21,s.balanceOf(e.sellerAddress,e.tokenId);case 21:return i=t.sent,t.abrupt("return",i.gte(r||e.quantity));case 23:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.validateNewListingParam=function(t){switch((void 0===t.assetContractAddress||null===t.assetContractAddress)&&pe(!1),(void 0===t.buyoutPricePerToken||null===t.buyoutPricePerToken)&&pe(!1),(void 0===t.listingDurationInSeconds||null===t.listingDurationInSeconds)&&pe(!1),(void 0===t.startTimeInSeconds||null===t.startTimeInSeconds)&&pe(!1),(void 0===t.tokenId||null===t.tokenId)&&pe(!1),(void 0===t.quantity||null===t.quantity)&&pe(!1),t.type){case"NewAuctionListing":(void 0===t.reservePricePerToken||null===t.reservePricePerToken)&&pe(!1)}},r.validateDirectListing=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getDirectListing(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),console.error("Error getting the listing with id "+e),t.t0;case 10:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),r.validateAuctionListing=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getAuctionListing(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),console.error("Error getting the listing with id "+e),t.t0;case 10:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),r.mapOffer=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=r.quantityDesired,t.t1=r.pricePerToken,t.t2=r.currency,t.t3=r.offeror,t.t4=r.quantityWanted,t.next=7,St(this.providerOrSigner,r.currency,r.quantityWanted.mul(r.pricePerToken));case 7:return t.t5=t.sent,t.t6=e,t.abrupt("return",{quantity:t.t0,pricePerToken:t.t1,currencyContractAddress:t.t2,buyerAddress:t.t3,quantityDesired:t.t4,currencyValue:t.t5,listingId:t.t6});case 10:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.getActiveOffer=function(){var t=_(G.mark((function t(e,r){var n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.validateDirectListing(l.O$.from(e)),(0,S.isAddress)(r)||pe(!1),t.next=4,this.readOnlyContract.offers(e,r);case 4:if((n=t.sent).offeror!==o.d){t.next=7;break}return t.abrupt("return",void 0);case 7:return t.next=9,this.mapOffer(l.O$.from(e),n);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.getWinningBid=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.validateAuctionListing(l.O$.from(e)),t.next=3,this.readOnlyContract.winningBid(e);case 3:if((r=t.sent).offeror!==o.d){t.next=6;break}return t.abrupt("return",void 0);case 6:return t.next=8,this.mapOffer(l.O$.from(e),r);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getBidBufferBps=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.readOnlyContract.bidBufferBps());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getTimeBufferInSeconds=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.timeBuffer();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.acceptDirectListingOffer=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.validateDirectListing(l.O$.from(e)),t.next=3,this.sendTransaction("acceptOffer",[e,r]);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.buyoutAuctionListing=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.validateAuctionListing(l.O$.from(e));case 2:return r=t.sent,t.next=5,this.makeAuctionListingBid({listingId:e,pricePerToken:r.buyoutPrice});case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.buyoutDirectListing=function(){var t=_(G.mark((function t(e){var r,n,a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.validateDirectListing(l.O$.from(e.listingId));case 2:return r=t.sent,t.next=5,this.isStillValidDirectListing(r,e.quantityDesired);case 5:if(t.sent){t.next=8;break}throw new Error("The asset on this listing has been moved from the listers wallet, this listing is now invalid");case 8:return n=l.O$.from(e.quantityDesired),a=l.O$.from(r.buyoutPrice).mul(n),t.next=12,this.getCallOverrides();case 12:if(t.t0=t.sent,t.t0){t.next=15;break}t.t0={};case 15:return s=t.t0,t.next=18,this.setAllowance(a,r.currencyContractAddress,s);case 18:return t.next=20,this.sendTransaction("buy",[e.listingId,n],s);case 20:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.updateDirectListing=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("updateListing",[e.id,e.quantity,e.buyoutPrice,e.buyoutPrice,e.currencyContractAddress,e.startTimeInSeconds,e.secondsUntilEnd]);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.updateAuctionListing=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("updateListing",[e.id,e.quantity,e.reservePrice,e.buyoutPrice,e.currencyContractAddress,e.startTimeInEpochSeconds,e.endTimeInEpochSeconds]);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.cancelDirectListing=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.validateDirectListing(l.O$.from(e));case 2:return(r=t.sent).quantity=0,t.next=6,this.updateDirectListing(r);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.cancelAuctionListing=function(){var t=_(G.mark((function t(e){var r,n,a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.validateAuctionListing(l.O$.from(e));case 2:return r=t.sent,n=l.O$.from(Math.floor(Date.now()/1e3)),a=l.O$.from(r.startTimeInEpochSeconds),t.next=7,this.readOnlyContract.winningBid(e);case 7:if(s=t.sent,!n.gt(a)||s.offeror===o.d){t.next=10;break}throw new tt(e.toString());case 10:return t.t0=this,t.t1=l.O$.from(e),t.next=14,this.getSignerAddress();case 14:return t.t2=t.sent,t.t3=[t.t1,t.t2],t.next=18,t.t0.sendTransaction.call(t.t0,"closeAuction",t.t3);case 18:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.closeAuctionListing=function(){var t=_(G.mark((function t(e,r){var n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=4;break}return t.next=3,this.getSignerAddress();case 3:r=t.sent;case 4:return t.next=6,this.validateAuctionListing(l.O$.from(e));case 6:return n=t.sent,t.prev=7,t.next=10,this.sendTransaction("closeAuction",[l.O$.from(e),r]);case 10:t.next=19;break;case 12:if(t.prev=12,t.t0=t.catch(7),!t.t0.message.includes("cannot close auction before it has ended")){t.next=18;break}throw new st(e.toString(),n.endTimeInEpochSeconds.toString());case 18:throw t.t0;case 19:case"end":return t.stop()}}),t,this,[[7,12]])})));return function(e,r){return t.apply(this,arguments)}}(),r.setBidBufferBps=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.t1=["admin"],t.next=4,this.getSignerAddress();case 4:return t.t2=t.sent,t.next=7,t.t0.onlyRoles.call(t.t0,t.t1,t.t2);case 7:return t.next=9,this.getTimeBufferInSeconds();case 9:return r=t.sent,t.next=12,this.sendTransaction("setAuctionBuffers",[r,l.O$.from(e)]);case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setTimeBufferInSeconds=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.t1=["admin"],t.next=4,this.getSignerAddress();case 4:return t.t2=t.sent,t.next=7,t.t0.onlyRoles.call(t.t0,t.t1,t.t2);case 7:return t.next=9,this.getBidBufferBps();case 9:return r=t.sent,t.next=12,this.sendTransaction("setAuctionBuffers",[l.O$.from(e),r]);case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.buyoutListing=function(){var t=_(G.mark((function t(e,r){var n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.listings(e);case 2:if((n=t.sent).listingId.toString()===e.toString()){t.next=5;break}throw new rt(this.address,e.toString());case 5:t.t0=n.listingType,t.next=t.t0===Fe.Direct?8:t.t0===Fe.Auction?12:15;break;case 8:return void 0===r&&pe(!1),t.next=11,this.buyoutDirectListing({listingId:e,quantityDesired:r});case 11:return t.abrupt("return",t.sent);case 12:return t.next=14,this.buyoutAuctionListing(e);case 14:return t.abrupt("return",t.sent);case 15:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.getListing=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.listings(e);case 2:if((r=t.sent).listingId.toString()===e.toString()){t.next=5;break}throw new rt(this.address,e.toString());case 5:t.t0=r.listingType,t.next=t.t0===Fe.Auction?8:t.t0===Fe.Direct?11:14;break;case 8:return t.next=10,this.mapAuctionListing(r);case 10:return t.abrupt("return",t.sent);case 11:return t.next=13,this.mapDirectListing(r);case 13:return t.abrupt("return",t.sent);case 14:throw new Error("Unknown listing type: "+r.listingType);case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAllListings=function(){var t=_(G.mark((function t(e){var r,n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAllListingsNoFilter();case 2:return r=t.sent,e&&(e.seller&&(r=r.filter((function(t){var r;return t.sellerAddress.toString().toLowerCase()===(null==e||null==(r=e.seller)?void 0:r.toString().toLowerCase())}))),e.tokenContract&&(r=e.tokenId?r.filter((function(t){var r,n;return t.assetContractAddress.toString().toLowerCase()===(null==e||null==(r=e.tokenContract)?void 0:r.toString().toLowerCase())&&t.tokenId.toString()===(null==e||null==(n=e.tokenId)?void 0:n.toString())})):r.filter((function(t){var r;return t.assetContractAddress.toString().toLowerCase()===(null==e||null==(r=e.tokenContract)?void 0:r.toString().toLowerCase())}))),void 0!==e.start&&(n=e.start,r=r.filter((function(t,e){return e>=n})),void 0!==e.count&&r.length>e.count&&(r=r.slice(0,e.count)))),t.abrupt("return",r.filter((function(t){return void 0!==t})));case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAllListingsNoFilter=function(){var t=_(G.mark((function t(){var e,r=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Promise,t.t1=Array,t.t2=Array,t.next=5,this.readOnlyContract.totalListings();case 5:return t.t3=t.sent.toNumber(),t.t4=(0,t.t2)(t.t3).keys(),t.t5=t.t1.from.call(t.t1,t.t4).map(function(){var t=_(G.mark((function t(e){var n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.getListing(e);case 3:n=t.sent,t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",void 0);case 9:if(n.type!==Fe.Auction){t.next=11;break}return t.abrupt("return",n);case 11:return t.next=13,r.isStillValidDirectListing(n);case 13:if(t.sent){t.next=16;break}return t.abrupt("return",void 0);case 16:return t.abrupt("return",n);case 17:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()),t.next=10,t.t0.all.call(t.t0,t.t5);case 10:return e=t.sent,t.abrupt("return",e.filter((function(t){return void 0!==t})));case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.isRestrictedListerRoleOnly=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.readOnlyContract.restrictedListerRoleOnly());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.setRestrictedListerRoleOnly=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("setRestrictedListerRoleOnly",[e]);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(fe);Je.moduleType=Et.MARKETPLACE,Je.roles=[Gt,Qt];var Ze,Ye=[{name:"to",type:"address"},{name:"uri",type:"string"},{name:"price",type:"uint256"},{name:"currency",type:"address"},{name:"validityStartTimestamp",type:"uint128"},{name:"validityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"}],Xe=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this)._shouldCheckVersion=!0,e._isV1=!1,e.v1Contract=void 0,e}B(e,t);var r=e.prototype;return r.getModuleRoles=function(){return e.roles},r.connectContract=function(){return u.Mv.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return e.moduleType},r.isV1=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._shouldCheckVersion){t.next=12;break}return t.prev=1,t.next=4,this.readOnlyContract.nextTokenIdToMint();case 4:this._isV1=!1,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),this._isV1=!0,this.v1Contract=u.Jj.connect(this.address,this.providerOrSigner);case 11:this._shouldCheckVersion=!1;case 12:return t.abrupt("return",this._isV1);case 13:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(){return t.apply(this,arguments)}}(),r.get=function(){var t=_(G.mark((function t(e){var r,n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.sdk.getStorage(),t.next=3,this.readOnlyContract.tokenURI(e);case 3:return n=t.sent,t.t0=JSON,t.next=7,r.get(n);case 7:return t.t1=t.sent,a=t.t0.parse.call(t.t0,t.t1),t.abrupt("return",L({},a,{id:e,uri:n,image:r.resolveFullUrl(a.image)}));case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAll=function(){var t=_(G.mark((function t(){var e,r,n,a=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(!t.sent){t.next=14;break}return t.next=5,null==(n=this.v1Contract)?void 0:n.nextTokenId();case 5:if(t.t0=r=t.sent,null!=t.t0){t.next=10;break}t.t1=void 0,t.next=11;break;case 10:t.t1=r.toNumber();case 11:e=t.t1,t.next=17;break;case 14:return t.next=16,this.readOnlyContract.nextTokenIdToMint();case 16:e=t.sent.toNumber();case 17:return t.next=19,Promise.all(Array.from(Array(e).keys()).map((function(t){return a.get(t.toString())})));case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getWithOwner=function(){var t=_(G.mark((function t(e){var r,n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.ownerOf(e),this.get(e)]);case 2:return r=t.sent,n=r[0],a=r[1],t.abrupt("return",{owner:n,metadata:a});case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAllWithOwner=function(){var t=_(G.mark((function t(){var e,r,n,a=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(!t.sent){t.next=14;break}return t.next=5,null==(n=this.v1Contract)?void 0:n.nextTokenId();case 5:if(t.t0=r=t.sent,null!=t.t0){t.next=10;break}t.t1=void 0,t.next=11;break;case 10:t.t1=r.toNumber();case 11:e=t.t1,t.next=17;break;case 14:return t.next=16,this.readOnlyContract.nextTokenIdToMint();case 16:e=t.sent.toNumber();case 17:return t.next=19,Promise.all(Array.from(Array(e).keys()).map((function(t){return a.getWithOwner(t.toString())})));case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.ownerOf=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.readOnlyContract.ownerOf(e);case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",o.d);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),r.getOwned=function(){var t=_(G.mark((function t(e){var r,n,a,s,i=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=4;break}t.t0=e,t.next=7;break;case 4:return t.next=6,this.getSignerAddress();case 6:t.t0=t.sent;case 7:return r=t.t0,t.next=10,this.readOnlyContract.balanceOf(r);case 10:return n=t.sent,a=Array.from(Array(n.toNumber()).keys()),t.next=14,Promise.all(a.map((function(t){return i.readOnlyContract.tokenOfOwnerByIndex(r,t)})));case 14:return s=t.sent,t.next=17,Promise.all(s.map((function(t){return i.get(t.toString())})));case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.totalSupply=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.totalSupply();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.balanceOf=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.balanceOf(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.balance=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.balanceOf.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.isApproved=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.isApprovedForAll(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.setApproval=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=!0),t.next=3,this.sendTransaction("setApprovalForAll",[e,r]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.transfer=function(){var t=_(G.mark((function t(e,r){var n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isTransferRestricted();case 2:if(!t.sent){t.next=4;break}throw new at(this.address);case 4:return t.next=6,this.getSignerAddress();case 6:return n=t.sent,t.next=9,this.sendTransaction("safeTransferFrom(address,address,uint256)",[n,e,r]);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.mint=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.next=7,t.t0.mintTo.call(t.t0,t.t1,t.t2);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r._v1MintTo=function(){var t=_(G.mark((function t(e,r){var n,a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===this.v1Contract&&pe(!1),t.next=3,this.sdk.getStorage().uploadMetadata(r);case 3:return n=t.sent,t.next=6,this.sendContractTransaction(this.v1Contract,"mintNFT",[e,n]);case 6:if(a=t.sent,0!==(s=this.parseLogs("Minted",null==a?void 0:a.logs,this.v1Contract)).length){t.next=10;break}throw new Error("No Minted event found, failed to mint");case 10:return t.next=12,this.get(s[0].args.tokenId.toString());case 12:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.mintTo=function(){var t=_(G.mark((function t(e,r){var n,a,s,i;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(!t.sent){t.next=6;break}return t.next=5,this._v1MintTo(e,r);case 5:return t.abrupt("return",t.sent);case 6:return t.next=8,this.sdk.getStorage().uploadMetadata(r);case 8:return n=t.sent,t.next=11,this.sendTransaction("mintTo",[e,n]);case 11:if(a=t.sent,0!==(s=this.parseLogs("TokenMinted",null==a?void 0:a.logs)).length){t.next=15;break}throw new Error("TokenMinted event not found");case 15:return i=s[0].args.tokenIdMinted,t.next=18,this.get(i.toString());case 18:return t.abrupt("return",t.sent);case 19:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.mintBatch=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.next=7,t.t0.mintBatchTo.call(t.t0,t.t1,t.t2);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r._v1MintBatchTo=function(){var t=_(G.mark((function t(e,r){var n,a,s,i,u,o=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===this.v1Contract&&pe(!1),t.next=3,this.sdk.getStorage().uploadMetadataBatch(r);case 3:return n=t.sent,a=n.metadataUris,t.next=7,this.sendContractTransaction(this.v1Contract,"mintNFTBatch",[e,a]);case 7:if(s=t.sent,0!==(i=this.parseLogs("MintedBatch",null==s?void 0:s.logs,this.v1Contract)).length){t.next=11;break}throw new Error("No MintedBatch event found, failed to mint");case 11:return u=i[0].args.tokenIds,t.next=14,Promise.all(u.map((function(t){return o.get(t.toString())})));case 14:return t.abrupt("return",t.sent);case 15:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.mintBatchTo=function(){var t=_(G.mark((function t(e,r){var n,a,s,i,u,o,c=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isV1();case 2:if(!t.sent){t.next=6;break}return t.next=5,this._v1MintBatchTo(e,r);case 5:return t.abrupt("return",t.sent);case 6:return t.next=8,this.sdk.getStorage().uploadMetadataBatch(r);case 8:return n=t.sent,a=n.metadataUris,s=a.map((function(t){return c.contract.interface.encodeFunctionData("mintTo",[e,t])})),t.next=13,this.sendTransaction("multicall",[s]);case 13:if(i=t.sent,!(0===(u=this.parseLogs("TokenMinted",i.logs)).length||u.length<r.length)){t.next=17;break}throw new Error("TokenMinted event not found, minting failed");case 17:return o=u.map((function(t){return t.args.tokenIdMinted})),t.next=20,Promise.all(o.map((function(t){return c.get(t.toString())})));case 20:return t.abrupt("return",t.sent);case 21:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.burn=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("burn",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.transferFrom=function(){var t=_(G.mark((function t(e,r,n){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("transferFrom",[e,r,n]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.setRoyaltyBps=function(){var t=_(G.mark((function t(e){var r,n,a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:if(r=t.sent,n=r.metadata,a=[],n){t.next=7;break}throw new Error("No metadata found, this module might be invalid!");case 7:return n.seller_fee_basis_points=e,t.t0=this.sdk.getStorage(),t.t1=L({},n),t.t2=this.address,t.next=13,this.getSignerAddress();case 13:return t.t3=t.sent,t.next=16,t.t0.uploadMetadata.call(t.t0,t.t1,t.t2,t.t3);case 16:return s=t.sent,a.push(this.contract.interface.encodeFunctionData("setRoyaltyBps",[e])),a.push(this.contract.interface.encodeFunctionData("setContractURI",[s])),t.next=21,this.sendTransaction("multicall",[a]);case 21:return t.abrupt("return",t.sent);case 22:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setModuleMetadata=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.getStorage().uploadMetadata(e);case 2:return r=t.sent,t.next=5,this.sendTransaction("setContractURI",[r]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getRoyaltyBps=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.royaltyBps();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getRoyaltyRecipientAddress=function(){var t=_(G.mark((function t(){var e,r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:if(r=t.sent,void 0===(null==(e=r.metadata)?void 0:e.fee_recipient)){t.next=5;break}return t.abrupt("return",r.metadata.fee_recipient);case 5:return t.abrupt("return","");case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.isTransferRestricted=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.readOnlyContract.transfersRestricted());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.setRestrictedTransfer=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=!1),t.t0=this,t.t1=["admin"],t.next=5,this.getSignerAddress();case 5:return t.t2=t.sent,t.next=8,t.t0.onlyRoles.call(t.t0,t.t1,t.t2);case 8:return t.next=10,this.sendTransaction("setRestrictedTransfer",[e]);case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.mintWithSignature=function(){var t=_(G.mark((function t(e,r){var n,a,s,i;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=L({},this.mapPayload(e),{uri:e.uri}),t.next=3,this.getCallOverrides();case 3:return a=t.sent,t.next=6,this.setAllowance(l.O$.from(n.price),e.currencyAddress,a);case 6:return t.next=8,this.sendTransaction("mintWithSignature",[n,r],a);case 8:return s=t.sent,t.next=11,this.parseLogs("MintWithSignature",s.logs);case 11:if(0!==(i=t.sent).length){t.next=14;break}throw new Error("No MintWithSignature event found");case 14:return t.abrupt("return",i[0].args.tokenIdMinted);case 15:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.verify=function(){var t=_(G.mark((function t(e,r){var n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.mapPayload(e),t.next=3,this.readOnlyContract.verify(L({},n,{uri:e.uri}),r);case 3:return a=t.sent,t.abrupt("return",a[0]);case 5:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.generateSignatureBatch=function(){var t=_(G.mark((function t(e){var r,n,a,s,i,u,o=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=function(t){if(void 0===t.id){console.warn("mintRequest.id is an empty string, generating uuid-v4");var e=P.alloc(16);return(0,M.Z)({},e),(0,S.hexlify)((0,S.toUtf8Bytes)(e.toString("hex")))}return(0,S.hexlify)(t.id)},t.t0=this,t.t1=["minter"],t.next=5,this.getSignerAddress();case 5:return t.t2=t.sent,t.next=8,t.t0.onlyRoles.call(t.t0,t.t1,t.t2);case 8:return t.next=10,this.sdk.getStorage().uploadMetadataBatch(e.map((function(t){return t.metadata})));case 10:return n=t.sent,a=n.metadataUris,t.next=14,this.getChainID();case 14:return s=t.sent,t.next=17,this.getSignerAddress();case 17:return i=t.sent,u=this.getSigner(),t.next=21,Promise.all(e.map(function(){var t=_(G.mark((function t(e,n){var c,p;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r(e),p=a[n],t.t0=L({},e,{id:c,uri:p}),t.next=5,o.signTypedData(u,i,{name:"SignatureMint721",version:"1",chainId:s,verifyingContract:o.address},{MintRequest:Ye},L({uri:p},o.mapPayload(e),{uid:c}));case 5:return t.t1=t.sent.toString(),t.abrupt("return",{payload:t.t0,signature:t.t1});case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()));case 21:return t.abrupt("return",t.sent);case 22:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.generateSignature=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.generateSignatureBatch([e]);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.mapPayload=function(t){return{to:t.to,price:t.price,currency:t.currencyAddress,validityEndTimestamp:t.mintEndTimeEpochSeconds,validityStartTimestamp:t.mintStartTimeEpochSeconds,uid:t.id}},r.setAllowance=function(){var t=_(G.mark((function t(e,r,n){var a,s,i,c;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r!==kt&&r!==o.d){t.next=4;break}n.value=e,t.next=16;break;case 4:return a=u.w6.connect(r,this.providerOrSigner),t.next=7,this.getSignerAddress();case 7:return s=t.sent,i=this.address,t.next=11,a.allowance(s,i);case 11:if(!(c=t.sent).lt(e)){t.next=15;break}return t.next=15,this.sendContractTransaction(a,"increaseAllowance",[i,e.sub(c)]);case 15:return t.abrupt("return",n);case 16:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),e}(fe);Xe.moduleType=Et.NFT,Xe.roles=[Gt,Wt,zt],function(t){t[t.None=0]="None",t[t.ERC20=1]="ERC20",t[t.ERC721=2]="ERC721"}(Ze||(Ze={}));var tr=function(t){function e(){return t.apply(this,arguments)||this}B(e,t);var r=e.prototype;return r.getModuleRoles=function(){return e.roles},r.connectContract=function(){return u.KM.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return e.moduleType},r.open=function(){var t=_(G.mark((function t(e){var r,n,a,s,i,u,o,c,p=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("openPack",[e]);case 2:if(r=t.sent,0!==(n=this.parseLogs("PackOpenRequest",null==r?void 0:r.logs)).length){t.next=6;break}throw new Error("Failed to open pack");case 6:return a=n[0],s=a.args.requestId,i=a.args.opener,t.next=11,new Promise((function(t){p.readOnlyContract.once(p.readOnlyContract.filters.PackOpenFulfilled(null,i),(function(e,r,n,a,i){s===n&&t({packId:e,opener:r,requestId:s,rewardContract:a,rewardIds:i})}))}));case 11:return u=t.sent,o=u.rewardIds,c=u.rewardContract,t.next=15,Promise.all(o.map((function(t){return Bt(p.providerOrSigner,c,t.toString(),p.ipfsGatewayUrl)})));case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.get=function(){var t=_(G.mark((function t(e){var r,n,a,s,i;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([Bt(this.providerOrSigner,this.address,e,this.ipfsGatewayUrl),this.readOnlyContract.getPack(e),this.readOnlyContract.totalSupply(e).catch((function(){return l.O$.from("0")}))]);case 2:return r=t.sent,n=r[0],a=r[1],s=r[2],i={id:e,metadata:n,creator:a.creator,currentSupply:s,openStart:a.openStart.gt(0)?new Date(1e3*a.openStart.toNumber()):null},t.abrupt("return",i);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAll=function(){var t=_(G.mark((function t(){var e,r=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.nextTokenId();case 2:return e=t.sent.toNumber(),t.next=5,Promise.all(Array.from(Array(e).keys()).map((function(t){return r.get(t.toString())})));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getNFTs=function(){var t=_(G.mark((function t(e){var r,n,a=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.getPackWithRewards(e);case 2:if((r=t.sent).source){t.next=5;break}throw new W;case 5:return t.next=7,Promise.all(r.tokenIds.map((function(t){return Bt(a.providerOrSigner,r.source,t.toString(),a.ipfsGatewayUrl)})));case 7:return n=t.sent,t.abrupt("return",n.map((function(t,e){return{supply:r.amountsPacked[e],metadata:t}})));case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.balanceOf=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.balanceOf(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.balance=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.next=7,t.t0.balanceOf.call(t.t0,t.t1,t.t2);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.isApproved=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.isApprovedForAll(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.setApproval=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=!0),t.next=3,this.sendTransaction("setApprovalForAll",[e,r]);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.transfer=function(){var t=_(G.mark((function t(e,r,n){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.t3=r,t.t4=n,t.t5=[0],t.t6=[t.t1,t.t2,t.t3,t.t4,t.t5],t.next=11,t.t0.sendTransaction.call(t.t0,"safeTransferFrom",t.t6);case 11:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.create=function(){var t=_(G.mark((function t(e){var r,n,a,s,i,o,c,p,d,f;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.bP.connect(e.assetContract,this.providerOrSigner),t.next=3,this.getSignerAddress();case 3:return n=t.sent,a=e.assets.map((function(t){return t.tokenId})),s=e.assets.map((function(t){return t.amount})),t.next=8,this.sdk.getStorage().uploadMetadata(e.metadata);case 8:return i=t.sent,o=x.$.encode(["string","uint256","uint256"],[i,e.secondsUntilOpenStart||0,e.rewardsPerOpen||1]),t.t0=r,t.t1=n,t.t2=this.address,t.t3=a,t.t4=s,t.t5=o,t.next=18,this.getCallOverrides();case 18:return t.t6=t.sent,t.next=21,t.t0.safeBatchTransferFrom.call(t.t0,t.t1,t.t2,t.t3,t.t4,t.t5,t.t6);case 21:return c=t.sent,t.next=24,c.wait();case 24:if(p=t.sent,0!==(d=this.parseLogs("PackCreated",p.logs)).length){t.next=28;break}throw new Error("PackCreated event not found");case 28:return f=d[0].args.packId,t.next=31,this.get(f.toString());case 31:return t.abrupt("return",t.sent);case 32:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.transferFrom=function(){var t=_(G.mark((function t(e,r,n,a){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===a&&(a=[0]),t.next=3,this.sendTransaction("safeTransferFrom",[e,r,n.tokenId,n.amount,a]);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),r.transferBatchFrom=function(){var t=_(G.mark((function t(e,r,n,a){var s,i;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===a&&(a=[0]),s=n.map((function(t){return t.tokenId})),i=n.map((function(t){return t.amount})),t.next=5,this.sendTransaction("safeBatchTransferFrom",[e,r,s,i,a]);case 5:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),r.getLinkBalance=function(){var t=_(G.mark((function t(){var e,r,n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getChainID();case 2:return e=t.sent,r=Ft[e],n=u.w6.connect(r.linkTokenAddress,this.providerOrSigner),t.t0=St,t.t1=this.providerOrSigner,t.t2=r.linkTokenAddress,t.next=10,n.balanceOf(this.address);case 10:return t.t3=t.sent,t.next=13,(0,t.t0)(t.t1,t.t2,t.t3);case 13:return t.abrupt("return",t.sent);case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.depositLink=function(){var t=_(G.mark((function t(e){var r,n,a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getChainID();case 2:return r=t.sent,n=Ft[r],a=u.w6.connect(n.linkTokenAddress,this.providerOrSigner),t.t0=a,t.t1=this.address,t.t2=e,t.next=10,this.getCallOverrides();case 10:return t.t3=t.sent,t.next=13,t.t0.transfer.call(t.t0,t.t1,t.t2,t.t3);case 13:return s=t.sent,t.next=16,s.wait();case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.withdrawLink=function(){var t=_(G.mark((function t(e,r){var n,a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=new i.CH(this.address,[{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"transferLink",outputs:[],stateMutability:"nonpayable",type:"function"}],this.providerOrSigner),t.next=4,this.sendContractTransaction(n,"transferLink",[e,r]);case 4:t.next=14;break;case 6:return t.prev=6,t.t0=t.catch(0),t.next=10,this.getChainID();case 10:return a=t.sent,s=Ft[a],t.next=14,this.sendTransaction("transferERC20",[s.linkTokenAddress,e,r]);case 14:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(e,r){return t.apply(this,arguments)}}(),r.setRoyaltyBps=function(){var t=_(G.mark((function t(e){var r,n,a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:if(r=t.sent,n=r.metadata,a=[],n){t.next=7;break}throw new Error("No metadata found, this module might be invalid!");case 7:return n.seller_fee_basis_points=e,t.t0=this.sdk.getStorage(),t.t1=L({},n),t.t2=this.address,t.next=13,this.getSignerAddress();case 13:return t.t3=t.sent,t.next=16,t.t0.uploadMetadata.call(t.t0,t.t1,t.t2,t.t3);case 16:return s=t.sent,a.push(this.contract.interface.encodeFunctionData("setRoyaltyBps",[e])),a.push(this.contract.interface.encodeFunctionData("setContractURI",[s])),t.next=21,this.sendTransaction("multicall",[a]);case 21:return t.abrupt("return",t.sent);case 22:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setModuleMetadata=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.getStorage().uploadMetadata(e);case 2:return r=t.sent,t.next=5,this.sendTransaction("setContractURI",[r]);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getRoyaltyBps=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.royaltyBps();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getRoyaltyRecipientAddress=function(){var t=_(G.mark((function t(){var e,r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:if(r=t.sent,void 0===(null==(e=r.metadata)?void 0:e.fee_recipient)){t.next=5;break}return t.abrupt("return",r.metadata.fee_recipient);case 5:return t.abrupt("return","");case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.isTransferRestricted=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.readOnlyContract.transfersRestricted());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.setRestrictedTransfer=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=!1),t.t0=this,t.t1=["admin"],t.next=5,this.getSignerAddress();case 5:return t.t2=t.sent,t.next=8,t.t0.onlyRoles.call(t.t0,t.t1,t.t2);case 8:return t.next=10,this.sendTransaction("setRestrictedTransfer",[e]);case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getOwned=function(){var t=_(G.mark((function t(e){var r,n,a,s,i=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=4;break}t.t0=e,t.next=7;break;case 4:return t.next=6,this.getSignerAddress();case 6:t.t0=t.sent;case 7:return r=t.t0,t.next=10,this.readOnlyContract.nextTokenId();case 10:return n=t.sent,t.next=13,this.readOnlyContract.balanceOfBatch(Array(n.toNumber()).fill(r),Array.from(Array(n.toNumber()).keys()));case 13:return a=t.sent,s=a.map((function(t,e){return{tokenId:e,balance:t}})).filter((function(t){return t.balance.gt(0)})),t.next=17,Promise.all(s.map(function(){var t=_(G.mark((function t(e){var r,n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.tokenId,n=e.balance,t.next=3,i.get(r.toString());case 3:return a=t.sent,t.abrupt("return",L({},a,{ownedByAddress:n}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(fe);tr.moduleType=Et.PACK,tr.roles=[Gt,Wt,Ht,zt];var er=function(t){function e(){return t.apply(this,arguments)||this}B(e,t);var r=e.prototype;return r.connectContract=function(){return u.Ai.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return e.moduleType},r.get=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ct(this.providerOrSigner,this.address);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getAllRecipients=function(){var t=_(G.mark((function t(){var e,r,n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],r=l.O$.from(0),t.next=4,this.readOnlyContract.payeeCount();case 4:n=t.sent;case 5:if(!r.lt(n)){t.next=27;break}return t.prev=6,t.next=9,this.readOnlyContract.payee(r);case 9:return a=t.sent,t.t0=e,t.next=13,this.getRecipientSplitPercentage(a);case 13:t.t1=t.sent,t.t0.push.call(t.t0,t.t1),r=r.add(1),t.next=25;break;case 18:if(t.prev=18,t.t2=t.catch(6),!("method"in t.t2)||!t.t2.method.toLowerCase().includes("payee(uint256)")){t.next=24;break}return t.abrupt("break",27);case 24:throw t.t2;case 25:t.next=5;break;case 27:return t.abrupt("return",e);case 28:case"end":return t.stop()}}),t,this,[[6,18]])})));return function(){return t.apply(this,arguments)}}(),r.balanceOfAllRecipients=function(){var t=_(G.mark((function t(){var e,r,n,a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAllRecipients();case 2:e=t.sent,r={},n=j(e);case 5:if((a=n()).done){t.next=12;break}return s=a.value,t.next=9,this.balanceOf(s.address);case 9:r[s.address]=t.sent;case 10:t.next=5;break;case 12:return t.abrupt("return",r);case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.balanceOfTokenAllRecipients=function(){var t=_(G.mark((function t(e){var r,n,a,s,i;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAllRecipients();case 2:r=t.sent,n={},a=j(r);case 5:if((s=a()).done){t.next=12;break}return i=s.value,t.next=9,this.balanceOfToken(i.address,e);case 9:n[i.address]=t.sent;case 10:t.next=5;break;case 12:return t.abrupt("return",n);case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getRecipientSplitPercentage=function(){var t=_(G.mark((function t(e){var r,n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.readOnlyContract.totalShares(),this.readOnlyContract.shares(e)]);case 2:return r=t.sent,n=r[0],a=r[1],t.abrupt("return",{address:e,splitPercentage:a.mul(l.O$.from(1e7)).div(n).toNumber()/1e5});case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.balanceOf=function(){var t=_(G.mark((function t(e){var r,n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.provider.getBalance(this.address);case 2:return r=t.sent,t.next=5,this.readOnlyContract["totalReleased()"]();case 5:return n=t.sent,a=r.add(n),t.t0=this,t.t1=e,t.t2=a,t.next=12,this.readOnlyContract["released(address)"](e);case 12:return t.t3=t.sent,t.abrupt("return",t.t0._pendingPayment.call(t.t0,t.t1,t.t2,t.t3));case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.balanceOfToken=function(){var t=_(G.mark((function t(e,r){var n,a,s,i,o;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.w6.connect(r,this.providerOrSigner),t.next=3,n.balanceOf(this.address);case 3:return a=t.sent,t.next=6,this.readOnlyContract["totalReleased(address)"](r);case 6:return s=t.sent,i=a.add(s),t.t0=this,t.t1=e,t.t2=i,t.next=13,this.readOnlyContract["released(address,address)"](r,e);case 13:return t.t3=t.sent,t.next=16,t.t0._pendingPayment.call(t.t0,t.t1,t.t2,t.t3);case 16:return o=t.sent,t.next=19,St(this.providerOrSigner,r,o);case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.withdraw=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("release(address)",[e]);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r._pendingPayment=function(){var t=_(G.mark((function t(e,r,n){var a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=r,t.next=3,this.readOnlyContract.shares(e);case 3:return t.t1=t.sent,a=t.t0.mul.call(t.t0,t.t1),t.t2=a,t.next=8,this.readOnlyContract.totalShares();case 8:return t.t3=t.sent,s=t.t2.div.call(t.t2,t.t3),t.abrupt("return",s.sub(n));case 11:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.withdrawToken=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("release(address,address)",[r,e]);case 2:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.distribute=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("distribute()",[]);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.distributeToken=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("distribute(address)",[e]);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(de);er.moduleType=Et.SPLITS;var rr=function(t){function e(){return t.apply(this,arguments)||this}B(e,t);var r=e.prototype;return r.connectContract=function(){return u.tz.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return e.moduleType},r.settings=function(){var t=_(G.mark((function t(){var e,r,n,a,s,i,u;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.readOnlyContract.votingDelay(),this.readOnlyContract.votingPeriod(),this.readOnlyContract.token(),this.readOnlyContract.quorumNumerator(),this.readOnlyContract.proposalThreshold()]);case 2:return e=t.sent,r=e[0],n=e[1],a=e[2],s=e[3],i=e[4],t.next=10,Ct(this.providerOrSigner,a);case 10:return u=t.sent,t.abrupt("return",{votingDelay:r.toString(),votingPeriod:n.toString(),votingTokenAddress:a,votingTokenMetadata:u,votingQuorumFraction:s.toString(),proposalTokenThreshold:i.toString()});case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.get=function(){var t=_(G.mark((function t(e){var r,n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureExists(e);case 2:return t.next=4,this.getAll();case 4:if(r=t.sent,0!==(n=r.filter((function(t){return t.proposalId.toLowerCase()===e.toLowerCase()}))).length){t.next=8;break}throw new Error("proposal not found");case 8:return t.abrupt("return",n[0]);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAll=function(){var t=_(G.mark((function t(){var e,r,n,a,s,i,u,o,c,p,d=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.queryFilter(this.contract.filters.ProposalCreated());case 2:return e=t.sent,r=[],t.next=6,Promise.all(e.map((function(t){return d.readOnlyContract.state(t.args.proposalId)})));case 6:return n=t.sent,t.next=9,Promise.all(e.map((function(t){return d.readOnlyContract.proposalVotes(t.args.proposalId)})));case 9:for(a=t.sent,s=0;s<e.length;s++){for(i=e[s].args,u=n[s],o=[{type:Ie.Against,label:"Against",count:a[s].againstVotes},{type:Ie.For,label:"For",count:a[s].forVotes},{type:Ie.Abstain,label:"Abstain",count:a[s].abstainVotes}],c=[],p=0;p<i.targets.length;p++)c.push({to:i.targets[p],value:i[3][p]||0,data:i.calldatas[p]});r.push({proposalId:i.proposalId.toString(),proposer:i.proposer,description:i.description,startBlock:i.startBlock,endBlock:i.endBlock,state:u,votes:o,executions:c.map((function(t){return{toAddress:t.to,nativeTokenValue:t.value,transactionData:t.data}}))})}return t.abrupt("return",r);case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.propose=function(){var t=_(G.mark((function t(e,r){var n,a,s,i,u;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r||(r=[{toAddress:this.address,nativeTokenValue:0,transactionData:"0x"}]),n=r.map((function(t){return t.toAddress})),a=r.map((function(t){return t.nativeTokenValue})),s=r.map((function(t){return t.transactionData})),t.next=6,this.sendTransaction("propose",[n,a,s,e]);case 6:return i=t.sent,u=this.parseEventLogs("ProposalCreated",null==i?void 0:i.logs),t.abrupt("return",u.proposalId);case 9:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.vote=function(){var t=_(G.mark((function t(e,r,n){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=""),t.next=3,this.ensureExists(e);case 3:return t.next=5,this.sendTransaction("castVoteWithReason",[e,r,n]);case 5:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.hasVoted=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=4;break}return t.next=3,this.getSignerAddress();case 3:r=t.sent;case 4:return t.abrupt("return",this.readOnlyContract.hasVoted(e,r));case 5:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.execute=function(){var t=_(G.mark((function t(e){var r,n,a,s,i;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureExists(e);case 2:return t.next=4,this.get(e);case 4:return r=t.sent,n=r.executions.map((function(t){return t.toAddress})),a=r.executions.map((function(t){return t.nativeTokenValue})),s=r.executions.map((function(t){return t.transactionData})),i=d.id(r.description),t.next=11,this.sendTransaction("execute",[n,a,s,i]);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.canExecute=function(){var t=_(G.mark((function t(e){var r,n,a,s,i;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureExists(e);case 2:return t.next=4,this.get(e);case 4:return r=t.sent,n=r.executions.map((function(t){return t.toAddress})),a=r.executions.map((function(t){return t.nativeTokenValue})),s=r.executions.map((function(t){return t.transactionData})),i=d.id(r.description),t.prev=9,t.next=12,this.readOnlyContract.callStatic.execute(n,a,s,i);case 12:return t.abrupt("return",!0);case 15:return t.prev=15,t.t0=t.catch(9),t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t,this,[[9,15]])})));return function(e){return t.apply(this,arguments)}}(),r.balance=function(){var t=_(G.mark((function t(){var e;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.provider.getBalance(this.address);case 2:return e=t.sent,t.abrupt("return",{name:"",symbol:"",decimals:18,value:e.toString(),displayValue:c.formatUnits(e,18)});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.balanceOfToken=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.w6.connect(e,this.readOnlyContract.provider),t.t0=St,t.t1=this.providerOrSigner,t.t2=e,t.next=6,r.balanceOf(this.address);case 6:return t.t3=t.sent,t.next=9,(0,t.t0)(t.t1,t.t2,t.t3);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setModuleMetadata=function(){var t=_(G.mark((function t(e){var r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.getStorage().uploadMetadata(e);case 2:return r=t.sent,t.next=5,this.sendTransaction("setContractURI",[r]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.ensureExists=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.state(e);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(de);rr.moduleType=Et.VOTE,globalThis.FormData||(globalThis.FormData=r(6230));var nr="https://upload.nftlabs.co",ar=function(){function t(t){this.gatewayUrl=void 0,this.gatewayUrl=t.replace(/\/$/,"")+"/"}var e=t.prototype;return e.upload=function(){var t=_(G.mark((function t(e,r,n){var a,s,i,u,o,c;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!==typeof e){t.next=7;break}return t.next=3,this.uploadBatch([e],r,0);case 3:return a=t.sent,t.abrupt("return",a+"0");case 7:if(!(e instanceof P)){t.next=12;break}return t.next=10,this.uploadBatch([e],r,0);case 10:return s=t.sent,t.abrupt("return",s+"0");case 12:return i={"X-App-Name":"CONSOLE-TS-SDK-"+r,"X-Public-Address":n||""},(u=new FormData).append("file",e),t.prev=15,t.next=18,fetch(nr+"/upload",{method:"POST",body:u,headers:i});case 18:if(200===(o=t.sent).status){t.next=21;break}throw new Error("Failed to upload to IPFS [status code = "+o.status+"]");case 21:return t.next=23,o.json();case 23:return c=t.sent,t.abrupt("return",c.IpfsUri);case 27:throw t.prev=27,t.t0=t.catch(15),new K("Failed to upload to IPFS: "+t.t0);case 30:case"end":return t.stop()}}),t,this,[[15,27]])})));return function(e,r,n){return t.apply(this,arguments)}}(),e.uploadBatch=function(){var t=_(G.mark((function t(e,r,n){var a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=0),t.next=3,this.uploadBatchWithCid(e,r,n);case 3:return a=t.sent,s=a.cid,t.abrupt("return","ipfs://"+s+"/");case 6:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.uploadBatchWithCid=function(){var t=_(G.mark((function t(e,r,n){var a,s,i,u,o,c;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=0),t.next=3,this.getUploadToken(r||"");case 3:return a=t.sent,s={name:"CONSOLE-TS-SDK-"+r},i=new FormData,u=[],e.forEach((function(t,e){var r="",a=t;if(t instanceof File){var s="";if(t.name){var o=t.name.lastIndexOf(".");o>-1&&(s=t.name.substring(o))}r=""+(e+n)+s}else t instanceof P||"string"===typeof t?r=""+(e+n):t&&t.name&&null!=t&&t.data?(a=null==t?void 0:t.data,r=""+t.name):r=""+(e+n);var c="files/"+r;if(u.indexOf(r)>-1)throw new Q(r);u.push(r),"undefined"===typeof window?i.append("file",a,{filepath:c}):i.append("file",new Blob([a]),c)})),i.append("pinataMetadata",JSON.stringify(s)),t.next=11,fetch("https://api.pinata.cloud/pinning/pinFileToIPFS",{method:"POST",headers:{Authorization:"Bearer "+a},body:i});case 11:return o=t.sent,t.next=14,o.json();case 14:if(c=t.sent,o.ok){t.next=18;break}throw console.log(c),new K("Failed to upload files to IPFS");case 18:return t.abrupt("return",{cid:c.IpfsHash,fileNames:u});case 19:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.getUploadToken=function(){var t=_(G.mark((function t(e){var r,n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={"X-App-Name":"CONSOLE-TS-SDK-"+e},t.next=3,fetch(nr+"/grant",{method:"GET",headers:r});case 3:if((n=t.sent).ok){t.next=6;break}throw new Y("Failed to get upload token");case 6:return t.next=8,n.text();case 8:return a=t.sent,t.abrupt("return",a);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.get=function(){var t=_(G.mark((function t(e){var r,n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e,e&&(r=this.resolveFullUrl(e)),t.next=4,fetch(r);case 4:if((n=t.sent).ok){t.next=7;break}throw new Error("Status code (!= 200) ="+n.status);case 7:return t.next=9,n.text();case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.buildFilePropertiesMap=function(t,e){var r=Object.keys(t).sort();for(var n in r){var a=t[r[n]];(a instanceof File||a instanceof P)&&e.push(a),"object"===typeof a&&this.buildFilePropertiesMap(a,e)}return e},e.batchUploadProperties=function(){var t=_(G.mark((function t(e){var r,n,a,s,i,u,o,c,p;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!==typeof e){t.next=2;break}return t.abrupt("return",e);case 2:if(0!==(r=this.buildFilePropertiesMap(e,[])).length){t.next=5;break}return t.abrupt("return",e);case 5:return t.next=7,this.uploadBatchWithCid(r,"",0);case 7:for(n=t.sent,a=n.cid,s=n.fileNames,i=[],u=j(s);!(o=u()).done;)c=o.value,i.push(a+"/"+c);return t.next=14,this.replaceFilePropertiesWithHashes(e,i);case 14:return p=t.sent,t.abrupt("return",p);case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.replaceFilePropertiesWithHashes=function(){var t=_(G.mark((function t(e,r){var n,a,s,i;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Object.keys(e).sort(),t.t0=G.keys(n);case 2:if((t.t1=t.t0()).done){t.next=15;break}if(a=t.t1.value,s=e[n[a]],i=s instanceof File||s instanceof P,"object"!==typeof s||i){t.next=10;break}return t.next=9,this.replaceFilePropertiesWithHashes(s,r);case 9:return t.abrupt("continue",2);case 10:if(i){t.next=12;break}return t.abrupt("continue",2);case 12:e[n[a]]="ipfs://"+r.splice(0,1)[0],t.next=2;break;case 15:return t.abrupt("return",e);case 16:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.uploadMetadata=function(){var t=_(G.mark((function t(e,r,n){var a,s;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!==typeof e){t.next=2;break}return t.abrupt("return",e);case 2:return t.next=4,this.uploadMetadataBatch([e],r,0);case 4:return a=t.sent,s=a.metadataUris,t.abrupt("return",s[0]);case 7:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.uploadMetadataBatch=function(){var t=_(G.mark((function t(e,r,n){var a,s,i,u,o,c,p,d,f,l;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.filter((function(t){return"string"!==typeof t})),t.next=3,this.batchUploadProperties(a);case 3:if(0!==(s=t.sent.map((function(t){return JSON.stringify(t)}))).length){t.next=6;break}return t.abrupt("return",{baseUri:"",metadataUris:e.filter((function(t){return"string"===typeof t}))});case 6:return t.next=8,this.uploadBatchWithCid(s,r,n);case 8:for(i=t.sent,u=i.cid,o=i.fileNames,c="ipfs://"+u+"/",p=[],d=j(e);!(f=d()).done;)"string"===typeof(l=f.value)?p.push(l):p.push(""+c+o.splice(0,1)[0]);return t.abrupt("return",{baseUri:c,metadataUris:p});case 15:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.resolveFullUrl=function(t){return"string"!==typeof t?(console.warn("ipfsHash is not a string: "+t),""):t&&t.toLowerCase().includes("ipfs://")?t.replace("ipfs://",this.gatewayUrl):t},t}(),sr=function(t){function e(){return t.apply(this,arguments)||this}B(e,t);var r=e.prototype;return r.connectContract=function(){return u.Dz.connect(this.address,this.providerOrSigner)},r.getProtocolContracts=function(){var t=_(G.mark((function t(e){var r,n,a,s,i,u=this;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e,t.t0){t.next=5;break}return t.next=4,this.getSignerAddress();case 4:t.t0=t.sent;case 5:return r=t.t0,t.next=8,this.readOnlyContract.getProtocolControlCount(r);case 8:return n=t.sent,a=Array.from(Array(n.toNumber()).keys()).reverse(),t.next=12,Promise.all(a.map((function(t){return u.readOnlyContract.getProtocolControl(r,(t+1).toString())})));case 12:return s=t.sent,t.next=15,Promise.all(s.map((function(t){return vt(u.providerOrSigner,t,u.ipfsGatewayUrl).catch((function(){}))})));case 15:return i=t.sent,t.abrupt("return",a.map((function(t,e){return{address:s[e],version:t,metadata:i[e]}})));case 17:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(de),ir=function(){function t(t,e){this.options=void 0,this.defaultOptions={ipfsGatewayUrl:"https://cloudflare-ipfs.com/ipfs/",registryContractAddress:"",maxGasPriceInGwei:300,gasSpeed:"fastest",transactionRelayerUrl:"",transactionRelayerSendFunction:this.defaultRelayerSendFunction.bind(this),transactionRelayerForwarderAddress:"0xc82BbE41f2cF04e3a8efA18F7032BDD7f6d98a81",readOnlyRpcUrl:"",gasless:{biconomy:{apiId:"",apiKey:"",deadlineSeconds:3600}},gaslessSendFunction:this.defaultGaslessSendFunction.bind(this)},this.modules=new Map,this.providerOrSigner=void 0,this._signer=null,this._jsonConvert=new b.Q9,this.storage=void 0,this.event=new k.EventEmitter2,this._registry=null,this.providerOrSigner=this.setProviderOrSigner(t),this.options=L({},this.defaultOptions,e),this.storage=new ar(this.options.ipfsGatewayUrl)}var e=t.prototype;return e.updateModuleSigners=function(){for(var t,e=j(this.modules);!(t=e()).done;){var r=t.value[1];this.isReadOnly()&&r.clearSigner(),r.setProviderOrSigner(this.providerOrSigner)}},e.getProvider=function(){return g.zt.isProvider(this.providerOrSigner)?this.providerOrSigner:this.providerOrSigner.provider},e.getSigner=function(){if(p.E.isSigner(this.providerOrSigner))return this.providerOrSigner},e.getChainID=function(){var t=_(G.mark((function t(){var e,r,n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this.getProvider())||pe(!1),t.next=4,e.getNetwork();case 4:return r=t.sent,n=r.chainId,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getRegistryAddress=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.options.registryContractAddress){t.next=2;break}return t.abrupt("return",this.options.registryContractAddress);case 2:return t.t0=re,t.next=5,this.getChainID();case 5:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getRegistryModule=function(){var t=_(G.mark((function t(){var e;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getRegistryAddress();case 2:return(e=t.sent)||pe(!1),t.abrupt("return",this.registry=this.getOrCreateModule(e,sr));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getOrCreateModule=function(t,e){if(this.modules.has(t))return this.modules.get(t);var r=new e(this.providerOrSigner,t,this.options,this);return this.modules.set(t,r),r},e.getForwarderAddress=function(){var t=_(G.mark((function t(){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.registry,t.t0){t.next=5;break}return t.next=4,this.getRegistryModule();case 4:t.t0=t.sent;case 5:return t.next=7,t.t0.readOnlyContract.forwarder();case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getApps=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.registry,t.t0){t.next=5;break}return t.next=4,this.getRegistryModule();case 4:t.t0=t.sent;case 5:return t.abrupt("return",t.t0.getProtocolContracts(e));case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.createApp=function(){var t=_(G.mark((function t(e){var r,n,a,s,i,u;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.registry,t.t0){t.next=5;break}return t.next=4,this.getRegistryModule();case 4:t.t0=t.sent;case 5:return n=t.t0.contract,t.next=8,this.getGasPrice();case 8:return a=t.sent,s={},"number"===typeof a&&(s.gasPrice=(0,c.parseUnits)(a.toString(),"gwei")),t.t1=pt,t.t2=e,t.t3=n.address,t.next=16,null==(r=this.signer)?void 0:r.getAddress();case 16:if(t.t4=t.sent,t.t4){t.next=19;break}t.t4=void 0;case 19:return t.t5=t.t4,t.next=22,(0,t.t1)(t.t2,t.t3,t.t5);case 22:return i=t.sent,t.next=25,n.deployProtocol(i,s);case 25:return u=t.sent,t.next=28,u.wait();case 28:return t.abrupt("return",t.sent);case 29:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getGasPrice=function(){var t=_(G.mark((function t(e,r){var n,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e||this.options.gasSpeed,a=r||this.options.maxGasPriceInGwei,t.t0=Xt,t.next=5,this.getChainID();case 5:return t.t1=t.sent,t.t2=n,t.t3=a,t.next=10,(0,t.t0)(t.t1,t.t2,t.t3);case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.setProviderOrSigner=function(t){return g.zt.isProvider(t)||p.E.isSigner(t)?this.providerOrSigner=t:this.providerOrSigner=h.yl(t),p.E.isSigner(t)?this.signer=t:this.signer=null,this.updateModuleSigners(),this.providerOrSigner},e.isReadOnly=function(){return!p.E.isSigner(this.signer)},e.getContractMetadata=function(){var t=_(G.mark((function t(e){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=L,t.t1={},t.next=4,vt(this.providerOrSigner,e,this.options.ipfsGatewayUrl,!0);case 4:return t.t2=t.sent,t.t3={address:e},t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t3));case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getAppModule=function(t){return this.getOrCreateModule(t,Ee)},e.getNFTModule=function(t){return this.getOrCreateModule(t,Xe)},e.getCollectionModule=function(t){return this.getBundleModule(t)},e.getBundleModule=function(t){return this.getOrCreateModule(t,De)},e.getPackModule=function(t){return this.getOrCreateModule(t,tr)},e.getCurrencyModule=function(t){return this.getOrCreateModule(t,_e)},e.getTokenModule=function(t){return this.getOrCreateModule(t,Re)},e.getDatastoreModule=function(t){return this.getOrCreateModule(t,We)},e.getMarketModule=function(t){return this.getOrCreateModule(t,Qe)},e.getDropModule=function(t){return this.getOrCreateModule(t,ze)},e.getBundleDropModule=function(t){return this.getOrCreateModule(t,Ge)},e.getMarketplaceModule=function(t){return this.getOrCreateModule(t,Je)},e.getSplitsModule=function(t){return this.getOrCreateModule(t,er)},e.getVoteModule=function(t){return this.getOrCreateModule(t,rr)},e.invokeRoute=function(t,e){var r=t.split(".");if(r.length>0&&"thirdweb"===r[0]){if(4===r.length){var n,a=r[1],s=r[2],i=r[3];return(n=this.getModuleByName(a,s))[i].apply(n,e.arguments||[])}if(3===r.length)throw new Error("reserved for thirdweb.bridge.function_name");if(2===r.length)return this[r[1]].apply(this,e.arguments||[])}throw new Error("uknown route")},e.getModuleByName=function(t,e){if("currency"===t)return this.getCurrencyModule(e);if("nft"===t)return this.getNFTModule(e);if("market"===t)return this.getMarketModule(e);if("bundle"===t||"collection"===t)return this.getCollectionModule(e);if("drop"===t)return this.getDropModule(e);if("splits"===t)return this.getSplitsModule(e);if("pack"===t)return this.getPackModule(e);if("datastore"===t)return this.getDatastoreModule(e);if("app"===t||"project"===t)return this.getAppModule(e);throw new Error("unsupported module")},e.defaultGaslessSendFunction=function(){var t=_(G.mark((function t(e,r){return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.options.gasless.biconomy.apiId||!this.options.gasless.biconomy.apiKey){t.next=2;break}return t.abrupt("return",this.biconomySendFunction(e,r));case 2:return t.abrupt("return",this.defenderSendFunction(e,r));case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.biconomySendFunction=function(){var t=_(G.mark((function t(e,r){var n,a,u,o,c,p,d,l,h,v,x;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.getSigner(),u=this.getProvider(),a&&u||pe(!1),o=new i.CH(re(r.chainId,"biconomyForwarder"),se,u),c=0,t.next=7,oe(o,"getNonce",[r.from,c]);case 7:return p=t.sent,d={from:r.from,to:r.to,token:f.dE,txGas:r.gasLimit.toNumber(),tokenGasPrice:"0",batchId:c,batchNonce:p.toNumber(),deadline:Math.floor(Date.now()/1e3+(null!=(n=this.options.gasless.biconomy.deadlineSeconds)?n:3600)),data:r.data},l=s.arrayify(y.keccak256(["address","address","address","uint256","uint256","uint256","uint256","uint256","bytes32"],[d.from,d.to,d.token,d.txGas,d.tokenGasPrice,d.batchId,d.batchNonce,d.deadline,m.keccak256(d.data)])),t.next=12,a.signMessage(l);case 12:return h=t.sent,t.next=15,fetch("https://api.biconomy.io/api/v2/meta-tx/native",{method:"POST",body:JSON.stringify({from:r.from,apiId:this.options.gasless.biconomy.apiId,params:[d,h],to:r.to,gasLimit:r.gasLimit.toHexString()}),headers:{"x-api-key":this.options.gasless.biconomy.apiKey,"Content-Type":"application/json;charset=utf-8"}});case 15:if(!(v=t.sent).ok){t.next=23;break}return t.next=19,v.json();case 19:if((x=t.sent).txHash){t.next=22;break}throw new Error("relay transaction failed: "+x.log);case 22:return t.abrupt("return",x.txHash);case 23:throw new Error("relay transaction failed");case 24:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.defenderSendFunction=function(){var t=_(G.mark((function t(e,r){var n,a,s,i,o,c,p,d,f,h,m,x,y,g,k,b;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.getSigner(),a=this.getProvider(),n||pe(!1),a||pe(!1),s=this.options.transactionRelayerForwarderAddress,i=u.n5.connect(s,a),t.next=8,oe(i,"getNonce",[r.from]);case 8:if(o=t.sent,c={name:"GSNv2 Forwarder",version:"0.0.1",chainId:r.chainId,verifyingContract:s},p={ForwardRequest:ae},d={from:r.from,to:r.to,value:l.O$.from(0).toString(),gas:l.O$.from(r.gasLimit).toString(),nonce:l.O$.from(o).toString(),data:r.data},"approve"!==r.functionName||2!==r.functionArgs.length||!e.interface.functions["approve(address,uint256)"]||!e.interface.functions["permit(address,address,uint256,uint256,uint8,bytes32,bytes32)"]){t.next=22;break}return h=r.functionArgs[0],m=r.functionArgs[1],t.next=17,(0,w.signERC2612Permit)(n,e.address,r.from,h,m);case 17:x=t.sent,d=L({to:e.address},x),f=""+x.r+x.s.substring(2)+x.v.toString(16),t.next=32;break;case 22:if(null==n||null==(y=n.provider)||null==(g=y.provider)||!g.isWalletConnect){t.next=29;break}return k=v.E.getPayload(c,p,d),t.next=26,null==n?void 0:n.provider.send("eth_signTypedData",[r.from.toLowerCase(),JSON.stringify(k)]);case 26:f=t.sent,t.next=32;break;case 29:return t.next=31,n._signTypedData(c,p,d);case 31:f=t.sent;case 32:return t.next=34,this.options.transactionRelayerSendFunction(d,f);case 34:return b=t.sent,t.abrupt("return",b);case 36:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.defaultRelayerSendFunction=function(){var t=_(G.mark((function t(e,r){var n,a,s,i,u;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="forward",null!=e&&e.owner&&(n="permit"),a=JSON.stringify({request:e,signature:r,type:n}),t.next=5,fetch(this.options.transactionRelayerUrl,{method:"POST",body:a});case 5:if(!(s=t.sent).ok){t.next=12;break}return t.next=9,s.json();case 9:return i=t.sent,u=JSON.parse(i.result),t.abrupt("return",u.txHash);case 12:throw new Error("relay transaction failed");case 13:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.createSnapshot=function(){var t=_(G.mark((function t(e){var n,a,s,i,u,o,c;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(new Set(e).size<e.length)){t.next=3;break}throw new X;case 3:return t.next=5,Promise.all([r.e(811),r.e(648),r.e(738)]).then(r.t.bind(r,94648,23));case 5:return n=t.sent,a=n.default,s=e.map((function(t){return a(t)})),i=new(T())(s,a,{sort:!0}),u={merkleRoot:i.getHexRoot(),claims:e.map((function(t){return{address:t,proof:i.getHexProof(a(t))}}))},o=JSON.stringify(this._jsonConvert.serializeObject(u,qe)),t.next=13,this.storage.upload(o);case 13:return c=t.sent,t.abrupt("return",{merkleRoot:i.getHexRoot(),snapshotUri:c,snapshot:u});case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getStorage=function(){return this.storage},e.overrideStorage=function(t){this.storage=t},F(t,[{key:"signer",get:function(){return this._signer},set:function(t){this._signer=t}},{key:"registry",get:function(){return this._registry},set:function(t){this._registry=t}}]),t}();globalThis.fetch||(globalThis.fetch=a())}}]);